(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{1008:function(e,t,a){"use strict";(function(e){var n,o,r,l=m(a(169)),i=m(a(377)),s=m(a(21)),d=m(a(378)),c=m(a(927)),p=m(a(234)),u=m(a(136)),f=m(a(28));function m(e){return e&&e.__esModule?e:{default:e}}!function(l,i){"object"==(0,f.default)(t)&&"object"==(0,f.default)(e)?e.exports=i(a(919),a(1),a(9)):(o=[a(919),a(1),a(9)],void 0===(r="function"==typeof(n=i)?n.apply(t,o):n)||(e.exports=r))}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||(0,u.default)(e,t,{enumerable:!0,get:n})},a.r=function(e){void 0!==p.default&&c.default&&(0,u.default)(e,c.default,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":(0,f.default)(e))&&e&&e.__esModule)return e;var n=(0,d.default)(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=1)}([function(t,a){t.exports=e},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,u.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),r=m(o),l=(m(a(3)),a(0)),c=m(a(4)),p=a(5);function m(e){return e&&e.__esModule?e:{default:e}}var h=l.base.NCModal,g=l.base.NCButton,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":(0,f.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.callBack=function(){a.props.confirm(a.state.VaryID.refpk),a.props.close(a.state.VaryID.refpk)},a.onChange=function(e){a.setState({VaryID:e})},a.onClose=function(){a.props.close("close")},a.componentWillMount=function(){var e=a;(0,p.ctmsCheckClickCanUsed)(a.props.flag,null)?(0,l.ajax)({data:{code:a.props.flag},loading:!0,url:"/nccloud/riasm/change/ctmsconfig.do",success:function(t){t.data<0&&(e.props.confirm("undefined"),e.props.close("undefined")),e.setState({show:!0})},error:function(e){(0,l.toast)({color:"warning",content:e.message})}}):e.props.close("undefined")},a.state={VaryID:{},show:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,f.default)(t)));e.prototype=(0,d.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(h,{show:this.state.show},r.default.createElement(h.Header,null,r.default.createElement(h.Title,null,"选择变更号")),r.default.createElement(h.Body,null,r.default.createElement(c.default,{value:this.state.VaryID,onChange:this.onChange})),r.default.createElement(h.Footer,null,r.default.createElement(g,{onClick:this.onClose},"关闭"),r.default.createElement(g,{onClick:this.callBack,color:"primary"},"确认"))))}}]),t}(o.Component);t.default=y},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"grid",refName:"变更号",placeholder:"变更号",queryGridUrl:"/nccloud/riasm/change/varyidref.do",isHasDisabledData:!1,columnConfig:[{name:["1880000025-000002","1880000025-000003"],code:["refcode","refname"]}]};return React.createElement(o,n({},t,e))};var o=a(0).high.Refer},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.ctmsCheckAppEnvIsProduct=t.ctmsCheckClickCanUsed=void 0;var n=a(0);t.ctmsCheckClickCanUsed=function(e,t){var a=!0;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/qrycurrentappcanused.do",data:e,async:!1,success:function(e){return 0==e.data.result&&(null==t||""==t?(0,n.toast)({color:"warning",content:e.data.msg}):(0,n.toast)({color:"warning",content:t}),a=!1),a},error:function(e){(0,n.toast)({color:"danger",content:e})}}),a},t.ctmsCheckAppEnvIsProduct=function(){var e=!1;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/systemtype.do",data:null,async:!1,success:function(t){return"product"==t.data&&(e=!0),e},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),e}}])}))}).call(this,a(235)(e))},1020:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var n=i(a(169));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(s,(0,n.default)(d,e))};var o=i(a(1)),r=a(919),l=a(19);function i(e){return e&&e.__esModule?e:{default:e}}var s=r.high.Refer,d=t.conf={placeholder:(0,l.langCheck)("0000PUB-000052"),rootNode:{refname:(0,l.langCheck)("0000PUB-000052"),refpk:"root"},refType:"tree",refName:(0,l.langCheck)("0000PUB-000053"),refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:{queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",refName:(0,l.langCheck)("0000PUB-000054"),rootNode:{refname:(0,l.langCheck)("0000PUB-000054"),refpk:"root"}},isShowUnit:!1}},1021:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(169),r=(n=o)&&n.__esModule?n:{default:n};t.generateData=function(e){var t=[],a={};return e.map((function(e){var n=e.pid,o=e.code,r=e.name;e.children&&delete e.children,e.text=o+" "+r,e.title=e.text,e.key=o,n?(a[n]||(a[n]=[]),a[n].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateTemData=function(e){var t=[],a={},n=[],o=[];return e.map((function(e){var t=e.templateId,a=e.name,r=e.code;e.children&&delete e.children,e.key=t,e.text=r+" "+a,e.pk=t,n.push(t),o.push(e)})),o.forEach((function(e){var o=e.templateId;n.includes(e.parentId)?(a[o]=[],a[o].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateRoData=function(e){var t=[];return e.map((function(e){var a=e.code,n=e.id,o=e.name;e.key=n,e.text=a+" "+o,e.title=e.text,t.push(e)})),t},t.generateTreeData=function e(t){return t.map((function(t){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t}))}},1022:function(e,t,a){var n=a(1045);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},1023:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicComponents=void 0,t.getDynamicComponent=function(e){window[e]||function(e){var t="/nccloud/resources/"+e+".js";(0,n.loadScript)(t)}(e);return window[e]&&window[e].default};var n=a(19);t.DynamicComponents={NCUploader:"uap/common/components/NCUploader/index"}},1025:function(e,t,a){e.exports=a.p+"images/noPage.png"},1026:function(e,t,a){e.exports=a.p+"images/noPrint.png"},1027:function(e,t,a){e.exports=a.p+"images/unSelected.png"},1034:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=D(a(17)),o=D(a(2)),r=D(a(21)),l=D(a(5)),i=D(a(7)),s=D(a(4)),d=D(a(6)),c=D(a(232)),p=D(a(109)),u=D(a(56));a(231),a(130),a(132);var f=a(1),m=D(f),h=D(a(0)),g=a(37),y=D(a(35)),T=a(19),v=D(a(68)),k=D(a(1020)),b=a(980),C=a(1021),E=a(1035),w=D(a(364));a(1036);var x=D(a(26));function D(e){return e&&e.__esModule?e:{default:e}}var S=x.default.base,M=S.NCDiv,N=S.NCButton,P=S.NCTree,R=S.NCCheckbox,A=x.default.metaCache,_=A.getMetaCache,K=A.removeMetaCache,I=u.default.Option,j=P.NCTreeNode,V=p.default.Search,O=c.default.TabPane,q=["abc1234567","abc2234567","abc3334567"],L=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.reqAllowTreeData=function(){var e=a.state,t=e.orgidObj,n=e.nodeKeyValue,r=a.props,l=r.templatePk,i=r.pageCode,s=r.appCode,d=r.def1,c=r.json,p={pageCode:i,orgId:t.refpk,templateId:l,appCode:s};"apppage"===d?p.templateType="bill":"menuitem"===d&&(p.templateType="print",p.pageCode&&delete p.pageCode,p.pageCode=n),a.props.mobileInfoData&&(p=(0,o.default)({orgId:t.refpk},a.props.mobileInfoData)),"mobile"===a.props.pageType&&(p=(0,o.default)({},p,{templateType:"mobile"})),(0,y.default)({url:"/nccloud/platform/template/listAssignmentsOfTemplate.do",info:{name:c["10180TM-000002"],action:c["10180TM-000003"]},data:p,success:function(e){var t=e.data;t.success&&a.setState({allowDataArray:t.data},a.restoreAllowedTree)}})},a.restoreAllowedTree=function(){var e=a.state,t=e.allowDataArray,n=e.treeAllowedData;t.map((function(e){e.text=e.code+"  "+e.name,e.key=e.id})),n=(0,C.generateTreeData)(t),a.setState({treeAllowedData:n})},a.reqRoTreeData=function(e){var t=a.state,n=t.orgidObj,o=t.tabActiveKey,r=a.props.json;if(n.refpk){var l=e?"/nccloud/platform/template/filterAllRoleUserAndResp.do":"/nccloud/platform/template/getAllRoleUserAndResp.do",i=e?{orgId:n.refpk,content:e}:{orgId:n.refpk};(0,y.default)({url:l,info:{name:(0,T.langCheck)("10180TM-000004","pages",r),action:(0,T.langCheck)("10180TM-000005","pages",r)},data:i,success:function(t){var n=t.data;n.success&&n.data&&((n.data.roles||n.data.users||n.data.resps)&&(e?("1"==o?a.restoreRoTreeData(n.data):a.restoreResTreeData(n.data.resps),a.handleExpanded(n.data,e)):(a.restoreRoTreeData(n.data),a.restoreResTreeData(n.data.resps))),a.props.setRoleUserDatas(n.data),a.reqAllowTreeData())}})}},a.restoreResTreeData=function(e){var t=a.state.treeResData,n=a.props.json;t=[],E.initAbiTreeData.text=(0,T.langCheck)("10180TM-000006","pages",n),E.initAbiTreeData2.text=(0,T.langCheck)("10180TM-000006","pages",n);var o=E.initAbiTreeData;e.map((function(e){var t=e.code,a=e.name;e.text=t+"  "+a,e.type="resp"})),o.children=e,t.push(o),t=(0,C.generateTreeData)(t),a.setState({treeResData:t})},a.restoreRoTreeData=function(e){var t=a.state.treeRoData,n=a.props.json;t=[],E.initRoTreeData.text=(0,T.langCheck)("10180TM-000007","pages",n),E.initUserTreeData.text=(0,T.langCheck)("10180TM-000008","pages",n),E.initRoTreeData2.text=(0,T.langCheck)("10180TM-000007","pages",n),E.initUserTreeData2.text=(0,T.langCheck)("10180TM-000008","pages",n);var o=E.initRoTreeData,r=E.initUserTreeData;e.roles.map((function(e){e.type="roles"})),e.users.map((function(e){e.type="users"})),o.children=(0,C.generateRoData)(e.roles),r.children=(0,C.generateRoData)(e.users),t.push(o),t.push(r),t=(0,C.generateTreeData)(t),a.setState({treeRoData:t})},a.selectRoFun=function(e){var t=a.state.roCheckedKeys,o=e.node.props.refData.id,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({roCheckedKeys:[].concat((0,n.default)(t))},a.lookCheckDataFun)},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].id==e[o].id&&++a;t.push(e[a])}return t},a.allowClick=function(e){var t=a.state,n=t.allowDataArray,o=t.treeAllowedData,r=t.allowedCheckedKeys,l=a.props,i=l.roCheckedObjArray,s=l.json;switch(e){case"allowRole":if(i&&0===i.length)return void(0,v.default)({status:"warning",msg:(0,T.langCheck)("10180TM-000009","pages",s)});n=n.concat(i),n=a.arrayUnique(n),o=(0,C.generateTreeData)(n);break;case"allowRoleCancel":if(r&&0===r.length)return void(0,v.default)({status:"warning",msg:(0,T.langCheck)("10180TM-000009","pages",s)});Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};for(var d=r.length-1;d>=0;d--)for(var c=0;c<n.length;c++)r[d]&&n[c].id===r[d]&&n.remove(n[c]);o=(0,C.generateTreeData)(n)}a.setState({treeAllowedData:o,allowDataArray:n,allowedCheckedKeys:r})},a.onSelectedAllow=function(e){var t=a.state.allowedCheckedKeys,o=e.node.props.refData.id,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({allowedCheckedKeys:[].concat((0,n.default)(t))})},a.onSelect=function(e,t){switch(e){case"resOnselect":a.selectRoFun(t);break;case"allowedOnselect":a.onSelectedAllow(t)}},a.hanldeDoubleClick=function(e,t){var n=void 0,o=[];"resOnselect"===e&&(n=t.props.refData.key,o=a.state.expandedKeys.concat([n]),a.setState({expandedKeys:o}))},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.handleExpanded=function(e,t){var n=a.state.tabActiveKey,o=[];if("1"===n){for(var r in e)e.hasOwnProperty(r)&&("users"!==r&&"roles"!==r||e[r].map((function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&o.push(e.key)})));o.push("abc1234567"),o.push("abc2234567"),a.setState({expandedKeys:o,roleSearchValue:t,autoExpandParent:!0})}else{for(var l in e)e.hasOwnProperty(l)&&"resps"===l&&e[l].map((function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&o.push(e.key)}));o.push("abc3334567"),a.setState({expandedKeys:o,respSearchValue:t,autoExpandParent:!1})}},a.onSearch=function(){var e=a.state,t=e.tabActiveKey,n=e.roleSearchValue,o=e.respSearchValue;"1"===t?n?a.reqRoTreeData(n):(a.setState({expandedKeys:[]}),a.reqRoTreeData()):"2"===t&&(o?a.reqRoTreeData(o):(a.setState({expandedKeys:[]}),a.reqRoTreeData()))},a.onCheck=function(e,t){switch(e){case"resOnselect":a.onCheckRoFun(t);break;case"allowedOnselect":a.onCheckAllowedFun(t)}},a.onCheckRoFun=function(e){var t=e.filter((function(e){return!q.includes(e)}));a.setState({roCheckedKeys:t},a.lookCheckDataFun)},a.lookCheckDataFun=function(){var e=a.state.roCheckedKeys,t=a.props.roleUserDatas,n=e.filter((function(e){return"abc1234567"!==e&&"abc2234567"!==e&&"abc3334567"!==e})),o=[];n.map((function(e){var a={},n=function(n){t[n].map((function(t){t.id===e&&(a.key=t.id,a.id=t.id,a.pk=t.id,a.text=t.code+"  "+t.name,a.code=t.code,"users"===n?a.type="user":"roles"===n?a.type="role":"resps"===n&&(a.type="resp"))}))};for(var r in t)n(r);o.push(a)})),a.props.setRoCheckedObjArray(o)},a.onCheckAllowedFun=function(e){a.setState({allowedCheckedKeys:e})},a.handleSearchDel=function(){var e=a.state.tabActiveKey,t=a.props.roleUserDatas;switch(e){case"1":a.restoreRoTreeData(t),a.setState({roleSearchValue:"",expandedKeys:[]});break;case"2":a.restoreResTreeData(t.resps),a.setState({respSearchValue:"",expandedKeys:[]})}},a.treeResAndUser=function(e,t,n,o,r,l){var i=a.state,s=i.expandedKeys,d=i.autoExpandParent,c=i.treeAllowedData,p=i.tabActiveKey,u=a.props.json;return m.default.createElement("div",{className:r||""},n?"":m.default.createElement("div",{className:"fixed-search-input"},m.default.createElement(V,{style:{marginBottom:8},placeholder:(0,T.langCheck)("10180TM-000010","pages",u),onSearch:a.onSearch,onChange:function(e){"1"===p?a.setState({roleSearchValue:e.target.value}):a.setState({respSearchValue:e.target.value}),""===e.target.value&&(a.reqRoTreeData(),a.setState({expandedKeys:[]}))},value:o,suffix:o.length>0?m.default.createElement("i",{className:"iconfont icon-qingkong",onClick:function(){a.handleSearchDel()}}):"",fieldid:"search"})),e.length>0&&m.default.createElement(M,{fieldid:n?"allocationRight":"allocationLeft",areaCode:M.config.TreeCom,className:"allocationLeft_tree_content"},m.default.createElement(P,{showLine:!0,checkable:!0,onExpand:a.onExpand,expandedKeys:s,onSelect:function(e,n){a.onSelect(t,n)},autoExpandParent:d,onDoubleClick:function(e,n){a.hanldeDoubleClick(t,n)},onCheck:function(e){a.onCheck(t,e)},checkedKeys:l},function e(a){return a.map((function(a){var n=a.text,r=a.id,l=void 0,i=!1;if(c.map((function(e){e.key===r&&(i=!0)})),"resOnselect"===t){var d=n.indexOf(o),p=n.substr(0,d),u=n.substr(d+o.length);l=d>-1?m.default.createElement("span",null,a.children?m.default.createElement("span",{className:"tree-switch-icon iconfont "+(s.includes(r)?"icon-wenjianjiadakai":"icon-wenjianjia")}):m.default.createElement("span",{className:"tree-dot"}),p,m.default.createElement("span",{style:{color:"#f50"}},o),u):m.default.createElement("span",null,m.default.createElement("span",null," ",n," "))}else"allowedOnselect"===t&&(l=n);var f=a.children?"fieldid_"+n+"_node":"fieldid_"+a.code+"_node";return a.children&&a.children.length>0?m.default.createElement(j,{key:r,title:l,refData:a,className:f},e(a.children)):m.default.createElement(j,{key:r,title:l,refData:a,className:f,disabled:"resOnselect"===t&&i})}))}(e))))},a.handleAlloOk=function(){var e=a.state,t=e.treeAllowedData,n=e.orgidObj,r=e.nodeKeyValue,l=a.props,i=l.templatePk,s=l.appCode,d=l.pageCode,c=l.def1,p=l.json;if(n.refpk)if(t){for(var u={},f=0;f<t.length;f++){var m=t[f];for(var h in m)"id"===h&&(u[m[h]]=m.type)}var g="";for(var k in u)g=g+(k+":")+u[k]+",";var b=g.length;g=g.substr(0,b-1);var C={pageCode:d,templateId:i,orgId:n.refpk,appCode:s};C.targets=g,"apppage"===c?C.templateType="bill":"menuitem"===c&&(C.templateType="print",C.pageCode&&delete C.pageCode,r&&(C.pageCode=r)),a.props.mobileInfoData&&(C=(0,o.default)({},C,a.props.mobileInfoData)),"mobile"===a.props.pageType&&(C=(0,o.default)({},C,{templateType:"mobile"})),(0,y.default)({url:"/nccloud/platform/template/assignTemplate.do",data:C,loading:!0,info:{name:(0,T.langCheck)("10180TM-000012","pages",p),action:(0,T.langCheck)("10180TM-000013","pages",p)},success:function(e){var t=e.data;t.success&&((0,v.default)({status:"success",msg:t.msg}),_(s,d)&&K(s,d),a.props.setAssignModalVisible(!1))}})}else(0,v.default)({status:"warning",msg:(0,T.langCheck)("10180TM-000009","pages",p)});else(0,v.default)({status:"error",msg:(0,T.langCheck)("10180TM-000011","pages",p)})},a.handleOrlCancel=function(){a.props.setAssignModalVisible(!1)},a.handdleRefChange=function(e){var t=a.state.orgidObj,n=e.refname,o=e.refcode,r=e.refpk;t.refname=n,t.refcode=o,t.refpk=r,a.setState({orgidObj:t},a.reqRoTreeData)},a.handleCheckAllAllowed=function(e){var t=e?a.state.treeAllowedData.map((function(e){return e.key})):[];a.setState({allowedCheckedKeys:t})},a.state={expandedKeys:[],roleSearchValue:"",respSearchValue:"",autoExpandParent:!1,nodeKeyValue:a.props.nodeKey&&a.props.nodeKey.length>0?a.props.nodeKey[0]:"",treeRoData:[],treeResData:[],roCheckedKeys:[],allowedCheckedKeys:[],allowDataArray:[],treeAllowedData:[],orgidObj:{refcode:"",refname:window.GETBUSINESSINFO().groupName,refpk:window.GETBUSINESSINFO().groupId},tabActiveKey:"1",json:{}},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){this.state.orgidObj.refpk&&this.reqRoTreeData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.orgidObj,n=t.treeRoData,o=t.treeResData,r=t.treeAllowedData,l=t.tabActiveKey,i=t.roleSearchValue,s=t.respSearchValue,d=t.allowedCheckedKeys,p=t.roCheckedKeys,f=this.props,h=f.pageCode,g=f.def1,y=f.nodeKey,v=f.json,b=f.mobileInfoData;return m.default.createElement(w.default,{dialogClassName:"allocation-modal",title:(0,T.langCheck)("10180TM-000014","pages",v),visible:this.props.alloVisible,onOk:this.handleAlloOk,onCancel:this.handleOrlCancel,okText:(0,T.langCheck)("10180TM-000015","pages",v),cancelText:(0,T.langCheck)("10180TM-000016","pages",v),width:720,maskClosable:!1,keyboard:!0,fieldid:"allocation"},m.default.createElement("div",{className:"allocationPage"},m.default.createElement("div",{className:"pageCode-show"},m.default.createElement("p",{className:"pageCodeName"},(0,T.langCheck)("10180TM-000017","pages",v),m.default.createElement("span",null,h||b&&b.pageCode)),"menuitem"===g&&m.default.createElement("div",null,m.default.createElement("label",{htmlFor:""},(0,T.langCheck)("10180TM-000018","pages",v)),m.default.createElement(u.default,{notFoundContent:(0,T.langCheck)("10180TM-000075","pages",v),showSearch:!0,style:{width:200},placeholder:(0,T.langCheck)("10180TM-000019","pages",v),optionFilterProp:"children",onSelect:function(t){e.setState({nodeKeyValue:t},(function(){e.reqAllowTreeData()}))},defaultValue:null==y?"":y[0],filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},y&&y.length>0&&y.map((function(e,t){if(e)return m.default.createElement(I,{value:e},e)}))))),m.default.createElement("div",{className:"allocationPage-content"},m.default.createElement("div",{className:"allocationPage-content-tree"},m.default.createElement("div",{className:"allocation-treeCom"},m.default.createElement(c.default,{defaultActiveKey:"1",activeKey:l,renderTabBar:function(e,t){return m.default.createElement(M,{areaCode:M.config.TABS}," ",m.default.createElement(t,e))},onChange:function(t){e.setState({tabActiveKey:t})}},m.default.createElement(O,{tab:(0,T.langCheck)("10180TM-000020","pages",v),key:"1"},m.default.createElement(M,{className:"allocation-treeScrollName",fieldid:"allocationUser",areaCode:M.config.TREE},this.treeResAndUser(n,"resOnselect",null,i,"searchTree-assign",p))),m.default.createElement(O,{tab:(0,T.langCheck)("10180TM-000006","pages",v),key:"2"},m.default.createElement(M,{className:"allocation-treeScrollName",fieldid:"allocationDuty",areaCode:M.config.TREE},this.treeResAndUser(o,"resOnselect",null,s,"searchTree-assign",p))))),m.default.createElement("div",{className:"allocation-button"},m.default.createElement("div",null,m.default.createElement("div",null,m.default.createElement("p",null,m.default.createElement(N,{fieldid:"toRight",onClick:this.allowClick.bind(this,"allowRole")},m.default.createElement("i",{className:"icon iconfont icon-jiantouyou"}))),m.default.createElement("p",null,m.default.createElement(N,{fieldid:"toLeft",onClick:this.allowClick.bind(this,"allowRoleCancel")},m.default.createElement("i",{className:"icon iconfont icon-jiantouzuo"})))))),m.default.createElement("div",{className:"allocation-treeContainer"},m.default.createElement("div",{className:"allocation-select"},m.default.createElement("label",{htmlFor:""},(0,T.langCheck)("10180TM-000021","pages",v)),m.default.createElement(k.default,{value:a,placeholder:(0,T.langCheck)("10180TM-000022","pages",v),fieldid:"businessUnit",onChange:function(t){e.handdleRefChange(t)}})),m.default.createElement("div",{className:"allocation-tree"},m.default.createElement(R,{checked:0!==d.length&&d.length===r.length,indeterminate:0!==d.length&&d.length<r.length,onChange:this.handleCheckAllAllowed},(0,T.langCheck)("10180TM-000081","pages",v)," "),r.length>0&&this.treeResAndUser(r,"allowedOnselect","hideSearch","","",d)))))))}}]),t}(f.Component);L.propTypes={templatePk:h.default.string.isRequired,roCheckedObjArray:h.default.array.isRequired,setRoCheckedObjArray:h.default.func.isRequired,nodeKey:h.default.array.isRequired,roleUserDatas:h.default.object.isRequired,setRoleUserDatas:h.default.func.isRequired,json:h.default.object.isRequired},t.default=(0,g.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,nodeKey:e.TemplateSettingData.nodeKey,roCheckedObjArray:e.TemplateSettingData.roCheckedObjArray,roleUserDatas:e.TemplateSettingData.roleUserDatas}}),{setRoCheckedObjArray:b.setRoCheckedObjArray,setRoleUserDatas:b.setRoleUserDatas})(L)},1035:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initRoTreeData={id:"abc1234567",text:"",children:[]},t.initUserTreeData={id:"abc2234567",text:"",children:[]},t.initRoTreeData2={id:"abc1234567",text:"",children:[]},t.initUserTreeData2={id:"abc2234567",text:"",children:[]},t.initAbiTreeData={id:"abc3334567",text:"",children:[]},t.initAbiTreeData2={id:"abc3334567",text:"",children:[]}},1036:function(e,t,a){var n=a(1037);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},1037:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".allocation-modal .u-modal-body{padding:15px 0 0}.allocationPage .pageCode-show{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;margin:0 15px;padding:10px 20px;background-color:#f3f3f3}.allocationPage .pageCode-show .pageCodeName{margin-bottom:0}.allocationPage .allocationPage-content .allocationPage-content-select{display:flex;justify-content:space-between;padding:15px 20px;border-top:1px solid #ccc;border-bottom:1px solid #ccc}.allocationPage .allocationPage-content .allocationPage-content-tree{display:flex;justify-content:space-between}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom{width:42%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-tabs-bar{margin:0;padding:0 5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName{height:330px;border-right:1px solid #e8e8e8;position:relative;padding-top:50px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .allocationLeft_tree_content{width:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign{display:flex;padding:0 10px;overflow:auto;height:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .fixed-search-input{position:absolute;top:0;left:0;padding:0 15px;width:100%;display:flex;background-color:#fff;z-index:1}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-switch-icon{color:#f2b224;margin-right:5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .allocation-treeScrollName .searchTree-assign .tree-dot{display:inline-block;width:5px;height:5px;background-color:#555;border-radius:100%;margin:0 7px 2px 0}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper{margin-bottom:8px;margin-top:8px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeCom .ant-input-affix-wrapper .ant-input{width:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button{padding-top:43px;width:16%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div{border-top:1px solid #e8e8e8;display:flex;align-items:center;height:330px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div{width:100%;display:flex;flex-direction:column;justify-content:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div p{text-align:center;margin-bottom:30px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button>div>div .icon{color:rgba(85,85,85,.5)}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer{width:42%;display:flex;flex-direction:column}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select{padding:5px 0 8px;display:flex;align-items:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-select .refer-wrapper{width:200px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer .allocation-tree{height:330px;border:1px solid #e8e8e8;border-right:0;border-bottom:0;overflow:auto}",""])},1038:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(2)),o=l(a(922));a(921);var r=l(a(229));function l(e){return e&&e.__esModule?e:{default:e}}var i=o.default.TreeNode;t.default=function e(t,a){return t.map((function(t){var o=t.code,l=t.name,s=t.pk,d=(0,n.default)({},t);t.moduleid&&t.systypename&&(s=t.moduleid,o="0"==t.flag?t.moduleid:t.systypecode,l=t.systypename,d.pk=s,d.code=o,d.name=l);var c=o+" "+l;"00"===o&&(c=""+l);var p=c.indexOf(a),u=c.substr(0,p),f=c.substr(p+a.length),m=p>-1?React.createElement("span",null,u,React.createElement("span",{style:{color:"#f50"}},a),f):React.createElement("span",null,React.createElement("span",null," ",c," ")),h="00"===o?"fieldid_"+l+"_node":"fieldid_"+o+"_node";return t.children&&t.children.length>0?React.createElement(i,{key:s,title:m,refData:d,icon:function(e){var t=e.expanded;return React.createElement(r.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return React.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},className:h},e(t.children,a)):React.createElement(i,{icon:React.createElement("span",{className:"tree-dot"}),key:s,title:m,refData:d,className:h})}))}},1039:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(11)),o=m(a(2)),r=m(a(17)),l=m(a(110)),i=m(a(77)),s=m(a(230)),d=m(a(14)),c=m(a(922));a(923),a(921);var p=a(1),u=m(p),f=m(a(229));function m(e){return e&&e.__esModule?e:{default:e}}var h=c.default.TreeNode;t.default=function(e){var t=e.treeData,a=e.rootNode,m=e.treeNodeItem,g=e.onLoadData,y=(0,d.default)(e,["treeData","rootNode","treeNodeItem","onLoadData"]),T=(0,p.useState)(t),v=(0,s.default)(T,2),k=v[0],b=v[1],C=JSON.parse((0,i.default)(a));return C[0].children=t,u.default.createElement(c.default,(0,o.default)({showLine:!0,showIcon:!0,loadData:function(e){return new l.default((function(a){if(!e.props.children)return"function"==typeof g?g(e.props.refData).then((function(n){Array.isArray(n)&&(e.props.refData.children=n,b([].concat((0,r.default)(t)))),a()})):void 0;a()}))}},y),function e(t){return t&&t.map((function(t){var a=m&&m(t),r=(0,o.default)({refData:t,icon:function(e){var t=e.expanded;return a.isLeaf?u.default.createElement("span",{className:"tree-dot"}):u.default.createElement(f.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return e.loading?u.default.createElement(n.default,{type:"loading"}):u.default.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})}},a);return t.children?u.default.createElement(h,r,e(t.children)):u.default.createElement(h,(0,o.default)({icon:u.default.createElement("span",{className:"tree-dot"})},r))}))}(a?C:k))}},1040:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=b(a(109)),r=b(a(2)),l=b(a(21)),i=b(a(5)),s=b(a(7)),d=b(a(4)),c=b(a(6));a(130);var p=a(1),u=b(p),f=b(a(0)),m=a(37),h=a(980),g=b(a(364)),y=a(19),T=b(a(35)),v=b(a(68)),k=b(a(975));function b(e){return e&&e.__esModule?e:{default:e}}a(1041);var C=(0,k.default)((function(e,t){t.copyTemplate(e)}))(n=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.checkCode=function(){var e=a.props,t=e.json,n=e.templateTitleVal;if(!a.trim(n))return document.getElementById("templateCode").classList.add("has-error"),void a.setState({codeErrorMsg:(0,y.langCheck)("10180TM-000024","pages",t)});document.getElementById("templateCode").classList.remove("has-error"),a.setState({codeErrorMsg:""})},a.checkName=function(){var e=a.props,t=e.json,n=e.templateNameVal;if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,y.langCheck)("10180TM-000023","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.copyTemplate=function(e){var t=a.props,n=t.def1,o=t.templatePk,l=t.pageCode,i=t.appCode,s=t.templateNameVal,d=t.templateTitleVal,c=t.setSelectedTemKeys,p=t.setParentIdcon,u=t.setTemplateNameVal,f=t.setTemplatePk,m=t.setTemplateTitleVal,h=t.setCopyId,g=t.setIsDefaultTem,k=t.json;if(a.trim(s)){var b={pageCode:l,templateId:o,name:s,appCode:i,varyId:e},C=void 0;if("apppage"===n)b.templateType="bill",C="/nccloud/platform/template/copyTemplate.do";else if("menuitem"===n){if(!a.trim(d))return;b.templateCode=d,C="/nccloud/platform/template/copyPrintTemplate.do"}a.props.mobileInfoData&&(C="/nccloud/platform/template/copyTemplate.do",b=(0,r.default)({},a.props.mobileInfoData,{name:s}));var E=a;(0,y.DeferFn)((function(){(0,T.default)({url:C,data:b,loading:!0,info:{name:(0,y.langCheck)("10180TM-000012","pages",k),action:(0,y.langCheck)("10180TM-000025","pages",k)},success:function(e){var t=e.data;t.success&&((0,v.default)({status:"success",msg:t.msg}),c([t.data.id]),p("apppage"===n?t.data.data.parentid:t.data.parentid),u(t.data.name),f(t.data.id),h(t.data.id),g("n"),"menuitem"===n&&m(t.data.code),E.props.onCopy(t.data),E.handleCancel())}})}))}},a.handleOk=function(){var e="menuitem"===a.props.def1?"printtemplate":void 0;a.props.showVaryModal(e)},a.handleCancel=function(){a.props.setCopyVisible(!1)},a.state={nameErrorMsg:"",codeErrorMsg:""},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.nameErrorMsg,n=t.codeErrorMsg,r=this.props,l=r.def1,i=r.treeTemPrintData,s=r.templateTitleVal,d=r.templateNameVal,c=r.json;return u.default.createElement(g.default,{mask:!0,wrapClassName:"copyModal",title:(0,y.langCheck)("10180TM-000046","pages",c),visible:this.props.visible,onOk:this.handleOk,okText:(0,y.langCheck)("10180TM-000015","pages",c),cancelText:(0,y.langCheck)("10180TM-000016","pages",c),onCancel:this.handleCancel,maskClosable:!1,fieldid:"copy"},u.default.createElement("div",{className:"copyTemplate",style:"apppage"===l?{padding:"60px 20px"}:{}},"menuitem"==l&&i.length>0&&u.default.createElement("div",{className:"templateCode"},u.default.createElement("label",{htmlFor:""},(0,y.langCheck)("10180TM-000027","pages",c)),u.default.createElement(o.default,{style:{width:"80%"},id:"templateCode",onBlur:this.checkCode,value:s,placeholder:(0,y.langCheck)("10180TM-000028","pages",c),fieldid:"templateCode",onChange:function(t){var a=t.target.value;e.props.setTemplateTitleVal(a)}}),u.default.createElement("p",{className:"areaCode-errorMsg"},n)),u.default.createElement("div",{className:"templateName"},u.default.createElement("label",{htmlFor:""},(0,y.langCheck)("10180TM-000029","pages",c)),u.default.createElement(o.default,{value:d,style:{width:"80%"},id:"templateName",onBlur:this.checkName,placeholder:(0,y.langCheck)("10180TM-000030","pages",c),fieldid:"templateName",onChange:function(t){var a=t.target.value;e.props.setTemplateNameVal(a)}}),u.default.createElement("p",{className:"areaName-errorMsg"},a))))}}]),t}(p.Component))||n;C.propTypes={templatePk:f.default.string.isRequired,pageCode:f.default.string.isRequired,appCode:f.default.string.isRequired,def1:f.default.string.isRequired,templateTitleVal:f.default.string.isRequired,templateNameVal:f.default.string.isRequired,json:f.default.object.isRequired},t.default=(0,m.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData}}),{setSelectedTemKeys:h.setSelectedTemKeys,setParentIdcon:h.setParentIdcon,setTemplateNameVal:h.setTemplateNameVal,setTemplatePk:h.setTemplatePk,setTemplateTitleVal:h.setTemplateTitleVal,setCopyId:h.setCopyId,setIsDefaultTem:h.setIsDefaultTem})(C)},1041:function(e,t,a){var n=a(1042);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},1042:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".copyTemplate{padding:35px 20px}.copyTemplate .ant-input{margin-bottom:20px}.copyTemplate .templateCode,.copyTemplate .templateName{position:relative}.copyTemplate .areaCode-errorMsg,.copyTemplate .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:65px}.copyTemplate .has-error{border-color:#f5222d}",""])},1043:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(2)),o=l(a(169));t.handleDownload=function(e,t,a,l,i,s){var d=""+(window.actionName||"文件导出"),c=e.appcode,p={sys_busiaction:d,sys_appcode:c,sys_ts:(new Date).getTime()};a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a);var u=[{target:l||"_blank",method:"POST",enctype:a,type:"hidden",action:t||""},document.createElement("form")],f=u[0],m=u[1];(0,o.default)(m,f);var h=(0,n.default)({},e,p),g=function(e){if(h[e]instanceof Array)h[e].forEach((function(t){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,m.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],m.appendChild(t)}};for(var y in h)g(y);try{document.body.appendChild(m),m.submit(),document.body.removeChild(m),(0,r.default)({status:"success",msg:i||"导出成功"})}catch(e){(0,r.default)({status:"error",msg:s||"导出失败"})}return!1};var r=l(a(68));function l(e){return e&&e.__esModule?e:{default:e}}},1044:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(109)),o=h(a(3)),r=h(a(21)),l=h(a(5)),i=h(a(7)),s=h(a(4)),d=h(a(6));a(130);var c=a(1),p=h(c),u=h(a(364)),f=a(19),m=a(365);function h(e){return e&&e.__esModule?e:{default:e}}a(1022);var g=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.hideModal=function(){a.props.setXmlImportVisible()},a.ensureModal=function(){a.state.templatecode&&a.state.templatename&&(a.hideModal(),a.props.ensureModal(a.state))},a.state={templatecode:"",templatename:"",json:{}},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,m.getMulti)({moduleId:"10180TM",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"changeVal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"templatename",t=arguments[1];this.setState((0,o.default)({},e,t.target.value))}},{key:"render",value:function(){var e=this.props.xmlImportVisible,t=this.state.json;return p.default.createElement("div",null,p.default.createElement(u.default,{customHeader:(0,f.langCheck)("10180TM-000080","pages",t),okText:(0,f.langCheck)("10180TM-000015","pages",t),cancelText:(0,f.langCheck)("10180TM-000016","pages",t),visible:e,onCancel:this.hideModal,onOk:this.ensureModal,maskClosable:!1,size:"sm",className:"xml-import-modal"},p.default.createElement("div",{className:"xml-import"},p.default.createElement("p",{className:"xml-form-label inline"},(0,f.langCheck)("10180TM-000069","pages",t),"："),p.default.createElement("div",{className:"xml-form-input inline"},p.default.createElement(n.default,{onChange:this.changeVal.bind(this,"templatename")}))),p.default.createElement("div",{className:"xml-import"},p.default.createElement("p",{className:"xml-form-label inline"},(0,f.langCheck)("10180TM-000070","pages",t),"："),p.default.createElement("div",{className:"xml-form-input inline"},p.default.createElement(n.default,{onChange:this.changeVal.bind(this,"templatecode")})))))}}]),t}(c.Component);t.default=g},1045:function(e,t,a){var n=a(236);(e.exports=a(12)(!1)).push([e.i,"body{background-color:#f0f2f5}*{box-sizing:border-box}.nc-workbench-templateSetting .nc-workbench-ownpage-left{padding-top:60px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree{padding:10px 20px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input{position:absolute;top:0;left:0;padding:20px 20px 10px;width:100%;display:flex;z-index:1}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input .sider-search-color .ant-input-search-icon{color:#e14c46;vertical-align:middle}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree-wrap{height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree{height:calc(100% - 40px);overflow-y:auto;margin-left:20px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .template-title{height:30px;font-size:15px;line-height:30px;padding-left:20px;margin-bottom:10px;background:#f4f4f4}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip{background:url("+n(a(1025))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{background:url("+n(a(1026))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip{background:url("+n(a(1027))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData{width:100%;height:100%;align-items:center;justify-content:center;display:flex}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{height:120px;line-height:280px;font-size:14px;color:#888;background-size:contain;text-align:center}.nc-workbench-templateSetting .ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#e14c46}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item:focus{border:none}.ant-dropdown ul.ant-dropdown-menu li.u-dropdown-menu-item-disabled .dropdown-item{color:#ccc}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item:hover{background-color:#ebecf0}.nc-dropdown.u-dropdown .u-dropdown-menu{padding:4px 0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item{height:32px;line-height:32px;padding:0 10px;margin:0;color:#555;text-align:left}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item:focus{border:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled{color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled:hover{background-color:transparent;color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-selected{background-color:transparent}.copy-others-moudle .copy-others-modal-top{margin:4px 15px;position:relative}.copy-others-moudle .copy-others-modal-top .copy-others-modal-header{width:65px;height:21px;display:inline-block;font-size:13px;font-family:MicrosoftYaHei;color:#555;line-height:21px}.copy-others-moudle .copy-others-modal-top .copy-others-input{margin-left:8px;height:30px;font-size:13px;font-family:MicrosoftYaHei;color:#111;line-height:30px}.copy-others-moudle .copy-others-modal-top .areaCode-errorMsg,.copy-others-moudle .copy-others-modal-top .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:72px}.copy-others-moudle .copy-others-modal-bottom{overflow:hidden;margin-top:20px;display:flex}.copy-others-moudle .copy-others-modal-bottom .left{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .left .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .left .search{margin:10px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree{overflow:auto;height:275px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree .ant-tree{overflow:none}.copy-others-moudle .copy-others-modal-bottom .middle{display:flex;justify-content:center;align-items:center;margin:0 auto;width:10%}.copy-others-moudle .copy-others-modal-bottom .right{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .right .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .right .rightTree{overflow:auto;height:325px}.copy-others-moudle .copy-others-modal-bottom .right .rightTree .ant-tree{overflow:none}.tree-transfer-buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px}.tree-transfer-buttons .u-button{padding:0;width:32px;height:32px;min-width:32px;border-radius:3px}.tree-transfer-buttons .u-button:after{display:none!important}.tree-transfer-buttons .iconfont{font-size:12px}.tree-transfer-buttons .transfer-left-double,.tree-transfer-buttons .transfer-right-double{position:relative}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{position:absolute}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-1{left:6px}.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{right:6px}.margin-top-8{margin-top:8px}.margin-top-25{margin-top:25px}.ant-modal-body{padding:8px}.xml-import-modal .xml-import{margin-bottom:10px}.xml-import-modal .inline{display:inline-block}.xml-import-modal .xml-form-label{margin-right:5px}",""])},1065:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=S(a(922)),o=S(a(2)),r=S(a(17)),l=S(a(77)),i=S(a(110)),s=S(a(134)),d=S(a(135)),c=S(a(21)),p=S(a(5)),u=S(a(7)),f=S(a(4)),m=S(a(6)),h=S(a(109));a(921),a(130);var g=a(1),y=S(g),T=S(a(0)),v=a(37),k=a(980),b=a(972),C=a(19),E=S(a(1038)),w=S(a(26)),x=S(a(35)),D=S(a(1039));function S(e){return e&&e.__esModule?e:{default:e}}var M=w.default.base.NCDiv,N=h.default.Search,P=function(e){function t(e){var a=this;(0,p.default)(this,t);var n,o=(0,f.default)(this,(t.__proto__||(0,c.default)(t)).call(this,e));return o.onExpand=function(e){o.props.setExpandedKeys(e),o.setState({autoExpandParent:!1})},o.onChange=function(e){var t=e.target.value;t?o.props.setSearchValue(t):o.handleSearchDel()},o.handleTreeSearch=function(e){o.props.handleSearch(e,o.props.handleExpanded,(function(){o.props.setAsyncExpandedKeys(["00"]),o.handleToggleTree(""!==e)}))},o.onSelectQuery=(n=(0,d.default)(s.default.mark((function e(t,n){var r;return s.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.props.selectedKeys,!(t.length>0)){e.next=22;break}return e.next=4,o.props.setSelectedKeys(t);case 4:if("4"!==n.selectedNodes[0].props.refData.flag){e.next=13;break}return e.next=7,o.props.setDef1("apppage");case 7:return e.next=9,o.props.setAppCode(n.selectedNodes[0].props.refData.parentcode);case 9:return e.next=11,o.props.setPageCode(n.selectedNodes[0].props.refData.systypecode);case 11:e.next=19;break;case 13:return e.next=15,o.props.setDef1(n.selectedNodes[0].props.refData.def1);case 15:return e.next=17,o.props.setAppCode(n.selectedNodes[0].props.refData.appCode);case 17:return e.next=19,o.props.setPageCode(n.selectedNodes[0].props.refData.code);case 19:o.props.onSelect(),e.next=23;break;case 22:r&&o.props.onSelect();case 23:case"end":return e.stop()}}),e,a)}))),function(e,t){return n.apply(this,arguments)}),o.hanldeDoubleClick=function(e,t){var a,n=[];a=t.props.refData.pk,o.props.isShowSearchTree?(n=o.props.expandedKeys.concat([a]),o.props.setExpandedKeys(n)):(n=o.props.asyncExpandKeys.concat([a]),o.props.setAsyncExpandedKeys(n))},o.handleSearchDel=function(){o.props.reqTreeData(o.props.setInforFun);var e=["00"];o.props.setExpandedKeys(e),o.props.setAsyncExpandedKeys(e),o.props.setSearchValue(""),o.handleToggleTree(!1)},o.handleLoadTreeNodeData=function(e){return new i.default((function(t){(0,x.default)({url:"/nccloud/platform/appregister/querymenuitemstree.do",data:{code:e.code},info:{name:(0,C.langCheck)("10180TM-000012","pages",o.props.json),action:(0,C.langCheck)("10180TM-000076","pages",o.props.json)},success:function(e){var a=e.data;a.success&&t(a.data)}})}))},o.handleAsyncTreeExpand=function(e){o.props.setAsyncExpandedKeys(e)},o.handleToggleTree=function(e){o.isMobile||o.props.setSearchTreeShow(e)},o.isMobile="mobile"===e.pageType,o.state={autoExpandParent:!1},o}return(0,m.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.isMobile&&this.props.setSearchTreeShow(!0)}},{key:"render",value:function(){var e=this.state.autoExpandParent,t=this.props,a=t.expandedKeys,i=t.selectedKeys,s=t.searchValue,d=t.json,c=t.isShowSearchTree,p=this.isMobile?"moduleid":"code",u=this.isMobile?"parentcode":"pid",f=[{code:"00",name:(0,C.langCheck)("10180TM-000000","pages",d),pk:"00"}],m=JSON.parse((0,l.default)(f));m[0].children=(0,b.createTree)(this.props.treeData,p,u);var h={selectedKeys:i,onSelect:this.onSelectQuery,onDoubleClick:this.hanldeDoubleClick};return y.default.createElement(M,{className:"templateSetting-searchTree workbench-scroll",fieldid:"templateSetting",areaCode:M.config.TREE},y.default.createElement("div",{className:"fixed-search-input"},y.default.createElement(N,{className:s&&"sider-search-color",placeholder:(0,C.langCheck)("10180TM-000001","pages",d),onChange:this.onChange,onSearch:this.handleTreeSearch,value:s,suffix:s.length>0?y.default.createElement("i",{className:"iconfont icon-qingkong",onClick:this.handleSearchDel}):"",fieldid:"search"})),y.default.createElement(M,{fieldid:"templateSetting",areaCode:M.config.TreeCom},c?y.default.createElement(n.default,(0,o.default)({showLine:!0,showIcon:!0,autoExpandParent:e,expandedKeys:a,onExpand:this.onExpand},h),(0,E.default)(m,s,u)):y.default.createElement(D.default,(0,o.default)({rootNode:f,treeData:this.props.treeData,treeNodeItem:function(e){var t=e.code,a=e.name;return{key:e.pk,title:"00"===t?""+a:t+" "+a,className:"00"===t?"fieldid_"+a+"_node":"fieldid_"+t+"_node",isLeaf:!!e.isleaf}},expandedKeys:[].concat((0,r.default)(this.props.asyncExpandKeys)),onLoadData:this.handleLoadTreeNodeData,onExpand:this.handleAsyncTreeExpand},h))))}}]),t}(g.Component);P.propTypes={treeData:T.default.array.isRequired,setExpandedKeys:T.default.func.isRequired,setSelectedKeys:T.default.func.isRequired,setDef1:T.default.func.isRequired,setTreeTemPrintData:T.default.func.isRequired,setSearchValue:T.default.func.isRequired,setPageCode:T.default.func.isRequired,setAppCode:T.default.func.isRequired,selectedKeys:T.default.array.isRequired,expandedKeys:T.default.array.isRequired,searchValue:T.default.string.isRequired,pageCode:T.default.string.isRequired,json:T.default.object.isRequired},t.default=(0,v.connect)((function(e){return{treeData:e.TemplateSettingData.treeData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,searchValue:e.TemplateSettingData.searchValue,json:e.TemplateSettingData.json,asyncExpandKeys:e.TemplateSettingData.asyncExpandKeys,isShowSearchTree:e.TemplateSettingData.isShowSearchTree}}),{setExpandedKeys:k.setExpandedKeys,setSelectedKeys:k.setSelectedKeys,setDef1:k.setDef1,setSearchValue:k.setSearchValue,setPageCode:k.setPageCode,setAppCode:k.setAppCode,setAsyncExpandedKeys:k.setAsyncExpandedKeys,setSearchTreeShow:k.setSearchTreeShow})(P)},1066:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(a(21)),o=u(a(5)),r=u(a(7)),l=u(a(4)),i=u(a(6)),s=a(1),d=u(s),c=a(37),p=u(a(1067));function u(e){return e&&e.__esModule?e:{default:e}}var f=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props.dataSource;return e.length>0?d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement("p",{className:"template-title"},this.props.langDataTitle),d.default.createElement(p.default,{dataSource:e,onSelectQuery:this.props.onSelectQuery})):d.default.createElement("div",{className:"print"===this.props.type?"noPrintData":"noPageData"},d.default.createElement("p",{className:"noDataTip"},this.props.langNoDataTitle))}}]),t}(s.Component);f.propTypes={},t.default=(0,c.connect)((function(e){return{}}),{})(f)},1067:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(922)),o=h(a(21)),r=h(a(5)),l=h(a(7)),i=h(a(4)),s=h(a(6));a(921);var d=a(1),c=h(d),p=h(a(0)),u=a(37),f=a(980),m=h(a(1038));function h(e){return e&&e.__esModule?e:{default:e}}var g=h(a(26)).default.base.NCDiv,y=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.hanldeDoubleClick=function(e){var t=e.props.refData.pk,n=a.props.expandedTemKeys.concat([t]);a.props.setExpandedTemKeys(n)},a.onExpand=function(e){a.props.setExpandedTemKeys(e),a.setState({autoExpandTemParent:!1})},a.onSelect=function(e,t){a.props.onSelectQuery(e,t)},a.state={autoExpandTemParent:!1},a}return(0,s.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.autoExpandTemParent,a=this.props,o=a.dataSource,r=a.expandedTemKeys,l=a.selectedTemKeys;return c.default.createElement(g,{className:"templateTree",fieldid:"template",areaCode:g.config.TreeCom},o.length>0&&c.default.createElement(n.default,{showLine:!0,showIcon:!0,onExpand:function(t,a){e.onExpand(t,a)},expandedKeys:r,onSelect:function(t,a){e.onSelect(t,a)},autoExpandParent:t,selectedKeys:l,onDoubleClick:function(t,a){e.hanldeDoubleClick(a)}},(0,m.default)(o,"")))}}]),t}(d.Component);y.propTypes={setSelectedTemKeys:p.default.func.isRequired,setExpandedTemKeys:p.default.func.isRequired,setTemplateNameVal:p.default.func.isRequired,selectedTemKeys:p.default.array.isRequired,expandedTemKeys:p.default.array.isRequired},t.default=(0,u.connect)((function(e){return{selectedTemKeys:e.TemplateSettingData.selectedTemKeys,expandedTemKeys:e.TemplateSettingData.expandedTemKeys}}),{setSelectedTemKeys:f.setSelectedTemKeys,setExpandedTemKeys:f.setExpandedTemKeys})(y)},1068:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=w(a(2)),r=w(a(171)),l=w(a(112)),i=w(a(17)),s=w(a(21)),d=w(a(5)),c=w(a(7)),p=w(a(4)),u=w(a(6)),f=w(a(109));a(130);var m=a(1),h=w(m),g=w(a(0)),y=a(37),T=a(19),v=w(a(35)),k=w(a(68)),b=w(a(364)),C=w(a(26)),E=w(a(975));function w(e){return e&&e.__esModule?e:{default:e}}var x=C.default.base,D=x.NCDiv,S=x.NCButton,M=x.NCTree,N=M.NCTreeNode,P=f.default.Search,R=(0,E.default)((function(e,t){t.copyOthers(e)}))(n=function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].pk==e[o].pk&&++a;t.push(e[a])}return t},a.checkName=function(){var e=a.props.json,t=a.state.templateName;if(!a.trim(t))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,T.langCheck)("10180TM-000023","pages",e)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.isPartSelectedLeft=function(){var e=a.state,t=e.checkedKeys,n=e.requestLeftTreeData,o=e.treeData,s=e.rightTreeData,d=[],c=[],p=[],u=[];console.log("checkedKeys----",t);var f=[].concat((0,i.default)(t)),m=(0,T.deepClone)(o),h=(0,T.deepClone)(n);t.length>0&&(t.map((function(e){m.map((function(t){t.children.map((function(a){e==a.pk&&f.push(t.pk)}))}))})),(f=(0,l.default)(new r.default(f))).forEach((function(e){h.map((function(t){e==t.pk&&d.push(t)}))})),console.log("checkedArr----",d),d.forEach((function(e){e.isleaf?(e.children=[],u.push(e)):(e.children=[],p.push(e))})),p.forEach((function(e){u.map((function(t){e.code==t.pid&&e.children.push(t)}))})),c=a.arrayUnique(s.concat(p)),t=a.removeTreeRootPk(o,p,t),a.setState({rightTreeData:c,rightCheckedKeys:[],checkedKeys:t}))},a.isPartSelectedRight=function(){var e=a.state,t=e.rightCheckedKeys,n=e.rightTreeData,o=(0,T.deepClone)(n);t.length>0&&(t.map((function(e){o.map((function(t,a){e==t.pk?o.splice(a,1):t.children.map((function(a,n){e==a.pk&&t.children.splice(n,1)}))}))})),console.log("partRightTreeArr---",o),a.setState({rightTreeData:o}))},a.isAllSelectedLeft=function(){console.log("this.state.saveLeafArr",a.state.saveLeafArr),a.setState({rightTreeData:a.state.treeData,rightCheckedKeys:[]})},a.isAllSelectedRight=function(){a.setState({rightTreeData:[],rightCheckedKeys:[]})},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onCheck=function(e){a.setState({checkedKeys:e})},a.onRightCheck=function(e){a.setState({rightCheckedKeys:e})},a.onSelect=function(e){a.setState({selectedKeys:e})},a.removeTreeRootPk=function(e,t,a){var n=[].concat((0,i.default)(a)),o=t[0].pk;return t[0].children.length!==e[0].children.length&&(n=n.filter((function(e){return e!==o}))),n},a.renderTreeNodes=function(e){return e.map((function(e){var t=a.state.searchValue,n=e.name,r=void 0;if(""!=t){var l=n.indexOf(t),i=n.substr(0,l),s=n.substr(l+t.length);r=l>-1?h.default.createElement("span",null,i,h.default.createElement("span",{style:{color:"#f50"}},t),s):h.default.createElement("span",null,h.default.createElement("span",null," ",n," "))}else r=n;var d="fieldid_"+n+"_node";return e.children?h.default.createElement(N,{title:r,key:e.pk,dataRef:e,className:d},a.renderTreeNodes(e.children)):h.default.createElement(N,(0,o.default)({},e,{className:d}))}))},a.rightRenderTreeNodes=function(e){return e.map((function(e){var t="fieldid_"+e.name+"_node";return e.children?h.default.createElement(N,{title:e.name,key:e.pk,dataRef:e,className:t},a.renderTreeNodes(e.children)):h.default.createElement(N,e)}))},a.handleOk=function(){a.props.showVaryModal()},a.copyOthers=function(e){var t=a.props,n=t.templatePk,o=t.json,r=a.state,l=r.templateName,i=r.rightTreeData;if(""!=l){var s=(0,T.deepClone)(i);s.map((function(e){e.children.map((function(e){e.pageCode=e.code,delete e.appId,delete e.appCode,delete e.pk,delete e.name,delete e.pid,delete e.isleaf,delete e.children,delete e.code})),e.pageCodes=e.children,delete e.appId,delete e.pk,delete e.code,delete e.name,delete e.pid,delete e.isleaf,delete e.children}));var d={templateId:n,templateName:l,templateType:"bill",appAndPageCodes:s,varyId:e},c=a;(0,T.DeferFn)((function(){(0,v.default)({url:"/nccloud/platform/template/copyTemplateToOtherAppsAction.do",data:d,loading:!0,info:{name:(0,T.langCheck)("10180TM-000012","pages",o),action:(0,T.langCheck)("10180TM-000025","pages",o)},success:function(e){var t=e.data;t.success&&((0,k.default)({status:"success",msg:t.data}),c.props.reqTreeTemData("copyOthersApp"),c.handleCancel())}})}))}},a.handleCancel=function(){a.props.setCopyOthersVisible(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.searchOnChange=function(e){var t=e.target.value;a.setState({searchValue:t});var n=a.state,o=n.searchTreeDataSave,r=n.requestLeftTreeData;if(""!=t){var l=(0,T.deepClone)(r).filter((function(e){return e.isleaf?e.name.indexOf(t)>-1?e:void 0:e})),i=[],s=[];l.map((function(e){e.children=[],e.isleaf?s.push(e):i.push(e)})),i.forEach((function(e){s.map((function(t){e.code==t.pid&&e.children.push(t)}))}));var d=i.filter((function(e){if(e.children.length>0)return e}));console.log("newTree=------------",d);var c=(0,T.deepClone)(d);a.setState({treeData:c})}else a.setState({treeData:o})},a.state={nameErrorMsg:"",templateName:a.props.templateNameVal,treeData:[],searchTreeDataSave:[],selectedKeys:[],checkedKeys:[],expandedKeys:[],autoExpandParent:!1,saveLeafArr:[],generateRightTreeData:[],rightTreeData:[],rightCheckedKeys:[],requestLeftTreeData:[],searchValue:""},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.appCode,n=t.json;(0,v.default)({data:{appCode:a},url:"/nccloud/platform/template/queryAppAndPagesAction.do",loading:!0,info:{name:(0,T.langCheck)("10180TM-000012","pages",n),action:(0,T.langCheck)("10180TM-000055","pages",n)},success:function(t){var a=t.data;if(a.success){var n=[],o=[],r=(0,T.deepClone)(a.data);a.data.map((function(e){e.isleaf?(e.children=[],o.push(e)):(e.children=[],n.push(e))})),console.log("isAllRootNode",n),console.log("isAllLeafNode",o),n.forEach((function(e){o.map((function(t){e.code==t.pid&&e.children.push(t)}))})),console.log("isAllRootNode====",n),console.log("isAllLeafNode====",o),e.setState({treeData:n,searchTreeDataSave:n,saveLeafArr:o,requestLeftTreeData:r})}}})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.templateNameVal,a=e.json;console.log("templateNameVal",t);var n=this.state,o=n.templateName,r=n.treeData,l=n.autoExpandParent,i=n.rightTreeData,s=n.nameErrorMsg;return h.default.createElement(b.default,{mask:!0,title:(0,T.langCheck)("10180TM-000055","pages",a),visible:this.props.copyOthersModalVisible,onOk:this.handleOk,okText:(0,T.langCheck)("10180TM-000015","pages",a),cancelText:(0,T.langCheck)("10180TM-000016","pages",a),onCancel:this.handleCancel,maskClosable:!1,width:720,className:"copy-others-moudle",fieldid:"copyOther"},h.default.createElement("div",{className:"copy-others-modal-top"},h.default.createElement("div",{className:"copy-others-modal-header"},(0,T.langCheck)("10180TM-000057","pages",a)),h.default.createElement(f.default,{className:"copy-others-input",style:{width:"45%"},placeholder:(0,T.langCheck)("10180TM-000030","pages",a),defaultValue:t,onChange:this.onChangeTemplateName,id:"templateName",fieldid:"templateName",value:o,onBlur:this.checkName}),h.default.createElement("p",{className:"areaName-errorMsg"},s)),h.default.createElement(D,{className:"copy-others-modal-bottom",fieldid:"transfer",areaCode:D.config.Area},h.default.createElement(D,{className:"left",fieldid:"left",areaCode:D.config.TREE},h.default.createElement("div",{className:"title"},(0,T.langCheck)("10180TM-000058","pages",a)),h.default.createElement(P,{className:"search",fieldid:"search",onChange:this.searchOnChange}),h.default.createElement(D,{className:"leftTree",fieldid:"left",areaCode:D.config.TreeCom},h.default.createElement(M,{checkable:!0,checkStrictly:!1,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,onExpand:this.onExpand,expandedKeys:this.state.expandedKeys,onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck},this.renderTreeNodes(r)))),h.default.createElement("div",{className:"middle"},h.default.createElement("div",{className:"tree-transfer-buttons"},h.default.createElement(S,{className:"transfer-right ",fieldid:"toRight",onClick:this.isPartSelectedLeft},h.default.createElement("i",{className:"iconfont icon-jiantouyou"})),h.default.createElement(S,{className:"transfer-right-double margin-top-8",fieldid:"toRightAll",onClick:this.isAllSelectedLeft},h.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouyou"}),h.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouyou"})),h.default.createElement(S,{className:"transfer-left-double margin-top-25",fieldid:"toLeft",onClick:this.isAllSelectedRight},h.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouzuo"}),h.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouzuo"})),h.default.createElement(S,{className:"transfer-left margin-top-8",fieldid:"toRightAll",onClick:this.isPartSelectedRight},h.default.createElement("i",{className:"iconfont icon-jiantouzuo"})))),h.default.createElement("div",{className:"right"},h.default.createElement("div",{className:"title"},(0,T.langCheck)("10180TM-000059","pages",a)),h.default.createElement(D,{className:"rightTree",fieldid:"right",areaCode:D.config.TreeCom},h.default.createElement(M,{checkable:!0,checkStrictly:!1,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,checkedKeys:this.state.rightCheckedKeys,onCheck:this.onRightCheck},this.rightRenderTreeNodes(i))))))}}]),t}(m.Component))||n;R.propTypes={templatePk:g.default.string.isRequired,pageCode:g.default.string.isRequired,appCode:g.default.string.isRequired,def1:g.default.string.isRequired,templateTitleVal:g.default.string.isRequired,templateNameVal:g.default.string.isRequired,json:g.default.object.isRequired},t.default=(0,y.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}}),{})(R)},1069:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=k(a(109)),r=k(a(21)),l=k(a(5)),i=k(a(7)),s=k(a(4)),d=k(a(6));a(130);var c=a(1),p=k(c),u=k(a(0)),f=a(37),m=k(a(364)),h=a(19),g=k(a(35)),y=k(a(68)),T=k(a(975)),v=a(980);function k(e){return e&&e.__esModule?e:{default:e}}var b=(0,T.default)((function(e,t){t.renameTemplate(e)}))(n=function(e){function t(e){(0,l.default)(this,t);var a=(0,s.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.checkName=function(){var e=a.props.json,t=a.state.templateName;if(!a.trim(t))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,h.langCheck)("10180TM-000023","pages",e)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e="menuitem"===a.props.def1?"printtemplate":void 0;a.props.showVaryModal(e)},a.renameTemplate=function(e){var t=a.props,n=t.templatePk,o=t.templateNameVal,r=t.templateTitleVal,l=t.json,i=t.saveLeftArrTS,s=t.def1,d=a.state.templateName;if(a.trim(o)&&""!=d){a.props.setTemplateNameVal(d);var c="";1==i.length?i.map((function(e){c=e.ts})):i.length>1&&i.map((function(e){n==e.templateId&&(c=e.ts)})),document.getElementById("templateName").classList.remove("has-error");var p=void 0,u=void 0;"menuitem"===s?(p="/nccloud/platform/templet/templaterename.do",u={templateid:n,templatecode:r,templatename:d,ts:c,varyId:e}):(p="/nccloud/platform/template/resetTemplateNameAction.do",u={templateId:n,templateName:d,ts:c,varyId:e});var f=a;(0,h.DeferFn)((function(){(0,g.default)({url:p,data:u,loading:!0,info:{name:(0,h.langCheck)("10180TM-000012","pages",l),action:(0,h.langCheck)("10180TM-000025","pages",l)},success:function(e){var t=e.data;t.success&&((0,y.default)({status:"success",msg:t.msg}),f.props.reqTreeTemData("rename"),f.handleCancel())}})}))}},a.handleCancel=function(){a.props.setReNameModal(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.state={templateName:a.props.templateNameVal,nameErrorMsg:""},a}return(0,d.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.reNameModalVisible,n=e.templateNameVal,r=this.state,l=r.templateName,i=r.nameErrorMsg;return console.log("templateName",l),p.default.createElement(m.default,{mask:!0,title:(0,h.langCheck)("10180TM-000056","pages",t),visible:a,height:260,onOk:this.handleOk,okText:(0,h.langCheck)("10180TM-000015","pages",t),cancelText:(0,h.langCheck)("10180TM-000016","pages",t),onCancel:this.handleCancel,maskClosable:!1,fieldid:"rename"},p.default.createElement("div",{className:"copyTemplate",style:{padding:"60px 20px"}},p.default.createElement("div",{className:"templateName"},p.default.createElement("label",{htmlFor:""},(0,h.langCheck)("10180TM-000029","pages",t)),p.default.createElement(o.default,{value:l,defaultValue:n,id:"templateName",style:{width:"80%"},onBlur:this.checkName,placeholder:(0,h.langCheck)("10180TM-000030","pages",t),fieldid:"templateName",onChange:this.onChangeTemplateName}),p.default.createElement("p",{className:"areaName-errorMsg"},i))))}}]),t}(c.Component))||n;b.propTypes={templatePk:u.default.string.isRequired,pageCode:u.default.string.isRequired,appCode:u.default.string.isRequired,def1:u.default.string.isRequired,templateTitleVal:u.default.string.isRequired,templateNameVal:u.default.string.isRequired,json:u.default.object.isRequired},t.default=(0,f.connect)((function(e){return{templatePk:e.TemplateSettingData.templatePk,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,def1:e.TemplateSettingData.def1,templateTitleVal:e.TemplateSettingData.templateTitleVal,templateNameVal:e.TemplateSettingData.templateNameVal,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,json:e.TemplateSettingData.json}}),{setTemplateNameVal:v.setTemplateNameVal})(b)},1070:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(21)),o=h(a(5)),r=h(a(7)),l=h(a(4)),i=h(a(6)),s=a(1),d=h(s),c=h(a(0)),p=a(37),u=a(19),f=h(a(364)),m=h(a(35));function h(e){return e&&e.__esModule?e:{default:e}}var g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.hideModal=function(){a.props.hideModal(!1)},a.printModalAjax=function(e){var t=a.props.json,n={};n.templateId=e;(0,m.default)({url:"/nccloud/platform/template/previewPrintTemplate.do",data:n,info:{name:(0,u.langCheck)("10180TM-000012","pages",t),action:(0,u.langCheck)("10180TM-000025","pages",t)},success:function(e){var t=e.data;t.success&&(document.getElementsByClassName("printContent")[0].innerHTML=t.data)}})},a.state={},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){this.printModalAjax(this.props.templatePk)}},{key:"render",value:function(){var e=this.props,t=e.previewPrintVisible,a=e.json;return d.default.createElement("div",{className:"templateTree-wrap"},d.default.createElement(f.default,{customHeader:(0,u.langCheck)("10180TM-000050","pages",a),okText:(0,u.langCheck)("10180TM-000015","pages",a),cancelText:(0,u.langCheck)("10180TM-000016","pages",a),visible:t,onCancel:this.hideModal,maskClosable:!1,footer:null,className:"viewPageTem"},d.default.createElement("div",{className:"printContent"})))}}]),t}(s.Component);g.propTypes={json:c.default.object.isRequired,templatePk:c.default.string.isRequired},t.default=(0,p.connect)((function(e){return{json:e.TemplateSettingData.json,templatePk:e.TemplateSettingData.templatePk}}),{})(g)},935:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=q(a(17)),r=q(a(77)),l=q(a(21)),i=q(a(5)),s=q(a(7)),d=q(a(4)),c=q(a(6)),p=a(1),u=q(p),f=q(a(0)),m=a(37),h=a(980),g=a(969),y=q(a(35)),T=q(a(68)),v=a(133),k=q(a(984)),b=q(a(1034)),C=q(a(1065)),E=q(a(1066)),w=q(a(1040)),x=q(a(1068)),D=q(a(1069)),S=q(a(1070)),M=a(113),N=a(19),P=a(1021),R=q(a(976)),A=a(365),_=q(a(979)),K=q(a(26)),I=a(1043),j=q(a(1044)),V=q(a(975)),O=a(1023);function q(e){return e&&e.__esModule?e:{default:e}}a(1022);var L=K.default.base,B=L.NCDiv,U=L.NCButton,F=L.NCUpload,z=L.NCMenu,H=L.NCDropdown,G=K.default.ajax,W=K.default.formDownload,X=K.default.pageTo,Y=K.default.metaCache,J=Y.getMetaCache,Z=Y.removeMetaCache,Q=(0,V.default)((function(e,t,a){switch(a){case"xmlImport":t.xmlImportClick(),t.setState({xmlImportVaryId:e});break;case"delete":t.deleteTemplate(e)}}))(n=function(e){function t(e){(0,i.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,l.default)(t)).call(this,e));return a.setCopyVisible=function(e){a.setState({visible:e})},a.setCopyOthersVisible=function(e){a.setState({copyOthersModalVisible:e})},a.setReNameModal=function(e){a.setState({reNameModal:e})},a.menuFun=function(){var e=a.props,t=e.json,n=!1;return"y"===e.isDefaultTem&&(n=!0),u.default.createElement(z,{onClick:a.settingClick.bind(a)},u.default.createElement(z.Item,{key:"setDefault",disabled:n,fieldid:"setDefault"},u.default.createElement("div",{className:"dropdown-item"},(0,N.langCheck)("10180TM-000033","pages",t))),u.default.createElement(z.NCDivider,null),u.default.createElement(z.Item,{key:"cancelDefault",disabled:!n,fieldid:"cancelDefault"},u.default.createElement("div",{className:"dropdown-item"},(0,N.langCheck)("10180TM-000034","pages",t))))},a.xmlFun=function(){var e=a.props.json;return u.default.createElement(z,{onClick:a.xmlClick.bind(a)},u.default.createElement(z.Item,{key:"xmlImport",fieldid:"xmlImport"},u.default.createElement("div",{className:"dropdown-item"},(0,N.langCheck)("10180TM-000067","pages",e))),u.default.createElement(z.NCDivider,null),u.default.createElement(z.Item,{key:"xmlExport",fieldid:"xmlExport"},u.default.createElement("div",{className:"dropdown-item"},(0,N.langCheck)("10180TM-000068","pages",e))))},a.currentImportFun=function(){var e=a.props,t=e.json,n=e.appCode,o=e.pageCode;return u.default.createElement(z,{onClick:a.currentExportClick},u.default.createElement(z.Item,{key:"currentImport",fieldid:"currentImport"},u.default.createElement(F,{showUploadList:!1,accept:"application/json",action:"/nccloud/platform/templet/templetimportcur.do",headers:{authorization:"authorization-text"},data:{appcode:n,pagecode:o},beforeUpload:a.beforeUpload,onChange:a.ncUploadChange},u.default.createElement("div",{class:"dropdown-item"},(0,N.langCheck)("10180TM-000078","pages",t)))),u.default.createElement(z.NCDivider,null),u.default.createElement(z.Item,{key:"currentExport",fieldid:"currentExport"},u.default.createElement("div",{className:"dropdown-item"},(0,N.langCheck)("10180TM-000079","pages",t))))},a.settingClick=function(e){var t=a.props,n=t.templatePk,o=t.pageCode,r=t.appCode,l=t.json,i={templateId:n,pageCode:o,appCode:r},s=e.key;if(n){var d=void 0;switch(s){case"setDefault":d="/nccloud/platform/template/setDefaultTemplate.do",a.setDefaultFun(d,i,(0,N.langCheck)("10180TM-000033","pages",l));break;case"cancelDefault":d="/nccloud/platform/template/cancelDefaultTemplate.do",a.setDefaultFun(d,i,(0,N.langCheck)("10180TM-000034","pages",l))}}else(0,T.default)({status:"warning",msg:(0,N.langCheck)("10180TM-000035","pages",l)})},a.xmlClick=function(e){var t=e.key,n=a.props,o=n.templatePk,r=n.appCode,l=n.json;if(o)switch(t){case"xmlImport":a.props.showVaryModal("printtemplate","xmlImport");break;case"xmlExport":W({params:{appcode:r,templateId:o},url:"/nccloud/riart/print/templateexport.do",enctype:2})}else(0,T.default)({status:"warning",msg:(0,N.langCheck)("10180TM-000035","pages",l)})},a.xmlImportClick=function(){a.xmlImport.click();var e=a,t=a.props.json,n=void 0===t?{}:t;a.xmlImport.onchange=function(t){var a=t.target.files[0],o=new FileReader;a&&"text/xml"===a.type?(a&&o.readAsDataURL(a),o.onerror=function(){e.xmlImport.value="",(0,T.default)({status:"danger",msg:(0,N.langCheck)("10180TM-000073","pages",n)})},o.onload=function(){e.fr=o,e.file=a,e.xmlImport.value="",e.setXmlImportVisible()}):(e.xmlImport.value="",(0,T.default)({status:"warning",msg:(0,N.langCheck)("10180TM-000071","pages",n)}))}},a.currentExportClick=function(e){var t=e.key,n=a.props,o=n.templatePk,r=n.json;o?"currentExport"===t&&W({params:{templateid:o},url:"/nccloud/platform/templet/templetexportcur.do",enctype:1}):(0,T.default)({status:"warning",msg:(0,N.langCheck)("10180TM-000035","pages",r)})},a.handleClick=function(e){var t=a.props,n=t.def1,o=t.templatePk,r=t.appCode,l=t.json,i=t.pageCode;if(o)switch(e){case"copy":a.setState({visible:!0});break;case"edit":"menuitem"===n?(0,N.ctmsCheckClickCanUsed)("printtemplate").then((function(e){e&&a.openPrintTemplate()})):(0,M.openPage)("ZoneSetting",!1,{templetid:o,status:"templateSetting",appcode:r,pcode:i,templettype:a.props.pageType});break;case"delete":(0,v.ControlTip)({status:"warning",title:(0,N.langCheck)("10180TM-000036","pages",l),msg:(0,N.langCheck)("10180TM-000037","pages",l),fieldid:"delete",onOk:function(){var e="menuitem"===n?"printtemplate":void 0;a.props.showVaryModal(e,"delete")}});break;case"assign":a.setState({alloVisible:!0});break;case"browse":"menuitem"===n?a.showModal():a.setState({batchSettingModalVisibel:!0});break;case"copyOthersApp":a.setState({copyOthersModalVisible:!0});break;case"rename":a.setState({reNameModal:!0});break;case"export":var s={pagecode:i,appcode:r,pk_org:null};(0,I.handleDownload)(s,"/nccloud/platform/appregister/templetexport.do",1,"_blank",(0,N.langCheck)("10180TM-000062","pages",l),(0,N.langCheck)("10180TM-000063","pages",l));break;case"attachUploader":a.toggleAttachUploader()}else(0,T.default)({status:"warning",msg:(0,N.langCheck)("10180TM-000035","pages",l)})},a.openPrintTemplate=function(){var e=a.props,t=e.templatePk,n=e.appCode;X.specialLinkTo("/uap/dc/templateSet/main/index.html",{appcode:"10180TM",pagecode:"10182TM_PAGE",templateVO:(0,r.default)({templateAppcode:n,templateid:t})})},a.deleteTemplate=function(e){var t=void 0;"menuitem"===a.props.def1?t="/nccloud/platform/template/deletePrintTemplate.do":"apppage"===a.props.def1&&(t="/nccloud/platform/template/deleteTemplateDetail.do"),a.ajaxFun({templateId:a.props.templatePk,varyId:e},t,(function(e){(0,T.default)({status:"success",msg:e.msg}),a.reqTreeTemData()}))},a.toggleAttachUploader=function(){var e=a.state.attachShowUploader;a.setState({attachShowUploader:!e})},a.ajaxXML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=a.props,n=t.appCode,o=t.json,r=a.state,l=r.rightRootTempaltePK,i=r.xmlImportVaryId,s=new FormData;s.append("filename",a.file.name),s.append("templatecode",e.templatecode),s.append("templatename",e.templatename),s.append("varyId",i),s.append("file",a.file),s.append("appcode",n),s.append("pTemplateId",l),s.append("billId",(0,N.uuid)(32,32)),s.append("index",Math.floor(10*(0,N.getRandomValue)()+1).toString()),console.log("pTemplateId:---- ",l),G({url:"/nccloud/riart/print/printtemplateimporta.do",data:s,headers:{"Content-Type":"multipart/form-data"},success:function(e){var t=e.success;t&&((0,T.default)({status:"success",msg:(0,N.langCheck)("10180TM-000072","pages",o)}),a.reqTreeTemData())},error:function(e){(0,T.default)({status:"danger",msg:e.message})}})},a.ajaxFun=function(e,t,n,o,r){var l=a.props.json;(0,y.default)({url:t,data:e,info:{name:(0,N.langCheck)("10180TM-000012","pages",l),action:(0,N.langCheck)("10180TM-000076","pages",l)},success:function(e){var t=e.data;t.success&&(o?o&&"function"==typeof o?n(t,o):(o||r)&&n(t,o,r):n(t))}})},a.setDefaultFun=function(e,t,n){var o=a.props,r=o.def1,l=o.parentIdcon,i=o.json,s=o.appCode,d=o.pageCode;"apppage"===r?t.templateType="bill":"menuitem"===r&&(n===(0,N.langCheck)("10180TM-000034","pages",i)?(t.pageCode&&delete t.pageCode,e="/nccloud/platform/template/cancelDefaultPrintTemplate.do"):n===(0,N.langCheck)("10180TM-000033","pages",i)&&(t.parentId=l,e="/nccloud/platform/template/setDefaultPrintTemplate.do"),t.templateType&&delete t.templateType),a.ajaxFun(t,e,(function(e){(0,T.default)({status:"success",msg:e.msg}),J(s,d)&&Z(s,d),a.reqTreeTemData("setDefault")}))},a.componentWillMount=function(){(0,A.getMulti)({moduleId:"10180TM",domainName:"workbench",callback:function(e){a.props.setJson(e)}})},a.componentDidMount=function(){var e=a.props,t=e.selectedKeys,n=e.setSelectedKeys,o=e.def1,r=e.expandedKeys,l=e.setExpandedKeys,i=e.appCode,s=e.pageCode,d=e.setAppCode,c=e.setPageCode,p=e.expandedTemKeys,u=e.setExpandedTemKeys,f=e.selectedTemKeys,m=e.setSelectedTemKeys,g=e.searchValue,y=e.setSearchValue;""!==o?(g?a.handleSearch(g,a.handleExpanded):a.reqTreeData(),n(t),(0,h.setDef1)(o),l(r),d(i),c(s),a.reqTreeTemData("historyData"),u(p),m(f)):a.param&&a.param.fourAppCode&&a.param.code&&"equiptool"===a.param.pageName?(y(a.param.fourAppCode),a.handleSearch(a.param.fourAppCode,a.handleExpanded,a.selectedFun)):a.reqTreeData(a.setInformationFun)},a.setInformationFun=function(e){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode;if(e&&e.length>0){var i=e[0],s=i.pk,d=i.def1,c=i.appCode,p=i.pageCode,u=i.moduleid;s||void 0===u||(s=u),n([s]),o(d),r(c),p&&l(p)}},a.handleExpanded=function(e){var t=e.map((function(e){return e.pk?e.pk:e.moduleid}));t.push("00"),a.props.setExpandedKeys(t),a.setState({autoExpandParent:!0})},a.handleSearch=function(e,t,n){if(e){var o="/nccloud/platform/appregister/searchappmenuitem.do";"mobile"===a.props.pageType&&(o="/nccloud/platform/appregister/searchmobileapps.do"),a.props.setSelectedKeys([]);(0,N.DeferFn)((function(){a.ajaxFun({search_content:e,containAppPage:!0},o,(function(e){a.props.setTreeData(e.data),t(e.data),n&&"function"==typeof n&&n(e.data)}))}))}},a.selectedFun=function(e){if(e&&e.length>0){var t=a.props,n=t.setSelectedKeys,o=t.setDef1,r=t.setAppCode,l=t.setPageCode,i=e.find((function(e){return e.code===a.param.code}));n([i.pk]),o(i.def1),r(i.appCode),i.code&&l(i.code),a.reqTreeTemData()}},a.restoreTreeTemData=function(e,t){var n=a.state,r=n.treeTemBillData,l=n.treeTemPrintData,i=a.props,s=i.def1,d=i.expandedTemKeys,c=i.copyId,p=i.templatePk,u=i.json,f=i.setIsDefaultTem,m=[],h=void 0,g=a.props.treeTemBillData,y=a.props.treeTemPrintData;"bill"===e?h=(0,P.generateTemData)(g):"print"===e&&(h=(0,P.generateTemData)(y));var T=h,v=T.treeArray,k=T.treeObj;if(v.map((function(e){for(var t in k)k.hasOwnProperty(t)&&e.templateId===k[t][0].parentId&&e.children.push(k[t][0])})),m=h.treeArray,m=(0,P.generateTreeData)(m),"bill"===e){if("apppage"===s)if(m.length>0){if(t)t&&"copy"===t?m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(c===e.key){var t=[].concat((0,o.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}}))})):t&&"setDefault"===t&&m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){p===e.key&&f(e.isDefault)}))}));else{var b=[];b.push(m[0].key),a.props.setSelectedTemKeys(b),a.props.setParentIdcon(m[0].parentId),a.props.setTemplatePk(m[0].pk),a.props.setTemplateNameVal(m[0].name)}m.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,N.langCheck)("10180TM-000038","pages",u))}))}))}else a.props.setParentIdcon("");r=m,a.setState({treeTemBillData:r})}else if("print"===e){if("menuitem"===s)if(m.length>0){if(t)t&&"copy"===t?m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(c===e.key){var t=[].concat((0,o.default)(d),[e.parentId]);a.props.setExpandedTemKeys(t)}}))})):t&&"setDefault"===t&&m.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){p===e.key&&f(e.isDefault)}))}));else{var C=[];C.push(m[0].key),a.props.setSelectedTemKeys(C),a.props.setTemplatePk(m[0].pk),a.props.setParentIdcon(m[0].parentId),a.props.setTemplateNameVal(m[0].name),a.props.setTemplateTitleVal(m[0].code)}m.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,N.langCheck)("10180TM-000038","pages",u))}))}))}else a.props.setParentIdcon("");l=m,a.setState({treeTemPrintData:l})}},a.onSelectQuery=function(e,t){var n=a.props.selectedKeys;e.length>0?(a.props.setSelectedKeys(e),a.props.setDef1(t.selectedNodes[0].props.refData.def1),a.props.setAppCode(t.selectedNodes[0].props.refData.appCode),a.props.setPageCode(t.selectedNodes[0].props.refData.code),a.setState({autoExpandParent:!0},a.reqTreeTemData)):n&&a.reqTreeTemData()},a.reqTreeTemData=function(e){var t=a.props,n=t.def1,o={pageCode:t.pageCode,appCode:t.appCode};o.pageCode&&("apppage"===n?(o.templateType="bill",a.reqTreeTemAjax(o,"bill",e)):"menuitem"===n&&(o.pageCode&&delete o.pageCode,o.templateType="print",a.reqTreeTemAjax(o,"print",e)))},a.reqTreeTemAjax=function(e,t,n){var o=a.props.selectedTemKeys,r=a;a.ajaxFun(e,"/nccloud/platform/template/getTemplatesOfPage.do",(function(e){e.data.length>0&&r.setState({saveLeftArrTS:e.data,SHOW_TEMPLATE_EXPORT_BTN:"Y"===e.data[0].enableExport}),"bill"===t?(a.props.setTreeTemBillData(e.data),a.restoreTreeTemData(t,n)):"print"===t&&(a.props.setTreeTemPrintData(e.data),a.restoreTreeTemData(t,n),e.data&&e.data.length>0&&(e.data[0]&&e.data[0].children&&e.data[0].children.length,a.setState({rightRootTempaltePK:e.data[0].templateId})),o&&e.data&&e.data.length&&e.data.map((function(e){e.templateId===o[0]&&a.props.setNodeKey(e.nodeKey)})))}),t,n)},a.onTemSelect=function(e,t){var n=a.props,o=n.def1,r=n.setIsDefaultTem;if("apppage"===o||"menuitem"===o&&(e.length>0?a.props.setNodeKey(t.selectedNodes[0].props.refData.nodeKey):t.node.props&&t.node.props.refData&&t.node.props.refData.nodeKey&&a.props.setNodeKey(t.node.props.refData.nodeKey)),e.length>0){a.setState({rightRootTempaltePK:e[0]});var l=t.selectedNodes[0].props.refData.name,i=l.indexOf((0,N.langCheck)("10180TM-000038","pages",a.props.json));-1!==i&&(l=l.slice(0,i)),a.props.setSelectedTemKeys(e),a.props.setTemplatePk(e[0]),a.props.setParentIdcon(t.selectedNodes[0].props.refData.parentId),a.props.setTemplateNameVal(l),a.props.setTemplateTitleVal(t.selectedNodes[0].props.refData.code),r(t.selectedNodes[0].props.refData.isDefault)}},a.reqTreeData=function(e){var t="/nccloud/platform/appregister/querymenuitemstree.do";"mobile"===a.props.pageType&&(t="/nccloud/platform/appregister/querymobilemodules.do"),a.ajaxFun({},t,(function(e,t){e.success&&e.data.length>0&&(a.props.setTreeData(e.data),t&&"function"==typeof t&&t(e.data))}),e)},a.setModalVisibel=function(e){a.setState({batchSettingModalVisibel:e})},a.setAssignModalVisible=function(e){a.setState({alloVisible:e})},a.showModal=function(){a.setState({previewPrintVisible:!0})},a.hideModal=function(e){a.setState({previewPrintVisible:e})},a.switchPageTem=function(){var e=a.state,t=e.treeTemBillData,n=e.treeTemPrintData,o=a.props.json;switch(a.props.def1){case"apppage":return u.default.createElement(E.default,{type:"bill",dataSource:t,langDataTitle:(0,N.langCheck)("10180TM-000039","pages",o),langNoDataTitle:(0,N.langCheck)("10180TM-000040","pages",o),onSelectQuery:a.onTemSelect});case"menuitem":return u.default.createElement(E.default,{type:"print",dataSource:n,langDataTitle:(0,N.langCheck)("10180TM-000041","pages",o),langNoDataTitle:(0,N.langCheck)("10180TM-000042","pages",o),onSelectQuery:a.onTemSelect});default:return u.default.createElement("div",{className:"noData"},u.default.createElement("p",{className:"noDataTip"},(0,N.langCheck)("10180TM-000043","pages",o)))}},a.menuBtnLoad=function(){var e=a.props,t=e.def1,n=e.parentIdcon,o=e.json;return n&&"root"!==n&&t&&u.default.createElement(H,{overlay:a.menuFun(),trigger:["click"],fieldid:"setDefault"},u.default.createElement(U,{key:"",className:"margin-left-10",fieldid:"setDefault"},(0,N.langCheck)("10180TM-000044","pages",o),u.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},a.xmlBtnLoad=function(){var e=a.props,t=e.def1,n=e.parentIdcon,o=e.json,r=a.state.treeTemPrintData;return t&&"menuitem"==t&&r.length>0&&u.default.createElement(H,{overlay:a.xmlFun(n),trigger:["click"],fieldid:"xmlImport"},u.default.createElement(U,{key:"",className:"margin-left-10",fieldid:"xmlImport"},(0,N.langCheck)("10180TM-000067","pages",o),u.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},a.currentBtnLoad=function(){var e=a.props,t=e.def1,n=e.json;return t&&u.default.createElement(H,{overlay:a.currentImportFun(),trigger:["click"],fieldid:"currentImport"},u.default.createElement(U,{key:"",className:"margin-left-10",fieldid:"currentImport"},(0,N.langCheck)("10180TM-000078","pages",n),u.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},a.beforeUpload=function(e){var t=a.props.json;return!(!e||"application/json"!==e.type)||((0,T.default)({status:"error",msg:(0,N.langCheck)("10180TM-000064","pages",t)}),!1)},a.ncUploadChange=function(e){var t=a.props.json,n=e.file,o=n.status,r=n.response;"uploading"!==o&&console.log(e.file,e.fileList),"error"===o&&((0,T.default)({status:"error",msg:(0,N.langCheck)("10180TM-000061","pages",t)}),console.log(e.file.name+" file upload failed.")),r&&(r.error?(0,T.default)({status:"error",msg:r.error.message}):(a.reqTreeTemData(),(0,T.default)({status:"success",msg:r.data})))},a.setXmlImportVisible=function(){var e=a.state.xmlImportVisible;a.setState({xmlImportVisible:!e})},a.param=(0,N.GetQuery)(a.props.location.search),a.state={siderHeight:"280",autoExpandTemParent:!0,treeTemBillData:[],treeTemPrintData:[],visible:!1,alloVisible:!1,batchSettingModalVisibel:!1,previewPrintVisible:!1,copyOthersModalVisible:!1,reNameModal:!1,saveLeftArrTS:[],rightRootTempaltePK:"root",SHOW_TEMPLATE_EXPORT_BTN:!1},a}return(0,c.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this,t=(0,O.getDynamicComponent)(O.DynamicComponents.NCUploader),a=this.state,n=a.visible,o=a.alloVisible,r=a.batchSettingModalVisibel,l=a.previewPrintVisible,i=a.copyOthersModalVisible,s=a.xmlImportVisible,d=a.reNameModal,c=a.attachShowUploader,p=a.SHOW_TEMPLATE_EXPORT_BTN,f=this.props,m=f.def1,h=f.templatePk,y=f.parentIdcon,T=f.json,v=f.pageType,E=[{name:(0,N.langCheck)("10180TM-000066","pages",T),type:"primary",code:"export",fieldid:"export",isshow:p&&"apppage"==m&&""!==y},{name:(0,N.langCheck)("10180TM-000045","pages",T),code:"edit",fieldid:"edit",isshow:m&&"root"!==y&&y},{name:(0,N.langCheck)("10180TM-000036","pages",T),code:"delete",fieldid:"delete",isshow:m&&"root"!==y&&y},{name:(0,N.langCheck)("10180TM-000046","pages",T),type:"primary",code:"copy",fieldid:"copy",isshow:"menuitem"==m&&""!==y},{name:(0,N.langCheck)("10180TM-000074","pages",T),type:"primary",code:"attachUploader",fieldid:"attachUploader",isshow:"menuitem"==m&&"mobile"!==v},{name:(0,N.langCheck)("10180TM-000046","pages",T),type:"primary",code:"copy",fieldid:"copy",isshow:"apppage"==m&&""!==y,divide:"mobile"!==v?"btn":null},{name:(0,N.langCheck)("10180TM-000055","pages",T),type:"primary",code:"copyOthersApp",dropdownFieldid:"copy",fieldid:"copyOthersApp",isshow:"apppage"==m&&""!==y&&"mobile"!==v,divide:"select"},{name:(0,N.langCheck)("10180TM-000056","pages",T),code:"rename",fieldid:"rename",isshow:m&&"root"!==y&&y},{name:(0,N.langCheck)("10180TM-000047","pages",T),code:"assign",fieldid:"assign",isshow:m&&"root"!==y&&y},{name:(0,N.langCheck)("10180TM-000048","pages",T),code:"browse",fieldid:"browse",isshow:m&&""!==y&&"mobile"!==v}],M=(0,N.GetQuery)(window.location.hash).c,P="mobile"===this.props.pageType?(0,N.langCheck)("10180TM-000077","pages",T):(0,N.langCheck)("10180TM-000049","pages",T);return u.default.createElement(g.PageLayout,{className:"nc-workbench-templateSetting",header:u.default.createElement(g.PageLayoutHeader,null,u.default.createElement("div",{className:"header_in_icon"},u.default.createElement(_.default,{appCode:M}),u.default.createElement(B,{fieldid:P,areaCode:B.config.Title},P)),u.default.createElement("div",{style:{display:"flex"}},p&&"apppage"==m&&""!==y&&u.default.createElement(F,{showUploadList:!1,accept:"application/json",action:"/nccloud/platform/appregister/templetimport.do",headers:{authorization:"authorization-text"},beforeUpload:this.beforeUpload,onChange:this.ncUploadChange},u.default.createElement(U,{className:"margin-left-6",key:"import",fieldid:"import",colors:"primary"},(0,N.langCheck)("10180TM-000065","pages",T))),u.default.createElement(R.default,{dataSource:E,onClick:this.handleClick}),this.menuBtnLoad(),this.xmlBtnLoad()))},u.default.createElement(g.PageLayoutLeft,null,u.default.createElement(C.default,{onSelect:this.reqTreeTemData,reqTreeData:this.reqTreeData,setInforFun:this.setInformationFun,handleSearch:this.handleSearch,handleExpanded:this.handleExpanded,pageType:this.props.pageType})),u.default.createElement(g.PageLayoutRight,null,this.switchPageTem(),r&&u.default.createElement(k.default,{previewVisibel:r,setModalVisibel:this.setModalVisibel,templetData:{pagecode:this.props.pageCode,appcode:this.props.appCode,templetid:h}}),i&&u.default.createElement(x.default,{copyOthersModalVisible:i,setCopyOthersVisible:this.setCopyOthersVisible,reqTreeTemData:this.reqTreeTemData}),n&&u.default.createElement(w.default,{json:this.props.json,visible:n,setCopyVisible:this.setCopyVisible,onCopy:function(){return e.reqTreeTemData("copy")}}),d&&u.default.createElement(D.default,{reNameModalVisible:d,setReNameModal:this.setReNameModal,reqTreeTemData:this.reqTreeTemData,saveLeftArrTS:this.state.saveLeftArrTS}),l&&u.default.createElement(S.default,{previewPrintVisible:l,hideModal:this.hideModal}),o&&u.default.createElement(b.default,{json:this.props.json,alloVisible:o,setAssignModalVisible:this.setAssignModalVisible,pageType:v}),s&&u.default.createElement(j.default,{json:this.props.json,xmlImportVisible:s,setXmlImportVisible:this.setXmlImportVisible,ensureModal:this.ajaxXML}),c&&u.default.createElement(t,{billId:"printimage",onHide:this.toggleAttachUploader,noControlPermission:!0}),u.default.createElement("input",{type:"file",ref:function(t){e.xmlImport=t},style:{display:"none",position:"absolute",top:9999}})))}}]),t}(p.Component))||n;Q.propTypes={treeData:f.default.array.isRequired,setTreeData:f.default.func.isRequired,setExpandedKeys:f.default.func.isRequired,setDef1:f.default.func.isRequired,setSelectedTemKeys:f.default.func.isRequired,setTreeTemBillData:f.default.func.isRequired,setTreeTemPrintData:f.default.func.isRequired,setSearchValue:f.default.func.isRequired,setPageCode:f.default.func.isRequired,setAppCode:f.default.func.isRequired,setCopyId:f.default.func.isRequired,setIsDefaultTem:f.default.func.isRequired,setParentIdcon:f.default.func.isRequired,setNodeKey:f.default.func.isRequired,setTemplateNameVal:f.default.func.isRequired,setJson:f.default.func.isRequired,selectedKeys:f.default.array.isRequired,expandedKeys:f.default.array.isRequired,treeTemBillData:f.default.array.isRequired,treeTemPrintData:f.default.array.isRequired,def1:f.default.string.isRequired,templatePk:f.default.string.isRequired,searchValue:f.default.string.isRequired,pageCode:f.default.string.isRequired,appCode:f.default.string.isRequired,parentIdcon:f.default.string.isRequired,nodeKey:f.default.array.isRequired,copyId:f.default.string.isRequired,expandedTemKeys:f.default.array.isRequired,json:f.default.object.isRequired,isDefaultTem:f.default.string.isRequired},t.default=(0,m.connect)((function(e){return{treeData:e.TemplateSettingData.treeData,treeTemBillData:e.TemplateSettingData.treeTemBillData,treeTemPrintData:e.TemplateSettingData.treeTemPrintData,selectedKeys:e.TemplateSettingData.selectedKeys,expandedKeys:e.TemplateSettingData.expandedKeys,def1:e.TemplateSettingData.def1,selectedTemKeys:e.TemplateSettingData.selectedTemKeys,templatePk:e.TemplateSettingData.templatePk,searchValue:e.TemplateSettingData.searchValue,pageCode:e.TemplateSettingData.pageCode,appCode:e.TemplateSettingData.appCode,parentIdcon:e.TemplateSettingData.parentIdcon,nodeKey:e.TemplateSettingData.nodeKey,copyId:e.TemplateSettingData.copyId,expandedTemKeys:e.TemplateSettingData.expandedTemKeys,json:e.TemplateSettingData.json,isDefaultTem:e.TemplateSettingData.isDefaultTem}}),{setTreeData:h.setTreeData,setTreeTemBillData:h.setTreeTemBillData,setTreeTemPrintData:h.setTreeTemPrintData,setExpandedKeys:h.setExpandedKeys,setSelectedKeys:h.setSelectedKeys,setDef1:h.setDef1,setSelectedTemKeys:h.setSelectedTemKeys,setExpandedTemKeys:h.setExpandedTemKeys,setTemplateNameVal:h.setTemplateNameVal,setTemplateTitleVal:h.setTemplateTitleVal,setTemplatePk:h.setTemplatePk,setSearchValue:h.setSearchValue,setPageCode:h.setPageCode,setAppCode:h.setAppCode,setParentIdcon:h.setParentIdcon,setNodeKey:h.setNodeKey,setCopyId:h.setCopyId,setJson:h.setJson,setIsDefaultTem:h.setIsDefaultTem})(Q)},968:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMobileFlag=t.onToggleLeftSider=t.updateSearchBox=t.setMetaTreeNodes=t.setAreaHide=t.setServerData=t.setTabLayModalVisible=t.setAreaItemVisible=t.setImplementFlag=t.updateAreaValidate=t.updateSaveFlag=t.setZoneDataFun=t.setCurrentBatchCell=t.updateBatchSource=t.setFormulaInfo=t.toggleFormula=t.clearData=t.updatePreviewData=t.updateSelectArea=t.updateAreaList=t.updateSelectCard=t.setZoneData=void 0;var n,o=a(3),r=(n=o)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(376));t.setZoneData=function(e){return{type:l.ZONESETTING,data:e}},t.updateSelectCard=function(e){return{type:l.UPDATESELECTCARD,selectCard:e}},t.updateAreaList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return a&&a(e),{type:l.UPDATEAREALIST,areaList:e,init:t}},t.updateSelectArea=function(e){return{type:l.UPDATESELECTAREA,selectedArea:e}},t.updatePreviewData=function(e){return{type:l.PREVIEWDATA,previewData:e}},t.clearData=function(){return{type:l.CLEARDATA}},t.toggleFormula=function(e,t){return{type:l.TOGGLEFORMULA,formula:(0,r.default)({},e,t||{visible:!1,value:""})}},t.setFormulaInfo=function(e){return{type:l.SETFORMULAINFO,formulaInfo:e}},t.updateBatchSource=function(e){return{type:l.UPDATEBATCHSOURCE,batchSource:e}},t.setCurrentBatchCell=function(e){return{type:l.SETCURRENTBATCHCELL,currentBatchCell:e}},t.setZoneDataFun=function(e){return{type:l.SETZONEFORMFUN,getFromData:e}},t.updateSaveFlag=function(e){return{type:l.UPDATESAVEFLAG,isSave:e}},t.updateAreaValidate=function(e){return{type:l.SETAREAVALIDATE,validate:e}},t.setImplementFlag=function(e){return{type:l.SETIMPLEMENTFLAG,isImplement:e}},t.setAreaItemVisible=function(e){return{type:l.SETAREAVISIBLE,areaVisible:e}},t.setTabLayModalVisible=function(e){return{type:l.TABLAYMODALVISIBLE,showTabLaySetModal:e}},t.setServerData=function(e){return{type:l.SETSEVERDATA,serverData:e}},t.setAreaHide=function(e){return{type:l.SETAREAHIDE,areaHide:e}},t.setMetaTreeNodes=function(e){return{type:l.SET_META_TREE_NODES,data:e}},t.updateSearchBox=function(e){return{type:l.UPDATE_SEARCH_BOX,boxStatus:e}},t.onToggleLeftSider=function(e){return{type:l.ONTOGGLELEFTSIDER,leftSiderShow:e}},t.setMobileFlag=function(e){return{type:l.SETMOBILEFLAG,ismobile:e}}},969:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutRight=t.PageLayoutLeft=t.PageLayoutHeader=t.PageScrollLayout=t.PageLayout=void 0;var n=p(a(21)),o=p(a(5)),r=p(a(7)),l=p(a(4)),i=p(a(6)),s=a(1),d=p(s),c=p(a(0));function p(e){return e&&e.__esModule?e:{default:e}}a(970);var u=p(a(26)).default.base.NCDiv,f=!1,m=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseUp",value:function(){f=!1,console.log(this.test)}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}}},{key:"render",value:function(){return d.default.createElement("div",{className:"nc-workbench-page"},this.props.header?this.props.header:null,d.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))}}]),t}(s.Component),h=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={suck:!1},a.initScrollContainerTop,a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseUp",value:function(){f=!1}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}}},{key:"handleScroll",value:function(e){var t=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;if(t==this.initScrollContainerTop&&this.setState({suck:!1}),t<this.initScrollContainerTop){if(this.state.suck)return;this.containerWidthChange(),this.setState({suck:!0})}}},{key:"containerWidthChange",value:function(){var e=this.refs.ncWorkbenchPageOwnpage.getBoundingClientRect().width;document.getElementsByClassName("nc-workbench-page-header")[0].style.width=e+"px",document.getElementById("suckTableHeader")&&(document.getElementById("suckTableHeader").style.width=e+"px")}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.containerWidthChange);var e=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;this.initScrollContainerTop=e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.containerWidthChange)}},{key:"render",value:function(){var e=this.state.suck;return d.default.createElement("div",{className:"nc-workbench-page-scroll",onScroll:this.handleScroll.bind(this)},d.default.createElement("div",{className:" nc-workbench-page "},d.default.createElement("div",{className:"nc-workbench-page-container "+(e?"nc-workbench-suck":""),ref:"ncWorkbenchPageScroll"},this.props.header?this.props.header:null,d.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),ref:"ncWorkbenchPageOwnpage",className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))))}}]),t}(s.Component),g=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseDown",value:function(){f=!0}},{key:"render",value:function(){return d.default.createElement("div",{id:"layoutLeft",className:"nc-workbench-ownpage-left "+(this.props.className||""),style:this.props.style?this.props.style:{background:"#f6f6f6"}},d.default.createElement("span",{className:"layout-drag-block",onMouseDown:this.handleMouseDown.bind(this)}),this.props.children)}}]),t}(s.Component),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleBindKey=a.handleBindKey.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleBindKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleBindKey,!1)}},{key:"handleBindKey",value:function(e){var t=e||window.event||arguments.callee.caller.arguments[0];t&&t.keyCode&&t.shiftKey&&27==t.keyCode&&this.props.pageback&&this.props.pageback()}},{key:"render",value:function(){return d.default.createElement(u,{areaCode:u.config.HEADER,className:"nc-workbench-page-header "+(this.props.className||"")},this.props.children)}}]),t}(s.Component),T=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"nc-workbench-ownpage-right "+(this.props.className||"")},this.props.children)}}]),t}(s.Component);m.propTypes={children:c.default.any.isRequired},g.propTypes={children:c.default.any.isRequired},T.propTypes={children:c.default.any.isRequired},t.PageLayout=m,t.PageScrollLayout=h,t.PageLayoutHeader=y,t.PageLayoutLeft=g,t.PageLayoutRight=T},970:function(e,t,a){var n=a(971);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},971:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,'.nc-workbench-page{position:absolute;top:0;z-index:10;height:100%;width:100%;padding:8px 0 0;display:flex;flex-direction:column}.nc-workbench-page .nc-workbench-page-header{flex:0 0 45px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;border-radius:3px 3px 0 0;background:#fff;padding:0 20px}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn{display:flex;align-items:center;font-size:16px;color:#111;font-weight:700}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont{margin-right:16px;border-radius:50%;font-size:16px;padding:0 4px;font-weight:400;line-height:24px;cursor:pointer}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont:hover{background:#e8e8e8}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn img{margin-right:10px}.nc-workbench-page .nc-workbench-page-header .header_in_icon{display:flex;font-weight:700;font-size:16px;color:#111;line-height:24px}.nc-workbench-page .nc-workbench-page-header .header_in_icon span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-ownpage{min-width:800px;height:calc(100% - 61px);border-radius:0 0 3px 3px}.nc-workbench-page .nc-workbench-ownpage-all{display:flex;justify-content:flex-start;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nc-workbench-page .nc-workbench-ownpage-left{position:relative;height:100%;min-width:280px}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block{position:absolute;right:-3px;z-index:10;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:block;padding:0 3px;height:100%;border-radius:3px;cursor:w-resize}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:after{content:"";display:block;width:1px;height:100%;background:#d9d9d9}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:hover:after{width:2px;background:rgba(0,0,0,.54)}.nc-workbench-page .nc-workbench-ownpage-right{min-width:50%;flex:1}.nc-workbench-page-scroll{height:100%;width:100%;overflow-y:auto}.nc-workbench-page-scroll .nc-workbench-page-container{margin-top:0;min-height:100%;background:#fff;border-radius:3px}.nc-workbench-page-scroll .nc-workbench-page-container .nc-workbench-page-header{position:static;transition:top .7s ease;height:46px}.nc-workbench-page-scroll .nc-workbench-page-container .suck-table-header{position:static;transition:top .7s ease}.nc-workbench-page-scroll .nc-workbench-suck{padding-top:80px}.nc-workbench-page-scroll .nc-workbench-suck .nc-workbench-page-header{position:fixed;z-index:1;top:44px}.nc-workbench-page-scroll .nc-workbench-suck .suck-table-header{position:fixed;z-index:1;top:94px}@media screen and (min-width:1280px){.nc-workbench-page{padding:8px 16px}}@media screen and (min-width:1440px){.nc-workbench-page{padding:8px 16px}}@media screen and (min-width:1600px){.nc-workbench-page{padding:8px 16px}}',""])},972:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;var n,o=a(89),r=(n=o)&&n.__esModule?n:{default:n};t.createTree=function(e,t,a){e=r.default.cloneDeep(e);var n=l(e,a),o=n.treeArray,d=n.treeObject;return d=i(d,t),s(o,d,t)};var l=function(e,t){var a=[],n={};return e.map((function(e,o){e[t]?(n.hasOwnProperty(e[t])||(n[e[t]]=[]),n[e[t]].push(e)):a.push(e)})),{treeArray:a,treeObject:n}},i=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(e[a]=s(e[a],e,t));return e},s=function(e,t,a){return e.map((function(e,n){return t.hasOwnProperty(e[a])&&(e.children=t[e[a]]),e}))}},975:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(2)),o=p(a(21)),r=p(a(5)),l=p(a(7)),i=p(a(4)),s=p(a(6));t.default=function(e){return function(t){return function(a){function p(t){(0,r.default)(this,p);var a=(0,i.default)(this,(p.__proto__||(0,o.default)(p)).call(this,t));return a.showVaryModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pagetemplate",t=arguments[1];a.setState({showVaryModal:!0,flag:e,operate:t})},a.onConfirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"function"==typeof e&&e(t,a.component,a.state.operate)},a.state={showVaryModal:!1,flag:"pagetemplate"},a}return(0,s.default)(p,a),(0,l.default)(p,[{key:"render",value:function(){var e=this,a=(0,n.default)({showVaryModal:this.showVaryModal},this.props);return d.default.createElement(d.default.Fragment,null,d.default.createElement(t,(0,n.default)({ref:function(t){return e.component=t}},a)),this.state.showVaryModal&&d.default.createElement(c.default,{flag:this.state.flag,close:function(){return e.setState({showVaryModal:!1})},confirm:this.onConfirm}))}}]),p}(d.default.Component)}};var d=p(a(1)),c=p(a(1008));function p(e){return e&&e.__esModule?e:{default:e}}},976:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(21)),o=c(a(5)),r=c(a(7)),l=c(a(4)),i=c(a(6)),s=a(1),d=c(s);function c(e){return e&&e.__esModule?e:{default:e}}a(977);var p=c(a(26)).default.base,u=p.NCButtonGroup,f=p.NCButton,m=p.NCMenu,h=p.NCDropdown,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.createBtn=function(e){return e.map((function(e){if(e.isshow){if("btn"==e.divide)return d.default.createElement(f,{className:"divide-btn",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name);if("select"==e.divide){var t=d.default.createElement(m,{onClick:function(){a.props.onClick(e.code)}},d.default.createElement(m.Item,{key:"1",fieldid:e.fieldid||e.code},d.default.createElement("div",null,e.name)));return d.default.createElement(h,{overlay:t,trigger:["click"],fieldid:e.dropdownFieldid},d.default.createElement(f,{className:"margin-left-1",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,is_arrow:!0,style:{minWidth:18}},d.default.createElement("i",{className:"iconfont icon-hangcaozuoxiala1"})))}return d.default.createElement(f,{className:"margin-left-6 "+(e.className?e.className:""),key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name)}return null}))},a.createBtnGroup=function(e){if(e.length>0){var t=e.filter((function(e){return e.isshow})),n=a.createBtn(e);return 1===t.length?n:d.default.createElement(u,null,n)}return null},a.createButton=function(e){var t=e.filter((function(e){return e.group})),n=e.filter((function(e){return!e.group}));return d.default.createElement("div",null,d.default.createElement("div",{style:{marginLeft:6}},a.createBtnGroup(t)),a.createBtn(n))},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return d.default.createElement("div",{className:"buttons-component "+(this.props.className?this.props.className:"")},this.createButton(this.props.dataSource))}}]),t}(s.Component);t.default=g},977:function(e,t,a){var n=a(978);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},978:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".buttons-component div{display:flex;align-items:center}.buttons-component .ant-btn-group{margin-left:6px}body .divide-btn{margin-left:6px;border-top-right-radius:0;border-bottom-right-radius:0}body .margin-left-1{margin-left:1px;width:18px;border-top-left-radius:0;border-bottom-left-radius:0;display:flex;justify-content:center;align-items:center;padding:0}body .margin-left-1 .iconfont{font-size:12px}",""])},979:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(1)),o=a(32),r=i(a(26)),l=i(a(367));function i(e){return e&&e.__esModule?e:{default:e}}var s=r.default.appIcons;t.default=function(e){var t=e.appCode,a=(0,o.getStore)("APPICONSSTORE"),r=(0,o.getStore)("nccIcon")||"";r=r.length?r+"_":r;var i=a&&a[t],d=s&&s[r+i]?s[r+i]:l.default[r]?l.default[r]:l.default.defaultIcon;return n.default.createElement("div",{style:{width:"24px",height:"24px",marginRight:"10px",background:"url("+d+") no-repeat 0px 0px",backgroundSize:"contain"}})}},980:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSearchTreeShow=t.setIsDefaultTem=t.setJson=t.setRoleUserDatas=t.setRoCheckedObjArray=t.setCopyId=t.setNodeKey=t.setTemplateTitleVal=t.setTemplateNameVal=t.setParentIdcon=t.setAppCode=t.setPageCode=t.setSearchValue=t.setTemplatePk=t.setSelectedTemKeys=t.setSelectedKeys=t.setAsyncExpandedKeys=t.setExpandedKeys=t.setExpandedTemKeys=t.setDef1=t.setTreeTemPrintData=t.setTreeTemBillData=t.setTreeData=t.clearData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(380));t.clearData=function(){return{type:n.CLEARDATA}},t.setTreeData=function(e){return{type:n.SETTREEDATA,data:e}},t.setTreeTemBillData=function(e){return{type:n.SETTREETEMBILLDATA,data:e}},t.setTreeTemPrintData=function(e){return{type:n.SETTREETEMPRINTDATA,data:e}},t.setDef1=function(e){return{type:n.SETDEF1,data:e}},t.setExpandedTemKeys=function(e){return{type:n.EXPANDEDTEMKEYS,data:e}},t.setExpandedKeys=function(e){return{type:n.EXPANDEDKEYS,data:e}},t.setAsyncExpandedKeys=function(e){return{type:n.ASYNCEXPANDEDKEYS,data:e}},t.setSelectedKeys=function(e){return{type:n.SELECTEDKEYS,data:e}},t.setSelectedTemKeys=function(e){return{type:n.SELECTEDTEMKEYS,data:e}},t.setTemplatePk=function(e){return{type:n.TEMPLATEPK,data:e}},t.setSearchValue=function(e){return{type:n.SEARCHVALUE,data:e}},t.setPageCode=function(e){return{type:n.PAGECODE,data:e}},t.setAppCode=function(e){return{type:n.APPCODE,data:e}},t.setParentIdcon=function(e){return{type:n.PARENTIDCON,data:e}},t.setTemplateNameVal=function(e){return{type:n.TEMPLATENAMEVAL,data:e}},t.setTemplateTitleVal=function(e){return{type:n.TEMPLATETITLEVAL,data:e}},t.setNodeKey=function(e){return{type:n.NODEKEY,data:e}},t.setCopyId=function(e){return{type:n.COPYID,data:e}},t.setRoCheckedObjArray=function(e){return{type:n.ROCHECKEDOBJARRAY,data:e}},t.setRoleUserDatas=function(e){return{type:n.ROLEUSERDATAS,data:e}},t.setJson=function(e){return{type:n.JSON,data:e}},t.setIsDefaultTem=function(e){return{type:n.ISDEFAULTTEM,data:e}},t.setSearchTreeShow=function(e){return{type:n.SETSEARCHTREESHOW,data:e}}},984:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=C(a(372)),o=C(a(170)),r=C(a(111)),l=C(a(230)),i=C(a(925)),s=C(a(21)),d=C(a(5)),c=C(a(7)),p=C(a(4)),u=C(a(6)),f=a(1),m=C(f),h=a(37),g=a(968),y=a(919),T=C(a(35)),v=a(19),k=a(365),b=C(a(364));function C(e){return e&&e.__esModule?e:{default:e}}function E(e,t){var a=this,n=this.props,o=n.requestUrl,r=n.requestData,l=n.templetData,i=l.pagecode,s=l.appcode,d=l.templetid,c=o||"/nccloud/platform/templet/querypage.do",p=r||{pagecode:i,appcode:s,templetid:d};Array.isArray(p)&&0==p.length||(0,T.default)({url:c,data:p,loading:!0,info:{name:(0,v.langCheck)("ZoneSetting-000028","pages",e),action:(0,v.langCheck)("ZoneSetting-000029","pages",e)},success:function(e){var n=e.data.data;n&&(a.registerComponent(n),a.props.meta.setMeta(n),r&&r.forEach((function(e){n[e.code]&&(n[e.code].position=e.position)})),a.props.updatePreviewData(n),a.setState({reRender:!0},(function(){return t(n)})))}})}a(985);var w=function(e){function t(e){(0,d.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,s.default)(t)).call(this,e));return a.afterInitTemplate=function(e){if(e){var t=e,s=[],d=a.getTabGirdRelationCode(t),c=t.formrelation,p=t.containerrelation,u=t.formassociatedrelation,f=[],m=[];d&&(0,i.default)(d).forEach((function(e){f=f.concat(e)})),u&&(0,i.default)(u).forEach((function(e){m=m.concat(e.formtabs)}));var h=function(e,t){var n=t.moduletype,o=t.code;"table"!==n&&"form"!==n&&"search"!==n||"form"===n&&c&&t.relationcode in c||"form"===n&&u&&m.includes(e)||(p&&d&&(0,i.default)(p).length&&(0,r.default)(d).includes(e)?s.push({id:o,name:t.name,myAreaType:n,position:t.position,tabGirdRelationCode:d[e],srcAreaCode:e}):f.includes(e)||s.push({id:o,name:t.name,myAreaType:n,position:t.position})),"form"===n&&a.props.form.setFormStatus(o,"edit"),"table"===n&&setTimeout((function(){0==a.props.editTable.getNumberOfRows(o)&&a.props.editTable.addRow(o)}),10)},g=!0,y=!1,T=void 0;try{for(var v,k=(0,o.default)((0,n.default)(t));!(g=(v=k.next()).done);g=!0){var b=v.value,C=(0,l.default)(b,2);h(C[0],C[1])}}catch(e){y=!0,T=e}finally{try{!g&&k.return&&k.return()}finally{if(y)throw T}}s[0]&&s[0].position&&s.sort((function(e,t){return e.position-t.position})),a.setState({all_keys:s})}},a.getTabGirdRelationCode=function(e){var t={},a=!0,r=!1,i=void 0;try{for(var s,d=(0,o.default)((0,n.default)(e));!(a=(s=d.next()).done);a=!0){var c=s.value,p=(0,l.default)(c,2),u=p[0],f=p[1];if("containerrelation"===u){var m=function(e,a){e&&(t.hasOwnProperty(e)||(t[e]=[]),a.map((function(a){t[e]=t[e].concat(a)})))},h=!0,g=!1,y=void 0;try{for(var T,v=(0,o.default)((0,n.default)(f));!(h=(T=v.next()).done);h=!0){var k=T.value,b=(0,l.default)(k,2);m(b[0],b[1])}}catch(e){g=!0,y=e}finally{try{!h&&v.return&&v.return()}finally{if(g)throw y}}}}}catch(e){r=!0,i=e}finally{try{!a&&d.return&&d.return()}finally{if(r)throw i}}return t},a.registerComponent=function(e){var t=a.getTabGirdRelationCode(e),n=(0,i.default)(e).filter((function(e){return e&&"form"===e.moduletype})).map((function(e){return e.code})),o=(0,i.default)(e).filter((function(e){return e&&"table"===e.moduletype})).map((function(e){return e.code})),l=(0,i.default)(e).filter((function(e){return e&&"search"===e.moduletype})).map((function(e){return e.code})),s=t&&(0,r.default)(t)||[];s.length&&t&&(0,i.default)(t).forEach((function(e){o=_.differenceBy(o,e)})),n.length&&a.props.use.form.apply(null,n),o.length&&a.props.use.editTable.apply(null,o),s.length&&a.props.use.cardTable.apply(null,s),l.length&&a.props.use.search.apply(null,l)},a.showModalHidden=function(){a.props.setModalVisibel(!1)},a.createDom=function(){var e=a.props,t=e.editTable,n=e.form,o=e.search,r=e.cardTable,l=n.createForm,i=t.createEditTable,s=o.NCCreateSearch,d=r.createCardTable,c=a.state.all_keys,p=[];return c.length&&c.map((function(e,t){switch(e.myAreaType){case"form":p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"form"+t},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"forms"+t}," ▼ "),""+e.name),l(e.id)));break;case"table":e.tabGirdRelationCode?p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),d(e.srcAreaCode))):p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),i(e.id,{})));break;case"search":p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"search"+t},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"searchs"+t}," ▼ "),""+e.name),s(e.id,{useCache:!1})))}})),p},a.state={all_keys:[],json:{},reRender:!1},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,k.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t}),E.call(e,t,e.afterInitTemplate)}})}},{key:"render",value:function(){var e=this.state,t=e.json,a=e.reRender;return m.default.createElement(b.default,{maskClosable:!1,customHeader:(0,v.langCheck)("ZoneSetting-000121","pages",t),visible:this.props.previewVisibel,onOk:this.onOkDialog,onCancel:this.showModalHidden,width:"98%",className:"viewPageTem",footer:null,fieldid:"preview"},a&&this.createDom())}}]),t}(f.Component);w=(0,y.createPage)({})(w),t.default=(0,h.connect)((function(e){return{areaList:e.zoneSettingData.areaList,previewData:e.zoneSettingData.previewData}}),{updatePreviewData:g.updatePreviewData})(w)},985:function(e,t,a){var n=a(986);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},986:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".viewPageTem .u-modal-content .u-modal-body{overflow:auto;padding:20px 0}.viewPageTem .u-modal-content .u-modal-body .printContent{padding:20px}.viewPageTem .u-modal-content .u-modal-body .total-table-wrapper>.u-table-content>.u-table-scroll>div:not(.u-table-footer)>.u-table-body{overflow:hidden!important}.viewPageTem .u-modal-content .viewTemplateArea{padding:0 20px}",""])}}]);
//# sourceMappingURL=TemplateSetting.js.map