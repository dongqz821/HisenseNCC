(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{1008:function(e,t,a){"use strict";(function(e){var n,o,r,l=m(a(169)),i=m(a(377)),d=m(a(21)),s=m(a(378)),c=m(a(927)),p=m(a(234)),u=m(a(136)),f=m(a(28));function m(e){return e&&e.__esModule?e:{default:e}}!function(l,i){"object"==(0,f.default)(t)&&"object"==(0,f.default)(e)?e.exports=i(a(919),a(1),a(9)):(o=[a(919),a(1),a(9)],void 0===(r="function"==typeof(n=i)?n.apply(t,o):n)||(e.exports=r))}(window,(function(e,t,a){return function(e){var t={};function a(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,a),o.l=!0,o.exports}return a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||(0,u.default)(e,t,{enumerable:!0,get:n})},a.r=function(e){void 0!==p.default&&c.default&&(0,u.default)(e,c.default,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==(void 0===e?"undefined":(0,f.default)(e))&&e&&e.__esModule)return e;var n=(0,s.default)(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../../../../",a(a.s=1)}([function(t,a){t.exports=e},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),(0,u.default)(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=a(2),r=m(o),l=(m(a(3)),a(0)),c=m(a(4)),p=a(5);function m(e){return e&&e.__esModule?e:{default:e}}var h=l.base.NCModal,g=l.base.NCButton,y=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=(void 0===t?"undefined":(0,f.default)(t))&&"function"!=typeof t?e:t}(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.callBack=function(){a.props.confirm(a.state.VaryID.refpk),a.props.close(a.state.VaryID.refpk)},a.onChange=function(e){a.setState({VaryID:e})},a.onClose=function(){a.props.close("close")},a.componentWillMount=function(){var e=a;(0,p.ctmsCheckClickCanUsed)(a.props.flag,null)?(0,l.ajax)({data:{code:a.props.flag},loading:!0,url:"/nccloud/riasm/change/ctmsconfig.do",success:function(t){t.data<0&&(e.props.confirm("undefined"),e.props.close("undefined")),e.setState({show:!0})},error:function(e){(0,l.toast)({color:"warning",content:e.message})}}):e.props.close("undefined")},a.state={VaryID:{},show:!1},a}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":(0,f.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(i.default?(0,i.default)(e,t):e.__proto__=t)}(t,e),n(t,[{key:"render",value:function(){return r.default.createElement("div",null,r.default.createElement(h,{show:this.state.show},r.default.createElement(h.Header,null,r.default.createElement(h.Title,null,"选择变更号")),r.default.createElement(h.Body,null,r.default.createElement(c.default,{value:this.state.VaryID,onChange:this.onChange})),r.default.createElement(h.Footer,null,r.default.createElement(g,{onClick:this.onClose},"关闭"),r.default.createElement(g,{onClick:this.callBack,color:"primary"},"确认"))))}}]),t}(o.Component);t.default=y},function(e,a){e.exports=t},function(e,t){e.exports=a},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0});var n=l.default||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={multiLang:{domainName:"uap",currentLocale:"zh-CN",moduleId:"uapRefer"},refType:"grid",refName:"变更号",placeholder:"变更号",queryGridUrl:"/nccloud/riasm/change/varyidref.do",isHasDisabledData:!1,columnConfig:[{name:["1880000025-000002","1880000025-000003"],code:["refcode","refname"]}]};return React.createElement(o,n({},t,e))};var o=a(0).high.Refer},function(e,t,a){Object.defineProperty(t,"__esModule",{value:!0}),t.ctmsCheckAppEnvIsProduct=t.ctmsCheckClickCanUsed=void 0;var n=a(0);t.ctmsCheckClickCanUsed=function(e,t){var a=!0;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/qrycurrentappcanused.do",data:e,async:!1,success:function(e){return 0==e.data.result&&(null==t||""==t?(0,n.toast)({color:"warning",content:e.data.msg}):(0,n.toast)({color:"warning",content:t}),a=!1),a},error:function(e){(0,n.toast)({color:"danger",content:e})}}),a},t.ctmsCheckAppEnvIsProduct=function(){var e=!1;return(0,n.ajax)({loading:!0,url:"/nccloud/riasm/ctmsconfig/systemtype.do",data:null,async:!1,success:function(t){return"product"==t.data&&(e=!0),e},error:function(e){(0,n.toast)({color:"danger",content:e.message})}}),e}}])}))}).call(this,a(235)(e))},1020:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var n=i(a(169));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(d,(0,n.default)(s,e))};var o=i(a(1)),r=a(919),l=a(19);function i(e){return e&&e.__esModule?e:{default:e}}var d=r.high.Refer,s=t.conf={placeholder:(0,l.langCheck)("0000PUB-000052"),rootNode:{refname:(0,l.langCheck)("0000PUB-000052"),refpk:"root"},refType:"tree",refName:(0,l.langCheck)("0000PUB-000053"),refCode:"uapbd.org.BusinessUnitAndGroupTreeRef",queryTreeUrl:"/nccloud/uapbd/ref/BusinessUnitAndGroupTreeRef.do",treeConfig:{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["refcode","refname"]},isMultiSelectedEnabled:!1,unitProps:{queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",refName:(0,l.langCheck)("0000PUB-000054"),rootNode:{refname:(0,l.langCheck)("0000PUB-000054"),refpk:"root"}},isShowUnit:!1}},1022:function(e,t,a){var n=a(1045);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},1023:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DynamicComponents=void 0,t.getDynamicComponent=function(e){window[e]||function(e){var t="/nccloud/resources/"+e+".js";(0,n.loadScript)(t)}(e);return window[e]&&window[e].default};var n=a(19);t.DynamicComponents={NCUploader:"uap/common/components/NCUploader/index"}},1025:function(e,t,a){e.exports=a.p+"images/noPage.png"},1026:function(e,t,a){e.exports=a.p+"images/noPrint.png"},1027:function(e,t,a){e.exports=a.p+"images/unSelected.png"},1039:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(a(11)),o=m(a(2)),r=m(a(17)),l=m(a(110)),i=m(a(77)),d=m(a(230)),s=m(a(14)),c=m(a(922));a(923),a(921);var p=a(1),u=m(p),f=m(a(229));function m(e){return e&&e.__esModule?e:{default:e}}var h=c.default.TreeNode;t.default=function(e){var t=e.treeData,a=e.rootNode,m=e.treeNodeItem,g=e.onLoadData,y=(0,s.default)(e,["treeData","rootNode","treeNodeItem","onLoadData"]),T=(0,p.useState)(t),k=(0,d.default)(T,2),b=k[0],v=k[1],w=JSON.parse((0,i.default)(a));return w[0].children=t,u.default.createElement(c.default,(0,o.default)({showLine:!0,showIcon:!0,loadData:function(e){return new l.default((function(a){if(!e.props.children)return"function"==typeof g?g(e.props.refData).then((function(n){Array.isArray(n)&&(e.props.refData.children=n,v([].concat((0,r.default)(t)))),a()})):void 0;a()}))}},y),function e(t){return t&&t.map((function(t){var a=m&&m(t),r=(0,o.default)({refData:t,icon:function(e){var t=e.expanded;return a.isLeaf?u.default.createElement("span",{className:"tree-dot"}):u.default.createElement(f.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return e.loading?u.default.createElement(n.default,{type:"loading"}):u.default.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})}},a);return t.children?u.default.createElement(h,r,e(t.children)):u.default.createElement(h,(0,o.default)({icon:u.default.createElement("span",{className:"tree-dot"})},r))}))}(a?w:b))}},1043:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(a(2)),o=l(a(169));t.handleDownload=function(e,t,a,l,i,d){var s=""+(window.actionName||"文件导出"),c=e.appcode,p={sys_busiaction:s,sys_appcode:c,sys_ts:(new Date).getTime()};a=function(e){switch(e){case 1:return"multipart/form-data";case 2:return"application/x-www-form-urlencoded";case 3:return"text/plain";default:return"multipart/form-data"}}(a);var u=[{target:l||"_blank",method:"POST",enctype:a,type:"hidden",action:t||""},document.createElement("form")],f=u[0],m=u[1];(0,o.default)(m,f);var h=(0,n.default)({},e,p),g=function(e){if(h[e]instanceof Array)h[e].forEach((function(t){var a=document.createElement("input");a.type="hidden",a.name=e,a.value=t,m.appendChild(a)}));else{var t=document.createElement("input");t.type="hidden",t.name=e,t.value=h[e],m.appendChild(t)}};for(var y in h)g(y);try{document.body.appendChild(m),m.submit(),document.body.removeChild(m),(0,r.default)({status:"success",msg:i||"导出成功"})}catch(e){(0,r.default)({status:"error",msg:d||"导出失败"})}return!1};var r=l(a(68));function l(e){return e&&e.__esModule?e:{default:e}}},1044:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=h(a(109)),o=h(a(3)),r=h(a(21)),l=h(a(5)),i=h(a(7)),d=h(a(4)),s=h(a(6));a(130);var c=a(1),p=h(c),u=h(a(364)),f=a(19),m=a(365);function h(e){return e&&e.__esModule?e:{default:e}}a(1022);var g=function(e){function t(e){(0,l.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.hideModal=function(){a.props.setXmlImportVisible()},a.ensureModal=function(){a.state.templatecode&&a.state.templatename&&(a.hideModal(),a.props.ensureModal(a.state))},a.state={templatecode:"",templatename:"",json:{}},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,m.getMulti)({moduleId:"10180TM",domainName:"workbench",callback:function(t){e.setState({json:t})}})}},{key:"changeVal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"templatename",t=arguments[1];this.setState((0,o.default)({},e,t.target.value))}},{key:"render",value:function(){var e=this.props.xmlImportVisible,t=this.state.json;return p.default.createElement("div",null,p.default.createElement(u.default,{customHeader:(0,f.langCheck)("10180TM-000080","pages",t),okText:(0,f.langCheck)("10180TM-000015","pages",t),cancelText:(0,f.langCheck)("10180TM-000016","pages",t),visible:e,onCancel:this.hideModal,onOk:this.ensureModal,maskClosable:!1,size:"sm",className:"xml-import-modal"},p.default.createElement("div",{className:"xml-import"},p.default.createElement("p",{className:"xml-form-label inline"},(0,f.langCheck)("10180TM-000069","pages",t),"："),p.default.createElement("div",{className:"xml-form-input inline"},p.default.createElement(n.default,{onChange:this.changeVal.bind(this,"templatename")}))),p.default.createElement("div",{className:"xml-import"},p.default.createElement("p",{className:"xml-form-label inline"},(0,f.langCheck)("10180TM-000070","pages",t),"："),p.default.createElement("div",{className:"xml-form-input inline"},p.default.createElement(n.default,{onChange:this.changeVal.bind(this,"templatecode")})))))}}]),t}(c.Component);t.default=g},1045:function(e,t,a){var n=a(236);(e.exports=a(12)(!1)).push([e.i,"body{background-color:#f0f2f5}*{box-sizing:border-box}.nc-workbench-templateSetting .nc-workbench-ownpage-left{padding-top:60px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree{padding:10px 20px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input{position:absolute;top:0;left:0;padding:20px 20px 10px;width:100%;display:flex;z-index:1}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input .sider-search-color .ant-input-search-icon{color:#e14c46;vertical-align:middle}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree-wrap{height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree{height:calc(100% - 40px);overflow-y:auto;margin-left:20px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .template-title{height:30px;font-size:15px;line-height:30px;padding-left:20px;margin-bottom:10px;background:#f4f4f4}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip{background:url("+n(a(1025))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{background:url("+n(a(1026))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip{background:url("+n(a(1027))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData{width:100%;height:100%;align-items:center;justify-content:center;display:flex}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{height:120px;line-height:280px;font-size:14px;color:#888;background-size:contain;text-align:center}.nc-workbench-templateSetting .ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#e14c46}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item .dropdown-item:focus{border:none}.ant-dropdown ul.ant-dropdown-menu li.u-dropdown-menu-item-disabled .dropdown-item{color:#ccc}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item:hover{background-color:#ebecf0}.nc-dropdown.u-dropdown .u-dropdown-menu{padding:4px 0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item{height:32px;line-height:32px;padding:0 10px;margin:0;color:#555;text-align:left}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item:focus{border:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled{color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled:hover{background-color:transparent;color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-selected{background-color:transparent}.copy-others-moudle .copy-others-modal-top{margin:4px 15px;position:relative}.copy-others-moudle .copy-others-modal-top .copy-others-modal-header{width:65px;height:21px;display:inline-block;font-size:13px;font-family:MicrosoftYaHei;color:#555;line-height:21px}.copy-others-moudle .copy-others-modal-top .copy-others-input{margin-left:8px;height:30px;font-size:13px;font-family:MicrosoftYaHei;color:#111;line-height:30px}.copy-others-moudle .copy-others-modal-top .areaCode-errorMsg,.copy-others-moudle .copy-others-modal-top .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:72px}.copy-others-moudle .copy-others-modal-bottom{overflow:hidden;margin-top:20px;display:flex}.copy-others-moudle .copy-others-modal-bottom .left{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .left .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .left .search{margin:10px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree{overflow:auto;height:275px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree .ant-tree{overflow:none}.copy-others-moudle .copy-others-modal-bottom .middle{display:flex;justify-content:center;align-items:center;margin:0 auto;width:10%}.copy-others-moudle .copy-others-modal-bottom .right{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .right .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .right .rightTree{overflow:auto;height:325px}.copy-others-moudle .copy-others-modal-bottom .right .rightTree .ant-tree{overflow:none}.tree-transfer-buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px}.tree-transfer-buttons .u-button{padding:0;width:32px;height:32px;min-width:32px;border-radius:3px}.tree-transfer-buttons .u-button:after{display:none!important}.tree-transfer-buttons .iconfont{font-size:12px}.tree-transfer-buttons .transfer-left-double,.tree-transfer-buttons .transfer-right-double{position:relative}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{position:absolute}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-1{left:6px}.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{right:6px}.margin-top-8{margin-top:8px}.margin-top-25{margin-top:25px}.ant-modal-body{padding:8px}.xml-import-modal .xml-import{margin-bottom:10px}.xml-import-modal .inline{display:inline-block}.xml-import-modal .xml-form-label{margin-right:5px}",""])},1051:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSearchTreeShow=t.setAsyncExpandedKeys=t.setTemplateType=t.setJson=t.setRoleUserDatas=t.setRoCheckedObjArray=t.setCopyId=t.setNodeKey=t.setOrgidObj=t.setTemplateTitleVal=t.setTemplateNameVal=t.setParentIdcon=t.setAppCode=t.setPageCode=t.setSearchValue=t.setTemplatePk=t.setSelectedTemKeys=t.setSelectedKeys=t.setExpandedKeys=t.setExpandedTemKeys=t.setDef1=t.setTreeTemPrintData=t.setTreeTemBillData=t.setTreeData=t.clearData=void 0;var n=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(391));t.clearData=function(){return{type:n.CLEARDATA}},t.setTreeData=function(e){return{type:n.SETTREEDATA,data:e}},t.setTreeTemBillData=function(e){return{type:n.SETTREETEMBILLDATA,data:e}},t.setTreeTemPrintData=function(e){return{type:n.SETTREETEMPRINTDATA,data:e}},t.setDef1=function(e){return{type:n.SETDEF1,data:e}},t.setExpandedTemKeys=function(e){return{type:n.EXPANDEDTEMKEYS,data:e}},t.setExpandedKeys=function(e){return{type:n.EXPANDEDKEYS,data:e}},t.setSelectedKeys=function(e){return{type:n.SELECTEDKEYS,data:e}},t.setSelectedTemKeys=function(e){return{type:n.SELECTEDTEMKEYS,data:e}},t.setTemplatePk=function(e){return{type:n.TEMPLATEPK,data:e}},t.setSearchValue=function(e){return{type:n.SEARCHVALUE,data:e}},t.setPageCode=function(e){return{type:n.PAGECODE,data:e}},t.setAppCode=function(e){return{type:n.APPCODE,data:e}},t.setParentIdcon=function(e){return{type:n.PARENTIDCON,data:e}},t.setTemplateNameVal=function(e){return{type:n.TEMPLATENAMEVAL,data:e}},t.setTemplateTitleVal=function(e){return{type:n.TEMPLATETITLEVAL,data:e}},t.setOrgidObj=function(e){return{type:n.ORGIDOBJ,data:e}},t.setNodeKey=function(e){return{type:n.NODEKEY,data:e}},t.setCopyId=function(e){return{type:n.COPYID,data:e}},t.setRoCheckedObjArray=function(e){return{type:n.ROCHECKEDOBJARRAY,data:e}},t.setRoleUserDatas=function(e){return{type:n.ROLEUSERDATAS,data:e}},t.setJson=function(e){return{type:n.JSON,data:e}},t.setTemplateType=function(e){return{type:n.TEMPLATETYPE,data:e}},t.setAsyncExpandedKeys=function(e){return{type:n.ASYNCEXPANDEDKEYS,data:e}},t.setSearchTreeShow=function(e){return{type:n.SETSEARCHTREESHOW,data:e}}},1082:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=a(169),r=(n=o)&&n.__esModule?n:{default:n};t.generateData=function(e){var t=[],a={};return e.map((function(e,n){var o=e.pid,r=e.code,l=e.name;e.appCode,e.pk;e.children&&delete e.children,e.text=r+" "+l,e.title=e.text,e.key=r,o?(a[o]||(a[o]=[]),a[o].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateTemData=function(e){var t=[],a={},n=[],o=[];return e.map((function(e,t){var a=e.templateId,r=(e.parentId,e.name),l=(e.type,e.code);e.children&&delete e.children,e.key=a,e.text=l+" "+r,e.pk=a,n.push(a),o.push(e)})),o.forEach((function(e){var o=e.templateId;n.includes(e.parentId)?(a[o]=[],a[o].push(e)):(e.children=[],t.push(e))})),{treeArray:t,treeObj:a}},t.generateRoData=function(e){var t=[];return e.map((function(e,a){var n=e.code,o=e.id,r=e.name;e.key=o,e.text=n+" "+r,e.title=e.text,t.push(e)})),t},t.generateTreeData=function e(t){return t.map((function(t,a){return(t=(0,r.default)({},t)).children?(t.isLeaf=!1,t.children=e(t.children)):t.isLeaf=!0,t}))}},1236:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.conf=void 0;var n=i(a(169));t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return o.default.createElement(d,(0,n.default)(s,e))};var o=i(a(1)),r=a(919),l=a(19);function i(e){return e&&e.__esModule?e:{default:e}}var d=r.high.Refer,s=t.conf={refType:"tree",refName:(0,l.langCheck)("0000PUB-000055"),refCode:"uapbd.refer.org.BusinessUnitTreeRef",rootNode:{refname:(0,l.langCheck)("0000PUB-000055"),refpk:"root"},placeholder:(0,l.langCheck)("0000PUB-000055"),queryTreeUrl:"/nccloud/uapbd/org/BusinessUnitTreeRef.do",treeConfig:{name:[(0,l.langCheck)("0000PUB-000032"),(0,l.langCheck)("0000PUB-000033")],code:["refcode","refname"]},isMultiSelectedEnabled:!1,isShowUnit:!1,queryCondition:function(){return{TreeRefActionExt:"nccloud.web.platform.workbench.ref.filter.OrgRefPermissionFilter"}},unitProps:{queryTreeUrl:"/nccloud/riart/ref/groupRefTreeAction.do",refType:"tree",refName:(0,l.langCheck)("0000PUB-000054"),rootNode:{refname:(0,l.langCheck)("0000PUB-000054"),refpk:"root"}}}},1237:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=E(a(17)),o=E(a(21)),r=E(a(5)),l=E(a(7)),i=E(a(4)),d=E(a(6)),s=E(a(109)),c=E(a(56));a(130),a(132);var p=a(1),u=E(p),f=a(37),m=E(a(0)),h=E(a(89)),g=E(a(35)),y=E(a(68)),T=E(a(1020)),k=a(1051),b=a(1082),v=a(1238),w=a(19),C=E(a(364)),x=E(a(26));function E(e){return e&&e.__esModule?e:{default:e}}var D=x.default.base,S=D.NCDiv,M=D.NCButton,N=D.NCTree,P=D.NCCheckbox,R=x.default.metaCache,A=R.getMetaCache,_=R.removeMetaCache,O=c.default.Option,j=N.NCTreeNode,I=s.default.Search,V=["abc1234567","abc2234567","abc3334567"],K=function(e){function t(e){(0,r.default)(this,t);var a=(0,i.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return a.reqAllowTreeData=function(){var e=a.state,t=e.org_df_biz,n=e.nodeKeyValue,o=a.props,r=o.templatePk,l=o.def1,i=o.pageCode,d=o.appCode,s=o.json,c={pageCode:i,orgId:t.refpk,templateId:r,appCode:d};"apppage"===l?c.templateType="bill":"menuitem"===l&&(c.templateType="print",c.pageCode&&delete c.pageCode,c.pageCode=n),(0,g.default)({url:"/nccloud/platform/template/listAssignmentsOfTemplate.do",info:{name:(0,w.langCheck)("10181TM-000000","pages",s),action:(0,w.langCheck)("10181TM-000001","pages",s)},data:c,success:function(e){var t=e.data;t.success&&a.setState({allowDataArray:t.data},a.restoreAllowedTree)}})},a.restoreAllowedTree=function(){var e=a.state,t=e.allowDataArray,n=e.treeAllowedData;t.map((function(e){e.text=e.code+"  "+e.name,e.key=e.id,e.pk=e.id})),n=(0,b.generateTreeData)(t),a.setState({treeAllowedData:n})},a.reqRoTreeData=function(e){var t=a.state.org_df_biz,n=a.props.json;if(t.refpk){var o=e?"/nccloud/platform/template/filterAllRoleUserAndResp.do":"/nccloud/platform/template/getAllRoleUserAndResp.do",r=e?{orgId:t.refpk,content:e}:{orgId:t.refpk};(0,g.default)({url:o,info:{name:(0,w.langCheck)("10181TM-000002","pages",n),action:(0,w.langCheck)("10181TM-000003","pages",n)},data:r,success:function(t){var n=t.data;n.success&&n.data&&((n.data.roles||n.data.users||n.data.resps)&&(a.restoreRoTreeData(n.data),e&&a.handleExpanded(n.data,e)),a.props.setRoleUserDatas(n.data),a.reqAllowTreeData())}})}},a.restoreRoTreeData=function(e){var t=a.state.treeRoData,n=a.props.json;t=[],v.initRoTreeData.text=(0,w.langCheck)("10181TM-000004","pages",n),v.initUserTreeData.text=(0,w.langCheck)("10181TM-000005","pages",n);var o=v.initRoTreeData,r=v.initUserTreeData;e.roles.map((function(e){e.type="roles"})),e.users.map((function(e){e.type="users"})),o.children=(0,b.generateRoData)(e.roles),r.children=(0,b.generateRoData)(e.users),t.push(o),t.push(r),t=(0,b.generateTreeData)(t),a.setState({treeRoData:t})},a.selectRoFun=function(e){var t=a.state.roCheckedKeys,o=e.node.props.refData.key,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({roCheckedKeys:[].concat((0,n.default)(t))},a.lookCheckDataFun)},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].id==e[o].id&&++a;t.push(e[a])}return t},a.allowClick=function(e){var t=a.state,n=t.allowDataArray,o=t.treeAllowedData,r=t.allowedCheckedKeys,l=a.props,i=l.roCheckedObjArray,d=l.json;switch(e){case"allowRole":if(i&&0===i.length)return void(0,y.default)({status:"warning",msg:(0,w.langCheck)("10181TM-000006","pages",d)});n=n.concat(i),n=a.arrayUnique(n),o=(0,b.generateTreeData)(n);break;case"allowRoleCancel":if(r&&0===r.length)return void(0,y.default)({status:"warning",msg:(0,w.langCheck)("10181TM-000006","pages",d)});Array.prototype.remove=function(e){var t=this.indexOf(e);t>-1&&this.splice(t,1)};for(var s=r.length-1;s>=0;s--)for(var c=0;c<n.length;c++)r[s]&&n[c].id===r[s]&&n.remove(n[c]);o=(0,b.generateTreeData)(n)}a.setState({treeAllowedData:o,allowDataArray:n,allowedCheckedKeys:r})},a.onSelectedAllow=function(e){var t=a.state.allowedCheckedKeys,o=e.node.props.refData.id,r=t.indexOf(o);r>-1?t.splice(r,1):t.push(o),a.setState({allowedCheckedKeys:[].concat((0,n.default)(t))})},a.onSelect=function(e,t){switch(e){case"resOnselect":a.selectRoFun(t);break;case"allowedOnselect":a.onSelectedAllow(t)}},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.handleExpanded=function(e,t){var n=[];for(var o in e)e.hasOwnProperty(o)&&("users"!==o&&"roles"!==o||e[o].map((function(e){e.text=e.code+"  "+e.name,e.text.indexOf(t)>-1&&n.push(e.key)})));n.push("abc1234567"),n.push("abc2234567"),a.setState({expandedKeys:n,roleSearchValue:t,autoExpandParent:!0})},a.onSearch=function(){var e=a.state.roleSearchValue;e?a.reqRoTreeData(e):(a.reqRoTreeData(),a.setState({expandedKeys:[]}))},a.hanldeDoubleClick=function(e,t){var n=void 0,o=[];"resOnselect"===e&&(n=t.props.refData.key,o=a.state.expandedKeys.concat([n]),a.setState({expandedKeys:o}))},a.onCheck=function(e,t){switch(e){case"resOnselect":a.onCheckRoFun(t);break;case"allowedOnselect":a.onCheckAllowedFun(t)}},a.onCheckRoFun=function(e){var t=e.filter((function(e){return!V.includes(e)}));a.setState({roCheckedKeys:t},a.lookCheckDataFun)},a.lookCheckDataFun=function(){var e=a.state.roCheckedKeys,t=a.props.roleUserDatas,n=e.filter((function(e){return"abc1234567"!==e&&"abc2234567"!==e})),o=[];n.map((function(e){var a={},n=function(n){t[n].map((function(t){t.id===e&&(a.key=t.id,a.pk=t.id,a.text=t.code+"  "+t.name,a.code=t.code,a.id=t.id,"users"===n?a.type="user":"roles"===n&&(a.type="role"))}))};for(var r in t)n(r);o.push(a)})),a.props.setRoCheckedObjArray(o)},a.onCheckAllowedFun=function(e){a.setState({allowedCheckedKeys:e})},a.handleSearchDel=function(){var e=a.props.roleUserDatas;a.restoreRoTreeData(e),a.setState({roleSearchValue:"",expandedKeys:[]})},a.treeResAndUser=function(e,t,n,o,r){var l=a.state,i=l.expandedKeys,d=l.autoExpandParent,s=l.treeAllowedData,c=a.props.json;return u.default.createElement("div",{className:r||""},n?"":u.default.createElement("div",{className:"fixed-search-input"},u.default.createElement(I,{style:{marginBottom:8,marginTop:8},placeholder:(0,w.langCheck)("10181TM-000007","pages",c),onSearch:a.onSearch,onChange:function(e){a.setState({roleSearchValue:e.target.value}),""===e.target.value&&(a.reqRoTreeData(),a.setState({expandedKeys:[]}))},value:o,suffix:o.length>0?u.default.createElement("i",{className:"iconfont icon-qingkong",onClick:a.handleSearchDel}):"",fieldid:"search"})),e.length>0&&u.default.createElement(S,{fieldid:n?"allocationRight":"allocationLeft",areaCode:S.config.TreeCom,className:"allocationLeft_tree_content"},u.default.createElement(N,{showLine:!0,checkable:!0,onExpand:a.onExpand,expandedKeys:i,onSelect:function(e,n){a.onSelect(t,n)},autoExpandParent:d,onDoubleClick:function(e,n){a.hanldeDoubleClick(t,n)},onCheck:function(e){a.onCheck(t,e)},checkedKeys:"resOnselect"==t?a.state.roCheckedKeys:"allowedOnselect"==t?a.state.allowedCheckedKeys:""},function e(a){return a.map((function(a){var n=a.text,r=a.id,l=void 0,d=!1;if(s.map((function(e){e.key===r&&(d=!0)})),"resOnselect"===t){var c=n.indexOf(o),p=n.substr(0,c),f=n.substr(c+o.length);l=c>-1?u.default.createElement("span",null,a.children?u.default.createElement("span",{className:"tree-switch-icon iconfont "+(i.includes(r)?"icon-wenjianjiadakai":"icon-wenjianjia")}):u.default.createElement("span",{className:"tree-dot"}),p,u.default.createElement("span",{style:{color:"#f50"}},o),f):u.default.createElement("span",null,u.default.createElement("span",null," ",n," "))}else"allowedOnselect"===t&&(l=n);var m=a.children?"fieldid_"+n+"_node":"fieldid_"+a.code+"_node";return a.children&&a.children.length>0?u.default.createElement(j,{key:r,title:l,refData:a,className:m},e(a.children)):u.default.createElement(j,{key:r,title:l,refData:a,className:m,disabled:"resOnselect"===t&&d})}))}(e))))},a.handleAlloOk=function(){var e=a.state,t=e.treeAllowedData,n=e.org_df_biz,o=e.nodeKeyValue,r=a.props,l=r.templatePk,i=r.def1,d=r.pageCode,s=r.appCode,c=r.json;if(n.refpk)if(t){for(var p={},u=0;u<t.length;u++){var f=t[u];for(var m in f)"id"===m&&(p[f[m]]=f.type)}var h="";for(var T in p)h=h+(T+":")+p[T]+",";var k=h.length;h=h.substr(0,k-1);var b={pageCode:d,templateId:l,orgId:n.refpk,appCode:s};b.targets=h,"apppage"===i?b.templateType="bill":"menuitem"===i&&(b.templateType="print",b.pageCode&&delete b.pageCode,o&&(b.pageCode=o)),(0,g.default)({url:"/nccloud/platform/template/assignTemplate.do",data:b,info:{name:(0,w.langCheck)("10181TM-000009","pages",c),action:(0,w.langCheck)("10181TM-000010","pages",c)},success:function(e){e.data.success&&((0,y.default)({status:"success",msg:(0,w.langCheck)("10181TM-000011","pages",c)}),a.props.setAssignModalVisible(!1),A(s,d)&&_(s,d))}})}else(0,y.default)({status:"warning",msg:(0,w.langCheck)("10181TM-000006","pages",c)});else(0,y.default)({status:"warning",msg:(0,w.langCheck)("10181TM-000008","pages",c)})},a.handleOrlCancel=function(){a.props.setAssignModalVisible(!1)},a.handdleRefChange=function(e){var t=a.state.org_df_biz,n=e.refname,o=e.refcode,r=e.refpk;t.refname=n,t.refcode=o,t.refpk=r,a.setState({org_df_biz:t},a.reqRoTreeData)},a.handleCheckAllAllowed=function(e){var t=e?a.state.treeAllowedData.map((function(e){return e.key})):[];a.setState({allowedCheckedKeys:t})},a.state={expandedKeys:[],roleSearchValue:"",autoExpandParent:!0,nodeKeyValue:a.props.nodeKey&&a.props.nodeKey.length>0?a.props.nodeKey[0]:"",treeRoData:[],allowDataArray:[],org_df_biz:h.default.cloneDeep(a.props.orgidObj),treeAllowedData:[],allowedTreeKey:"",roCheckedKeys:[],allowedCheckedKeys:[]},a}return(0,d.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.state.org_df_biz.refpk&&this.reqRoTreeData()}},{key:"render",value:function(){var e=this,t=this.state,a=t.treeRoData,n=t.treeAllowedData,o=t.org_df_biz,r=t.roleSearchValue,l=t.allowedCheckedKeys,i=this.props,d=i.def1,s=i.nodeKey,p=i.pageCode,f=i.json;return console.log(this.state),u.default.createElement(C.default,{dialogClassName:"allocation-modal",title:(0,w.langCheck)("10181TM-000012","pages",f),visible:this.props.alloVisible,onOk:this.handleAlloOk,onCancel:this.handleOrlCancel,width:720,maskClosable:!1,okText:(0,w.langCheck)("10181TM-000013","pages",f),cancelText:(0,w.langCheck)("10181TM-000014","pages",f),fieldid:"allocation"},u.default.createElement("div",{className:"allocationPage"},u.default.createElement("div",{className:"pageCode-show"},u.default.createElement("p",{className:"pageCodeName"},f["10181TM-000017"],u.default.createElement("span",null,p||"")),"menuitem"===d&&u.default.createElement("div",null,u.default.createElement("label",{htmlFor:""},(0,w.langCheck)("10181TM-000018","pages",f)),u.default.createElement(c.default,{notFoundContent:(0,w.langCheck)("10181TM-000081","pages",f),showSearch:!0,style:{width:200},placeholder:(0,w.langCheck)("10181TM-000015","pages",f),optionFilterProp:"children",fieldid:"search",onSelect:function(t){e.setState({nodeKeyValue:t},(function(){e.reqAllowTreeData()}))},onChange:function(){return e.setState({treeAllowedData:[],allowDataArray:[],allowedCheckedKeys:[]})},defaultValue:null==s?"":s[0],filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},s&&s.length>0&&s.map((function(e){if(e)return u.default.createElement(O,{value:e},e)}))))),u.default.createElement("div",{className:"allocationPage-content"},u.default.createElement("div",{className:"allocation-select"},u.default.createElement("div",null,u.default.createElement("label",{htmlFor:""},(0,w.langCheck)("10181TM-000019","pages",f)),u.default.createElement(T.default,{value:o,placeholder:(0,w.langCheck)("10181TM-000016","pages",f),fieldid:"businessUnit",onChange:function(t){e.handdleRefChange(t)}}))),u.default.createElement("div",{className:"allocationPage-content-tree"},u.default.createElement(S,{className:"allocation-treeScrollName",fieldid:"allocationLeft",areaCode:S.config.TREE},this.treeResAndUser(a,"resOnselect",null,r,"searchTree-assign")),u.default.createElement("div",{className:"allocation-button"},u.default.createElement("p",null,u.default.createElement(M,{fieldid:"toRight",onClick:this.allowClick.bind(this,"allowRole")},u.default.createElement("i",{className:"icon iconfont icon-jiantouyou"}))),u.default.createElement("p",null,u.default.createElement(M,{fieldid:"toLeft",onClick:this.allowClick.bind(this,"allowRoleCancel")},u.default.createElement("i",{className:"icon iconfont icon-jiantouzuo"})))),u.default.createElement("div",{className:"allocation-treeContainer"},u.default.createElement(P,{checked:0!==l.length&&l.length===n.length,indeterminate:0!==l.length&&l.length<n.length,onChange:this.handleCheckAllAllowed},(0,w.langCheck)("10181TM-000085","pages",f)," "),n.length>0&&this.treeResAndUser(n,"allowedOnselect","hideSearch"))))))}}]),t}(p.Component);K.propTypes={templatePk:m.default.string.isRequired,roCheckedObjArray:m.default.array.isRequired,setRoCheckedObjArray:m.default.func.isRequired,setRoleUserDatas:m.default.func.isRequired,nodeKey:m.default.array.isRequired,roleUserDatas:m.default.object.isRequired,orgidObj:m.default.object.isRequired},t.default=(0,f.connect)((function(e){return{templatePk:e.TemplateSettingUnitData.templatePk,def1:e.TemplateSettingUnitData.def1,nodeKey:e.TemplateSettingUnitData.nodeKey,appCode:e.TemplateSettingUnitData.appCode,pageCode:e.TemplateSettingUnitData.pageCode,roCheckedObjArray:e.TemplateSettingUnitData.roCheckedObjArray,roleUserDatas:e.TemplateSettingUnitData.roleUserDatas,orgidObj:e.TemplateSettingUnitData.orgidObj,json:e.TemplateSettingUnitData.json}}),{setRoCheckedObjArray:k.setRoCheckedObjArray,setRoleUserDatas:k.setRoleUserDatas})(K)},1238:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.initRoTreeData={id:"abc1234567",text:"",children:[]},t.initUserTreeData={id:"abc2234567",text:"",children:[]},t.initRoTreeData2={id:"abc1234567",text:"",children:[]},t.initUserTreeData2={id:"abc2234567",text:"",children:[]}},1239:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=k(a(109)),r=k(a(21)),l=k(a(5)),i=k(a(7)),d=k(a(4)),s=k(a(6));a(130);var c=a(1),p=k(c),u=k(a(0)),f=a(37),m=a(1051),h=a(19),g=k(a(35)),y=k(a(68)),T=k(a(364));function k(e){return e&&e.__esModule?e:{default:e}}var b=(0,k(a(975)).default)((function(e,t){t.copyTemplate(e)}))(n=function(e){function t(e){(0,l.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.checkCode=function(){var e=a.props,t=e.json,n=e.templateTitleVal;if(!a.trim(n))return document.getElementById("templateCode").classList.add("has-error"),void a.setState({codeErrorMsg:(0,h.langCheck)("10181TM-000020","pages",t)});document.getElementById("templateCode").classList.remove("has-error"),a.setState({codeErrorMsg:""})},a.checkName=function(){var e=a.props,t=e.json,n=e.templateNameVal;if(!a.trim(n))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,h.langCheck)("10181TM-000062","pages",t)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e="menuitem"===a.props.def1?"printtemplate":void 0;a.props.showVaryModal(e)},a.copyTemplate=function(e){var t=a.props,n=t.orgidObj,o=t.def1,r=t.templatePk,l=t.pageCode,i=t.appCode,d=t.templateNameVal,s=t.templateTitleVal,c=t.setSelectedTemKeys,p=t.setParentIdcon,u=t.setTemplateNameVal,f=t.setTemplatePk,m=t.setTemplateTitleVal,T=t.setCopyId,k=t.json,b=t.setTemplateType;if(a.trim(d)){var v={pageCode:l,templateId:r,name:d,appCode:i,orgId:n.refpk,varyId:e},w=void 0;if("apppage"===o)v.templateType="bill",w="/nccloud/platform/template/copyTemplate.do";else if("menuitem"===o){if(!a.trim(s))return;v.templateType="print",v.templateCode=s,w="/nccloud/platform/template/copyPrintTemplate.do"}var C=a;(0,h.DeferFn)((function(){(0,g.default)({url:w,data:v,loading:!0,info:{name:(0,h.langCheck)("10181TM-000009","pages",k),action:(0,h.langCheck)("10181TM-000021","pages",k)},success:function(e){var t=e.data;t.success&&((0,y.default)({status:"success",msg:(0,h.langCheck)("10181TM-000022","pages",k)}),c([t.data.id]),p("apppage"===o?t.data.data.parentid:t.data.parentid),u(t.data.name),f(t.data.id),T(t.data.id),b("org"),"menuitem"===o&&m(t.data.code),C.props.reqTreeTemData("copy"),C.handleCancel())}})}))}},a.handleCancel=function(){a.props.setCopyVisible(!1)},a.state={codeErrorMsg:"",ErrorMsg:""},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props,a=t.def1,n=t.treeTemPrintData,r=t.templateTitleVal,l=t.templateNameVal,i=t.json,d=this.state,s=d.codeErrorMsg,c=d.nameErrorMsg;return p.default.createElement(T.default,{mask:!0,wrapClassName:"copyModal",title:(0,h.langCheck)("10181TM-000052","pages",i),visible:this.props.visible,onOk:this.handleOk,okText:(0,h.langCheck)("10181TM-000013","pages",i),cancelText:(0,h.langCheck)("10181TM-000014","pages",i),onCancel:this.handleCancel,maskClosable:!1,fieldid:"copy"},p.default.createElement("div",{className:"copyTemplate",style:"apppage"===a?{padding:"60px 20px"}:{}},"menuitem"==a&&n.length>0&&p.default.createElement("div",{className:"templateCode"},p.default.createElement("label",{htmlFor:""},(0,h.langCheck)("10181TM-000026","pages",i)),p.default.createElement(o.default,{style:{width:"80%"},value:r,id:"templateCode",onBlur:this.checkCode,placeholder:(0,h.langCheck)("10181TM-000024","pages",i),fieldid:"templateCode",onChange:function(t){var a=t.target.value;e.props.setTemplateTitleVal(a)}}),p.default.createElement("p",{className:"areaCode-errorMsg"},s)),p.default.createElement("div",{className:"templateName"},p.default.createElement("label",{htmlFor:""},(0,h.langCheck)("10181TM-000027","pages",i)),p.default.createElement(o.default,{value:l,style:{width:"80%"},id:"templateName",onBlur:this.checkName,placeholder:(0,h.langCheck)("10181TM-000025","pages",i),fieldid:"templateName",onChange:function(t){var a=t.target.value;e.props.setTemplateNameVal(a)}}),p.default.createElement("p",{className:"areaName-errorMsg"},c))))}}]),t}(c.Component))||n;b.propTypes={templatePk:u.default.string.isRequired,pageCode:u.default.string.isRequired,appCode:u.default.string.isRequired,def1:u.default.string.isRequired,templateTitleVal:u.default.string.isRequired,templateNameVal:u.default.string.isRequired},t.default=(0,f.connect)((function(e){return{templatePk:e.TemplateSettingUnitData.templatePk,pageCode:e.TemplateSettingUnitData.pageCode,appCode:e.TemplateSettingUnitData.appCode,def1:e.TemplateSettingUnitData.def1,templateTitleVal:e.TemplateSettingUnitData.templateTitleVal,templateNameVal:e.TemplateSettingUnitData.templateNameVal,treeTemPrintData:e.TemplateSettingUnitData.treeTemPrintData,orgidObj:e.TemplateSettingUnitData.orgidObj,json:e.TemplateSettingUnitData.json}}),{setSelectedTemKeys:m.setSelectedTemKeys,setParentIdcon:m.setParentIdcon,setTemplateNameVal:m.setTemplateNameVal,setTemplatePk:m.setTemplatePk,setTemplateTitleVal:m.setTemplateTitleVal,setCopyId:m.setCopyId,setTemplateType:m.setTemplateType})(b)},1240:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=x(a(2)),r=x(a(171)),l=x(a(112)),i=x(a(17)),d=x(a(21)),s=x(a(5)),c=x(a(7)),p=x(a(4)),u=x(a(6)),f=x(a(109));a(130);var m=a(1),h=x(m),g=x(a(0)),y=a(37),T=a(19),k=x(a(35)),b=x(a(68)),v=x(a(364)),w=x(a(26)),C=x(a(975));function x(e){return e&&e.__esModule?e:{default:e}}var E=w.default.base,D=E.NCDiv,S=E.NCButton,M=E.NCTree,N=M.NCTreeNode,P=f.default.Search,R=(0,C.default)((function(e,t){t.copyOthers(e)}))(n=function(e){function t(e){(0,s.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.checkName=function(){var e=a.props.json,t=a.state.templateName;if(!a.trim(t))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,T.langCheck)("10181TM-000062","pages",e)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.arrayUnique=function(e){for(var t=[],a=0,n=e.length;a<n;a++){for(var o=a+1;o<n;o++)e[a].pk==e[o].pk&&++a;t.push(e[a])}return t},a.isPartSelectedLeft=function(){var e=a.state,t=e.checkedKeys,n=e.saveLeafArr,o=e.requestLeftTreeData,d=e.treeData,s=e.rightTreeData,c=[],p=[],u=[],f=[];console.log("checkedKeys----",t),console.log("saveLeafArr----",n),console.log("requestLeftTreeData----",o);var m=[].concat((0,i.default)(t)),h=(0,T.deepClone)(d),g=(0,T.deepClone)(o);t.length>0&&(t.map((function(e){h.map((function(t){t.children.map((function(a){e==a.pk&&m.push(t.pk)}))}))})),(m=(0,l.default)(new r.default(m))).forEach((function(e){g.map((function(t){e==t.pk&&c.push(t)}))})),console.log("checkedArr----",c),c.forEach((function(e){e.isleaf?(e.children=[],f.push(e)):(e.children=[],u.push(e))})),u.forEach((function(e){f.map((function(t){e.code==t.pid&&e.children.push(t)}))})),p=a.arrayUnique(s.concat(u)),t=a.removeTreeRootPk(d,u,t),console.log("checkedTree----",p),a.setState({rightTreeData:p,rightCheckedKeys:[],checkedKeys:t}))},a.isPartSelectedRight=function(){var e=a.state,t=e.rightCheckedKeys,n=e.rightTreeData,o=(0,T.deepClone)(n);t.length>0&&(t.map((function(e){o.map((function(t,a){e==t.pk?o.splice(a,1):t.children.map((function(a,n){e==a.pk&&t.children.splice(n,1)}))}))})),console.log("partRightTreeArr---",o),a.setState({rightTreeData:o}))},a.isAllSelectedLeft=function(){console.log("this.state.saveLeafArr",a.state.saveLeafArr),a.setState({rightTreeData:a.state.treeData,rightCheckedKeys:[]})},a.isAllSelectedRight=function(){a.setState({rightTreeData:[],rightCheckedKeys:[]})},a.onExpand=function(e){a.setState({expandedKeys:e,autoExpandParent:!1})},a.onCheck=function(e){a.setState({checkedKeys:e})},a.onRightCheck=function(e){a.setState({rightCheckedKeys:e})},a.onSelect=function(e){a.setState({selectedKeys:e})},a.removeTreeRootPk=function(e,t,a){var n=[].concat((0,i.default)(a)),o=t[0].pk;return t[0].children.length!==e[0].children.length&&(n=n.filter((function(e){return e!==o}))),n},a.renderTreeNodes=function(e){return e.map((function(e){var t=a.state.searchValue,n=e.name,r=void 0;if(""!=t){var l=n.indexOf(t),i=n.substr(0,l),d=n.substr(l+t.length);r=l>-1?h.default.createElement("span",null,i,h.default.createElement("span",{style:{color:"#f50"}},t),d):h.default.createElement("span",null,h.default.createElement("span",null," ",n," "))}else r=n;var s="fieldid_"+n+"_node";return e.children?h.default.createElement(N,{title:r,key:e.pk,dataRef:e,className:s},a.renderTreeNodes(e.children)):h.default.createElement(N,(0,o.default)({},e,{className:s}))}))},a.rightRenderTreeNodes=function(e){return e.map((function(e){var t="fieldid_"+e.name+"_node";return e.children?h.default.createElement(N,{title:e.name,key:e.pk,dataRef:e,className:t},a.renderTreeNodes(e.children)):h.default.createElement(N,(0,o.default)({},e,{className:t}))}))},a.handleOk=function(){a.props.showVaryModal()},a.copyOthers=function(e){var t=a.props,n=t.templatePk,o=t.json,r=t.orgidObj,l=a.state,i=l.templateName,d=l.rightTreeData;if(""!=i){var s=(0,T.deepClone)(d);s.map((function(e){e.children.map((function(e){e.pageCode=e.code,delete e.appId,delete e.appCode,delete e.pk,delete e.name,delete e.pid,delete e.isleaf,delete e.children,delete e.code})),e.pageCodes=e.children,delete e.appId,delete e.pk,delete e.code,delete e.name,delete e.pid,delete e.isleaf,delete e.children}));var c={templateId:n,templateName:i,templateType:"bill",appAndPageCodes:s,orgId:r.refpk,varyId:e},p=a;(0,T.DeferFn)((function(){(0,k.default)({url:"/nccloud/platform/template/copyTemplateToOtherAppsAction.do",data:c,loading:!0,info:{name:(0,T.langCheck)("10181TM-000009","pages",o),action:(0,T.langCheck)("10181TM-000021","pages",o)},success:function(e){var t=e.data;t.success&&((0,b.default)({status:"success",msg:t.data}),p.props.reqTreeTemData("copyOthersApp"),p.handleCancel())}})}))}},a.handleCancel=function(){a.props.setCopyOthersVisible(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.searchOnChange=function(e){var t=e.target.value;a.setState({searchValue:t});var n=a.state,o=n.searchTreeDataSave,r=n.requestLeftTreeData;if(""!=t){var l=(0,T.deepClone)(r).filter((function(e){return e.isleaf?e.name.indexOf(t)>-1?e:void 0:e})),i=[],d=[];l.map((function(e){e.children=[],e.isleaf?d.push(e):i.push(e)})),i.forEach((function(e){d.map((function(t){e.code==t.pid&&e.children.push(t)}))}));var s=i.filter((function(e){if(e.children.length>0)return e}));console.log("newTree=------------",s);var c=(0,T.deepClone)(s);a.setState({treeData:c})}else a.setState({treeData:o})},a.state={nameErrorMsg:"",templateName:a.props.templateNameVal,treeData:[],searchTreeDataSave:[],selectedKeys:[],checkedKeys:[],expandedKeys:[],autoExpandParent:!1,saveLeafArr:[],generateRightTreeData:[],rightTreeData:[],rightCheckedKeys:[],requestLeftTreeData:[],searchValue:""},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props,a=t.appCode,n=t.json,o=t.orgidObj;(0,k.default)({data:{appCode:a,orgId:o.refpk},url:"/nccloud/platform/template/queryAppAndPagesAction.do",loading:!0,info:{name:(0,T.langCheck)("10181TM-000009","pages",n),action:(0,T.langCheck)("10181TM-000065","pages",n)},success:function(t){var a=t.data;if(a.success){var n=[],o=[],r=(0,T.deepClone)(a.data);a.data.map((function(e){e.isleaf?(e.children=[],o.push(e)):(e.children=[],n.push(e))})),console.log("isAllRootNode",n),console.log("isAllLeafNode",o),n.forEach((function(e){o.map((function(t){e.code==t.pid&&e.children.push(t)}))})),console.log("isAllRootNode====",n),console.log("isAllLeafNode====",o),e.setState({treeData:n,searchTreeDataSave:n,saveLeafArr:o,requestLeftTreeData:r})}}})}},{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.templateNameVal,a=e.json;console.log("templateNameVal",t);var n=this.state,o=n.templateName,r=n.treeData,l=n.autoExpandParent,i=n.rightTreeData,d=n.nameErrorMsg;return h.default.createElement(v.default,{mask:!0,title:(0,T.langCheck)("10181TM-000065","pages",a),visible:this.props.copyOthersModalVisible,onOk:this.handleOk,okText:(0,T.langCheck)("10181TM-000013","pages",a),cancelText:(0,T.langCheck)("10181TM-000014","pages",a),onCancel:this.handleCancel,maskClosable:!1,width:720,className:"copy-others-moudle",fieldid:"copyOther"},h.default.createElement("div",{className:"copy-others-modal-top"},h.default.createElement("div",{className:"copy-others-modal-header"},(0,T.langCheck)("10181TM-000027","pages",a)),h.default.createElement(f.default,{className:"copy-others-input",style:{width:"45%"},placeholder:(0,T.langCheck)("10181TM-000064","pages",a),defaultValue:t,onChange:this.onChangeTemplateName,id:"templateName",value:o,onBlur:this.checkName,fieldid:"templateName"}),h.default.createElement("p",{className:"areaName-errorMsg"},d)),h.default.createElement(D,{className:"copy-others-modal-bottom",fieldid:"transfer",areaCode:D.config.Area},h.default.createElement(D,{className:"left",fieldid:"left",areaCode:D.config.TREE},h.default.createElement("div",{className:"title"},(0,T.langCheck)("10181TM-000066","pages",a)),h.default.createElement(P,{className:"search",onChange:this.searchOnChange,fieldid:"search"}),h.default.createElement(D,{className:"leftTree",fieldid:"left",areaCode:D.config.TreeCom},h.default.createElement(M,{checkable:!0,checkStrictly:!1,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,onExpand:this.onExpand,expandedKeys:this.state.expandedKeys,onSelect:this.onSelect,selectedKeys:this.state.selectedKeys,checkedKeys:this.state.checkedKeys,onCheck:this.onCheck},this.renderTreeNodes(r)))),h.default.createElement("div",{className:"middle"},h.default.createElement("div",{className:"tree-transfer-buttons"},h.default.createElement(S,{className:"transfer-right ",fieldid:"toRight",onClick:this.isPartSelectedLeft},h.default.createElement("i",{className:"iconfont icon-jiantouyou"})),h.default.createElement(S,{className:"transfer-right-double margin-top-8",fieldid:"toRightAll",onClick:this.isAllSelectedLeft},h.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouyou"}),h.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouyou"})),h.default.createElement(S,{className:"transfer-left-double margin-top-25",fieldid:"toLeft",onClick:this.isAllSelectedRight},h.default.createElement("i",{className:"transfer-icon-1 iconfont icon-jiantouzuo"}),h.default.createElement("i",{className:"transfer-icon-2 iconfont icon-jiantouzuo"})),h.default.createElement(S,{className:"transfer-left margin-top-8",fieldid:"toRightAll",onClick:this.isPartSelectedRight},h.default.createElement("i",{className:"iconfont icon-jiantouzuo"})))),h.default.createElement("div",{className:"right"},h.default.createElement("div",{className:"title"},(0,T.langCheck)("10181TM-000067","pages",a)),h.default.createElement(D,{className:"rightTree",fieldid:"right",areaCode:D.config.TreeCom},h.default.createElement(M,{checkable:!0,loadData:this.onLoadData,showLine:!0,multiple:!0,autoExpandParent:l,checkedKeys:this.state.rightCheckedKeys,onCheck:this.onRightCheck},this.rightRenderTreeNodes(i))))))}}]),t}(m.Component))||n;R.propTypes={templatePk:g.default.string.isRequired,pageCode:g.default.string.isRequired,appCode:g.default.string.isRequired,def1:g.default.string.isRequired,templateTitleVal:g.default.string.isRequired,templateNameVal:g.default.string.isRequired,json:g.default.object.isRequired},t.default=(0,y.connect)((function(e){return{templatePk:e.TemplateSettingUnitData.templatePk,pageCode:e.TemplateSettingUnitData.pageCode,appCode:e.TemplateSettingUnitData.appCode,def1:e.TemplateSettingUnitData.def1,templateTitleVal:e.TemplateSettingUnitData.templateTitleVal,templateNameVal:e.TemplateSettingUnitData.templateNameVal,treeTemPrintData:e.TemplateSettingUnitData.treeTemPrintData,json:e.TemplateSettingUnitData.json,orgidObj:e.TemplateSettingUnitData.orgidObj}}),{})(R)},1241:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=k(a(109)),r=k(a(21)),l=k(a(5)),i=k(a(7)),d=k(a(4)),s=k(a(6));a(130);var c=a(1),p=k(c),u=k(a(0)),f=a(37),m=a(19),h=k(a(35)),g=k(a(68)),y=k(a(364)),T=a(1051);function k(e){return e&&e.__esModule?e:{default:e}}var b=(0,k(a(975)).default)((function(e,t){t.renameTemplate(e)}))(n=function(e){function t(e){(0,l.default)(this,t);var a=(0,d.default)(this,(t.__proto__||(0,r.default)(t)).call(this,e));return a.trim=function(e){if(e)return e.trim()},a.checkName=function(){var e=a.props.json,t=a.state.templateName;if(!a.trim(t))return document.getElementById("templateName").classList.add("has-error"),void a.setState({nameErrorMsg:(0,m.langCheck)("10181TM-000062","pages",e)});a.setState({nameErrorMsg:""}),document.getElementById("templateName").classList.remove("has-error")},a.handleOk=function(){var e="menuitem"===a.props.def1?"printtemplate":void 0;a.props.showVaryModal(e)},a.renameTemplate=function(e){var t=a.props,n=t.templatePk,o=t.templateNameVal,r=t.templateTitleVal,l=t.json,i=t.saveLeftArrTS,d=t.orgidObj,s=t.def1,c=a.state.templateName;if(a.trim(o)&&""!=c){a.props.setTemplateNameVal(c);var p="";1==i.length?i.map((function(e){p=e.ts})):i.length>1&&i.map((function(e){n==e.templateId&&(p=e.ts)})),document.getElementById("templateName").classList.remove("has-error");var u=void 0,f=void 0;"menuitem"===s?(u="/nccloud/platform/templet/templaterename.do",f={templateid:n,templatecode:r,templatename:c,ts:p}):(u="/nccloud/platform/template/resetTemplateNameAction.do",f={templateId:n,templateName:c,ts:p,orgId:d.refpk,varyId:e});var y=a;(0,m.DeferFn)((function(){(0,h.default)({url:u,data:f,loading:!0,info:{name:(0,m.langCheck)("10181TM-000009","pages",l),action:(0,m.langCheck)("10181TM-000021","pages",l)},success:function(e){var t=e.data;t.success&&((0,g.default)({status:"success",msg:t.msg}),y.props.reqTreeTemData("rename"),y.handleCancel())}})}))}},a.handleCancel=function(){a.props.setReNameModal(!1)},a.onChangeTemplateName=function(e){a.setState({templateName:e.target.value})},a.state={templateName:a.props.templateNameVal,nameErrorMsg:""},a}return(0,s.default)(t,e),(0,i.default)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.json,a=e.reNameModalVisible,n=e.templateNameVal,r=this.state,l=r.templateName,i=r.nameErrorMsg;return console.log("templateNameVal",n),p.default.createElement(y.default,{mask:!0,title:(0,m.langCheck)("10181TM-000063","pages",t),visible:a,onOk:this.handleOk,okText:(0,m.langCheck)("10181TM-000013","pages",t),cancelText:(0,m.langCheck)("10181TM-000014","pages",t),onCancel:this.handleCancel,maskClosable:!1,fieldid:"rename"},p.default.createElement("div",{className:"copyTemplate",style:{padding:"60px 20px"}},p.default.createElement("div",{className:"templateName"},p.default.createElement("label",{htmlFor:""},(0,m.langCheck)("10181TM-000027","pages",t)),p.default.createElement(o.default,{value:l,defaultValue:n,id:"templateName",style:{width:"80%"},onBlur:this.checkName,fieldid:"templateName",placeholder:(0,m.langCheck)("10181TM-000064","pages",t),onChange:this.onChangeTemplateName}),p.default.createElement("p",{className:"areaName-errorMsg"},i))))}}]),t}(c.Component))||n;b.propTypes={templatePk:u.default.string.isRequired,pageCode:u.default.string.isRequired,appCode:u.default.string.isRequired,def1:u.default.string.isRequired,templateTitleVal:u.default.string.isRequired,orgidObj:u.default.object.isRequired,templateNameVal:u.default.string.isRequired,json:u.default.object.isRequired},t.default=(0,f.connect)((function(e){return{templatePk:e.TemplateSettingUnitData.templatePk,pageCode:e.TemplateSettingUnitData.pageCode,appCode:e.TemplateSettingUnitData.appCode,def1:e.TemplateSettingUnitData.def1,templateTitleVal:e.TemplateSettingUnitData.templateTitleVal,templateNameVal:e.TemplateSettingUnitData.templateNameVal,orgidObj:e.TemplateSettingUnitData.orgidObj,treeTemPrintData:e.TemplateSettingUnitData.treeTemPrintData,json:e.TemplateSettingUnitData.json}}),{setTemplateNameVal:T.setTemplateNameVal})(b)},1242:function(e,t,a){var n=a(1243);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},1243:function(e,t,a){var n=a(236);(e.exports=a(12)(!1)).push([e.i,'body{background-color:#f0f2f5}*{box-sizing:border-box}.allocation-modal .u-modal-body{padding:15px 0 0}.nc-workbench-page-header .header-title{display:flex;align-items:center}.nc-workbench-page-header .header-title .header-titleName{font-size:16px;font-weight:700;color:#111;margin-right:20px;white-space:nowrap;margin-bottom:0;margin-top:0}.nc-workbench-page-header .unitRef{width:200px;position:relative}.nc-workbench-page-header .unitRef:before{color:red;content:"*";display:inline-block;font-family:SimSun;font-size:14px;position:absolute;top:7px;left:2px;z-index:2}.nc-workbench-templateSetting{display:flex;justify-content:flex-start;background:#fff;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left{padding-top:60px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree{padding:10px 20px;height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input{position:absolute;top:0;left:0;padding:20px 20px 10px;width:100%;display:flex;z-index:1}.nc-workbench-templateSetting .nc-workbench-ownpage-left .templateSetting-searchTree .fixed-search-input .sider-search-color .ant-input-search-icon{color:#e14c46;vertical-align:middle}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree-wrap{height:100%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .templateTree{height:calc(100% - 40px);overflow-y:auto;margin-left:20px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .ant-form{padding:24px;background:#fbfbfb;border-radius:6px}.nc-workbench-templateSetting .nc-workbench-ownpage-right .template-title{height:30px;font-size:15px;line-height:30px;padding-left:20px;margin-bottom:10px;background:#f4f4f4}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip{background:url('+n(a(1025))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{background:url("+n(a(1026))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip{background:url("+n(a(1027))+") no-repeat 50%}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData{width:100%;height:100%;align-items:center;justify-content:center;display:flex}.nc-workbench-templateSetting .nc-workbench-ownpage-right .noData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPageData .noDataTip,.nc-workbench-templateSetting .nc-workbench-ownpage-right .noPrintData .noDataTip{min-width:168px;height:120px;line-height:280px;font-size:14px;color:#888;background-size:contain;text-align:center}.nc-workbench-templateSetting .ant-tree li .ant-tree-node-content-wrapper.ant-tree-node-selected{color:#e14c46}.ant-modal-mask{background:none}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item button{-moz-text-align-last:center;text-align-last:center;font-size:13px;border:0;background-color:inherit;width:100%}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item button:disabled{color:#ccc}.ant-dropdown ul.ant-dropdown-menu li.ant-dropdown-menu-item:hover{background-color:#ebecf0}.nc-dropdown.u-dropdown .u-dropdown-menu{padding:4px 0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item{height:32px;line-height:32px;padding:0 10px;margin:0}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item{-moz-text-align-last:center;text-align-last:center;font-size:13px;width:100%;border:none;outline:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item .dropdown-item:focus{border:none}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled{color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-disabled:hover{background-color:transparent;color:#909090}.nc-dropdown.u-dropdown .u-dropdown-menu>.u-dropdown-menu-item-selected{background-color:transparent}.allocationPage .pageCode-show{display:flex;flex-flow:row nowrap;justify-content:space-between;align-items:center;margin:0 15px;padding:10px 20px;background-color:#f3f3f3}.allocationPage .pageCode-show .pageCodeName{margin-bottom:0}.allocationPage .allocationPage-content .allocation-select{display:flex;margin:0 15px;padding:10px 20px 10px 0}.allocationPage .allocationPage-content .allocation-select>div{display:flex;flex-flow:row nowrap;align-items:center}.allocationPage .allocationPage-content .allocation-select>div .refer-wrapper{width:200px}.allocationPage .allocationPage-content .allocationPage-content-tree{display:flex;justify-content:space-between}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName{height:330px;width:46%;border:1px solid #e8e8e8;border-bottom:none;border-left:none;padding:50px 0 10px;position:relative}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName .allocationLeft_tree_content{width:100%}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName .searchTree-assign{display:flex;padding:0 10px;height:100%;overflow:auto}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName .searchTree-assign .fixed-search-input{position:absolute;left:0;top:6px;padding:0 15px;width:100%;display:flex;z-index:1}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName .searchTree-assign .tree-switch-icon{color:#f2b224;margin-right:5px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeScrollName .searchTree-assign .tree-dot{display:inline-block;width:5px;height:5px;background-color:#555;border-radius:100%;margin:0 7px 2px 0}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button{height:330px;width:14%;border-top:1px solid #e8e8e8;display:flex;flex-direction:column;justify-content:center}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button p{text-align:center;margin-bottom:30px}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-button .icon{color:rgba(85,85,85,.5)}.allocationPage .allocationPage-content .allocationPage-content-tree .allocation-treeContainer{height:330px;width:40%;border:1px solid #e8e8e8;border-right:none;border-bottom:none;padding:10px 0 10px 15px;overflow:auto}.copyTemplate{padding:35px 20px}.copyTemplate .ant-input{margin-bottom:20px}.copyTemplate .templateCode,.copyTemplate .templateName{position:relative}.copyTemplate .areaCode-errorMsg,.copyTemplate .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:65px}.has-error{border-color:#f5222d}.copy-others-moudle .copy-others-modal-top{margin:4px 15px;position:relative}.copy-others-moudle .copy-others-modal-top .copy-others-modal-header{width:65px;height:21px;display:inline-block;font-size:13px;font-family:MicrosoftYaHei;color:#555;line-height:21px}.copy-others-moudle .copy-others-modal-top .copy-others-input{margin-left:8px;height:30px;font-size:13px;font-family:MicrosoftYaHei;color:#111;line-height:30px}.copy-others-moudle .copy-others-modal-top .areaCode-errorMsg,.copy-others-moudle .copy-others-modal-top .areaName-errorMsg{color:#f5222d;font-size:13px;position:absolute;top:30px;left:72px}.copy-others-moudle .copy-others-modal-bottom{overflow:hidden;margin-top:20px;display:flex}.copy-others-moudle .copy-others-modal-bottom .left{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .left .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .left .search{margin:10px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree{overflow:auto;height:275px}.copy-others-moudle .copy-others-modal-bottom .left .leftTree .ant-tree{overflow:none}.copy-others-moudle .copy-others-modal-bottom .middle{display:flex;justify-content:center;align-items:center;margin:0 auto;width:10%}.copy-others-moudle .copy-others-modal-bottom .right{width:45%;border:1px solid #d0d0d0}.copy-others-moudle .copy-others-modal-bottom .right .title{background-color:#f3f3f3;padding:6px 15px;color:#111}.copy-others-moudle .copy-others-modal-bottom .right .rightTree{overflow:auto;height:325px}.copy-others-moudle .copy-others-modal-bottom .right .rightTree .ant-tree{overflow:none}.tree-transfer-buttons{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:8px}.tree-transfer-buttons .u-button{padding:0;width:32px;height:32px;min-width:32px;border-radius:3px}.tree-transfer-buttons .u-button:after{display:none!important}.tree-transfer-buttons .iconfont{font-size:12px}.tree-transfer-buttons .transfer-left-double,.tree-transfer-buttons .transfer-right-double{position:relative}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{position:absolute}.tree-transfer-buttons .transfer-left-double .transfer-icon-1,.tree-transfer-buttons .transfer-right-double .transfer-icon-1{left:6px}.tree-transfer-buttons .transfer-left-double .transfer-icon-2,.tree-transfer-buttons .transfer-right-double .transfer-icon-2{right:6px}.margin-top-8{margin-top:8px}.margin-top-25{margin-top:25px}.ant-modal-body{padding:8px}",""])},957:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=W(a(382)),r=W(a(110)),l=W(a(2)),i=W(a(134)),d=W(a(135)),s=W(a(17)),c=W(a(77)),p=W(a(21)),u=W(a(5)),f=W(a(7)),m=W(a(4)),h=W(a(6)),g=W(a(109)),y=W(a(922));a(381),a(130),a(921);var T=a(1),k=W(T),b=W(a(0)),v=a(37),w=a(1051),C=a(969),x=a(972),E=W(a(35)),D=W(a(68)),S=a(133),M=W(a(976)),N=W(a(1236)),P=W(a(984)),R=W(a(1237)),A=W(a(1239)),_=W(a(1240)),O=W(a(1241)),j=a(113),I=W(a(229)),V=a(1082),K=a(365),U=a(19),L=W(a(979)),q=a(1043);a(1242);var B=W(a(26)),z=W(a(1044)),F=W(a(975)),H=a(1023),G=W(a(1039));function W(e){return e&&e.__esModule?e:{default:e}}var Y=B.default.base.NCDiv,X=y.default.TreeNode,J=g.default.Search,Z=B.default.base,Q=Z.NCButton,$=Z.NCUpload,ee=Z.NCMenu,te=Z.NCDropdown,ae=B.default.ajax,ne=B.default.formDownload,oe=B.default.pageTo,re=(0,F.default)((function(e,t,a){switch(a){case"xmlImport":t.xmlImportClick(),t.setState({xmlImportVaryId:e});break;case"delete":t.deleteTemplate(e)}}))(n=function(e){function t(e){var a=this;(0,u.default)(this,t);var n,o=(0,m.default)(this,(t.__proto__||(0,p.default)(t)).call(this,e));return o.setCopyVisible=function(e){o.setState({visible:e})},o.setCopyOthersVisible=function(e){o.setState({copyOthersModalVisible:e})},o.setReNameModal=function(e){o.setState({reNameModal:e})},o.handleClick=function(e){var t=o.props,a=t.def1,n=t.templatePk,r=t.appCode,l=t.orgidObj,i=t.json,d=t.pageCode;if(l.refpk)if(n)switch(e){case"copy":o.setState({visible:!0});break;case"edit":"menuitem"===a?(0,U.ctmsCheckClickCanUsed)("printtemplate").then((function(e){e&&o.openPrintTemplate()})):(0,j.openPage)("ZoneSetting",!1,{templetid:n,status:"templateSetting-unit",appcode:r,pcode:d});break;case"delete":(0,S.ControlTip)({status:"warning",title:(0,U.langCheck)("10181TM-000038","pages",i),msg:(0,U.langCheck)("10181TM-000039","pages",i),fieldid:"delete",onOk:function(){var e="menuitem"===a?"printtemplate":void 0;o.props.showVaryModal(e,"delete")}});break;case"assign":o.setState({alloVisible:!0});break;case"browse":"menuitem"===a?o.showModal():o.setState({batchSettingModalVisibel:!0});break;case"copyOthersApp":o.setState({copyOthersModalVisible:!0});break;case"rename":o.setState({reNameModal:!0});break;case"export":var s={pagecode:d,appcode:r,pk_org:l.refpk};(0,q.handleDownload)(s,"/nccloud/platform/appregister/templetexport.do",1,"_blank",(0,U.langCheck)("10181TM-000070","pages",i),(0,U.langCheck)("10181TM-000071","pages",i));break;case"attachUploader":o.toggleAttachUploader()}else(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000031","pages",i)});else(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000030","pages",i)})},o.openPrintTemplate=function(){var e=o.props,t=e.templatePk,a=e.appCode,n=e.orgidObj;oe.specialLinkTo("/uap/dc/templateSet/main/index.html",{appcode:"10181TM",pagecode:"10182TM_PAGE",templateVO:(0,c.default)({templateAppcode:a,templateid:t}),pk_org:n.refpk})},o.deleteTemplate=function(e){var t=void 0;t="menuitem"===o.props.def1?"/nccloud/platform/template/deletePrintTemplate.do":"/nccloud/platform/template/deleteTemplateDetail.do",(0,E.default)({url:t,data:{templateId:o.props.templatePk,varyId:e},info:{name:(0,U.langCheck)("10181TM-000009","pages",o.props.json),action:(0,U.langCheck)("10181TM-000038","pages",o.props.json)},success:function(e){e.data.success&&((0,D.default)({status:"success",msg:(0,U.langCheck)("10181TM-000040","pages",o.props.json)}),o.reqTreeTemData())}})},o.componentWillMount=function(){(0,K.getMulti)({moduleId:"10181TM",domainName:"workbench",callback:function(e){o.props.setJson(e)}})},o.componentDidMount=function(){var e=o.props,t=e.selectedKeys,a=e.setSelectedKeys,n=e.def1,r=e.expandedKeys,l=e.setExpandedKeys,i=e.appCode,d=e.pageCode,s=e.setAppCode,c=e.setPageCode,p=e.expandedTemKeys,u=e.setExpandedTemKeys,f=e.selectedTemKeys,m=e.setSelectedTemKeys,h=e.searchValue;""!==n?(h?o.handleSearch(h,o.handleExpanded):o.reqTreeData(),a(t),(0,w.setDef1)(n),l(r),s(i),c(d),o.reqTreeTemData("historyData"),u(p),m(f)):o.reqTreeData(o.setInformationFun)},o.toggleAttachUploader=function(){var e=o.state.attachShowUploader;o.setState({attachShowUploader:!e})},o.ajaxXML=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.props,a=t.appCode,n=t.json,r=t.orgidObj,l=void 0===r?{}:r,i=o.state,d=i.rightRootTempaltePK,s=i.xmlImportVaryId,c=new FormData;c.append("filename",o.file.name),c.append("templatecode",e.templatecode),c.append("templatename",e.templatename),c.append("varyId",s),c.append("file",o.file),c.append("appcode",a),c.append("pTemplateId",d),c.append("billId",(0,U.uuid)(32,32)),c.append("pk_org",l.refpk),c.append("index",Math.floor(10*(0,U.getRandomValue)()+1).toString()),ae({url:"/nccloud/riart/print/printtemplateimporta.do",data:c,headers:{"Content-Type":"multipart/form-data"},success:function(e){var t=e.success;t&&((0,D.default)({status:"success",msg:(0,U.langCheck)("10181TM-000078","pages",n)}),o.reqTreeTemData())},error:function(e){(0,D.default)({status:"danger",msg:e.message})}})},o.setInformationFun=function(e){var t=o.props,a=t.setSelectedKeys,n=t.setDef1,r=t.setAppCode,l=t.setPageCode;e&&e.length>0&&(a([e[0].pk]),n(e[0].def1),r(e[0].appCode),e[0].pageCode&&l(e[0].pageCode))},o.restoreTreeTemData=function(e,t){var a=o.state,n=a.treeTemBillData,r=a.treeTemPrintData,l=o.props,i=l.def1,d=l.copyId,c=l.expandedTemKeys,p=l.setExpandedTemKeys,u=l.setSelectedTemKeys,f=l.setParentIdcon,m=l.setTemplatePk,h=l.setTemplateNameVal,g=l.setTemplateTitleVal,y=l.json,T=o.props.treeTemBillData,k=o.props.treeTemPrintData,b=[],v=void 0;"bill"===e?v=(0,V.generateTemData)(T):"print"===e&&(v=(0,V.generateTemData)(k));var w=v,C=w.treeArray,x=w.treeObj;if(C.map((function(e){var t={name:(0,U.langCheck)("10181TM-000042","pages",y),title:(0,U.langCheck)("10181TM-000042","pages",y),pk:"qazwsxedc1"+e.pk,code:"1001",parentId:"groupRoot",children:[]},a={title:(0,U.langCheck)("10181TM-000043","pages",y),name:(0,U.langCheck)("10181TM-000043","pages",y),pk:"qazwsxedc2"+e.pk,code:"1002",parentId:"groupRoot",children:[]};for(var n in e.children.push(t),e.children.push(a),x)x.hasOwnProperty(n)&&e.templateId===x[n][0].parentId&&("group"===x[n][0].type?e.children[0].children.push(x[n][0]):"org"===x[n][0].type&&e.children[1].children.push(x[n][0]))})),b=v.treeArray,b=(0,V.generateTreeData)(b),"bill"===e){if("apppage"===i){if(b.length>0)if(t)t&&"copy"===t&&b.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(d===e.key)if("group"===e.type){var t="qazwsxedc1"+e.parentId,a=[].concat((0,s.default)(c),[e.parentId,t]);p(a)}else if("org"===e.type){var n="qazwsxedc2"+e.parentId,o=[].concat((0,s.default)(c),[e.parentId,n]);p(o)}}))}))}));else{var E=[];E.push(b[0].key),u(E),f(b[0].parentId),m(b[0].pk),h(b[0].name)}else o.props.setParentIdcon("");b.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){e.children&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,U.langCheck)("10181TM-000041","pages",y))}))}))}))}n=b,o.setState({treeTemBillData:n})}else if("print"===e){if("menuitem"===i){if(b.length>0)if(t)t&&"copy"===t&&b.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){e.children&&e.children.length>0&&e.children.map((function(e){if(d===e.key)if("group"===e.type){var t="qazwsxedc1"+e.parentId,a=[].concat((0,s.default)(c),[e.parentId,t]);p(a)}else if("org"===e.type){var n="qazwsxedc2"+e.parentId,o=[].concat((0,s.default)(c),[e.parentId,n]);p(o)}}))}))}));else{var D=[];D.push(b[0].key),u(D),f(b[0].parentId),m(b[0].pk),h(b[0].name),g(b[0].code)}else o.props.setParentIdcon("");b.forEach((function(e){e.children&&e.children.length>0&&e.children.map((function(e){e.children&&e.children.map((function(e){"y"===e.isDefault&&(e.name=e.name+(0,U.langCheck)("10181TM-000041","pages",y))}))}))}))}r=b,o.setState({treeTemPrintData:r})}},o.onExpand=function(e,t){switch(e){case"systemOnselect":o.props.setExpandedKeys(t),o.setState({autoExpandParent:!1});break;case"templateOnselect":o.props.setExpandedTemKeys(t),o.setState({autoExpandTemParent:!1})}},o.onSelectQuery=(n=(0,d.default)(i.default.mark((function e(t,n){var r,l,d,s;return i.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=o.props,l=r.orgidObj,d=r.selectedKeys,s=r.json,l.refpk){e.next=4;break}return(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000030","pages",s)}),e.abrupt("return");case 4:if(!(t.length>0)){e.next=16;break}return e.next=7,o.props.setSelectedKeys(t);case 7:return e.next=9,o.props.setDef1(n.selectedNodes[0].props.refData.def1);case 9:return e.next=11,o.props.setAppCode(n.selectedNodes[0].props.refData.appCode);case 11:return e.next=13,o.props.setPageCode(n.selectedNodes[0].props.refData.code);case 13:o.reqTreeTemData(),e.next=17;break;case 16:d&&o.reqTreeTemData();case 17:case"end":return e.stop()}}),e,a)}))),function(e,t){return n.apply(this,arguments)}),o.reqTreeTemData=function(e){var t=o.props,a=t.pageCode,n=t.appCode,r=t.def1,l={pageCode:a,appCode:n,orgId:t.orgidObj.refpk};l.pageCode&&("apppage"===r?(l.templateType="bill",o.reqTreeTemAjax(l,"bill",e)):"menuitem"===r&&(l.pageCode&&delete l.pageCode,l.templateType="print",o.reqTreeTemAjax(l,"print",e)))},o.reqTreeTemAjax=function(e,t,a){var n=o.props,r=n.json,l=n.selectedTemKeys,i=o;(0,E.default)({url:"/nccloud/platform/template/getTemplatesOfPage.do",data:e,info:{name:(0,U.langCheck)("10181TM-000009","pages",r),action:(0,U.langCheck)("10181TM-000044","pages",r)},success:function(e){var n=e.data;n.data.length>0&&i.setState({saveLeftArrTS:n.data,SHOW_TEMPLATE_EXPORT_BTN:"Y"===n.data[0].enableExport}),n.success&&("bill"===t?(o.props.setTreeTemBillData(n.data),o.restoreTreeTemData(t,a)):"print"===t&&(o.props.setTreeTemPrintData(n.data),o.restoreTreeTemData(t,a),n.data&&n.data.length>0&&(n.data[0]&&n.data[0].children&&n.data[0].children.length,o.setState({rightRootTempaltePK:n.data[0].templateId})),l&&n.data&&n.data.length&&n.data.map((function(e){e.templateId===l[0]&&o.props.setNodeKey(e.nodeKey)}))))}})},o.onTemSelect=function(e,t){var a=o.props.def1;if("apppage"===a||"menuitem"===a&&(e.length>0?o.props.setNodeKey(t.selectedNodes[0].props.refData.nodeKey):t.node.props&&t.node.props.refData&&t.node.props.refData.nodeKey&&o.props.setNodeKey(t.node.props.refData.nodeKey)),e.length>0){o.setState({rightRootTempaltePK:e[0]});var n=t.selectedNodes[0].props.refData.name,r=n.indexOf((0,U.langCheck)("10181TM-000041","pages",o.props.json));-1!==r&&(n=n.slice(0,r)),o.props.setSelectedTemKeys(e),o.props.setTemplatePk(t.selectedNodes[0].props.refData.templateId),o.props.setParentIdcon(t.selectedNodes[0].props.refData.parentId),o.props.setTemplateNameVal(n),o.props.setTemplateTitleVal(t.selectedNodes[0].props.refData.code),o.props.setTemplateType(t.selectedNodes[0].props.refData.type)}},o.reqTreeData=function(e){var t=o.props.json;(0,E.default)({url:"/nccloud/platform/appregister/querymenuitemstree.do",data:{},info:{name:(0,U.langCheck)("10181TM-000002","pages",t),action:(0,U.langCheck)("10181TM-000045","pages",t)},success:function(t){var a=t.data;a.success&&a.data.length>0&&(o.props.setTreeData(a.data),e&&"function"==typeof e&&e(a.data))}})},o.onSelect=function(e,t,a){switch(e){case"systemOnselect":o.onSelectQuery(t,a);break;case"templateOnselect":o.onTemSelect(t,a)}},o.onChange=function(e){var t=e.target.value;t?o.props.setSearchValue(t):o.handleSearchDel()},o.handleTreeSearch=function(e){o.handleSearch(e,(function(t){o.handleExpanded(t),o.props.setAsyncExpandedKeys(["00"]),o.props.setSearchTreeShow(""!==e)}))},o.handleExpanded=function(e){var t=e.map((function(e){return e.pk}));t.push("00"),o.props.setExpandedKeys(t),o.setState({autoExpandParent:!0})},o.handleSearch=function(e,t){if(e){var a=o.props.json;o.props.setSelectedKeys([]);(0,U.DeferFn)((function(){(0,E.default)({url:"/nccloud/platform/appregister/searchappmenuitem.do",data:{search_content:e,containAppPage:!0},info:{name:(0,U.langCheck)("10181TM-000046","pages",a),action:(0,U.langCheck)("10181TM-000047","pages",a)},success:function(e){var a=e.data,n=a.success,r=a.data;n&&r&&(o.props.setTreeData(r),t(r))}})}))}},o.hanldeDoubleClick=function(e,t,a){var n=void 0,r=[];switch(e){case"systemOnselect":n=a.props.refData.pk,o.props.isShowSearchTree?(r=o.props.expandedKeys.concat([n]),o.props.setExpandedKeys(r)):(r=o.props.asyncExpandKeys.concat([n]),o.props.setAsyncExpandedKeys(r));break;case"templateOnselect":n=a.props.refData.pk;var l=o.props.expandedTemKeys.concat([n]);o.props.setExpandedTemKeys(l)}},o.handleSearchDel=function(){o.reqTreeData(o.setInformationFun);var e=["00"];o.props.setExpandedKeys(e),o.props.setAsyncExpandedKeys(e),o.props.setSearchValue(""),o.props.setSearchTreeShow(!1)},o.treeResAndUser=function(e,t,a,n,r,i,d){var c=o.props,p=c.searchValue,u=c.json,f=[{code:"00",name:(0,U.langCheck)("10181TM-000050","pages",u),pk:"00"}],m={selectedKeys:n,onSelect:function(e,a){o.onSelect(t,e,a)},onDoubleClick:function(e,a){o.hanldeDoubleClick(t,e,a)}};return k.default.createElement(Y,{className:d||"",fieldid:a?"template":"templateSettingUnit",areaCode:Y.config.TREE},a?"":k.default.createElement("div",{className:"fixed-search-input"},k.default.createElement(J,{className:p&&"sider-search-color",placeholder:(0,U.langCheck)("10181TM-000048","pages",u),onChange:o.onChange,onSearch:o.handleTreeSearch,value:p,suffix:p.length>0?k.default.createElement("i",{className:"iconfont icon-qingkong",onClick:o.handleSearchDel}):"",fieldid:"search"})),k.default.createElement(Y,{fieldid:a?"template":"templateSettingUnit",areaCode:Y.config.TreeCom},e.length>0&&(o.props.isShowSearchTree||"systemOnselect"!==t?k.default.createElement(y.default,(0,l.default)({showLine:!0,showIcon:!0,onExpand:function(e){o.onExpand(t,e)},autoExpandParent:i,expandedKeys:r},m),function e(t){return t.map((function(t){var a=t.code,n=t.name,o=t.pk,r=a+" "+n;"00"===a&&(r=""+n);var l=r.indexOf(p),i=r.substr(0,l),d=r.substr(l+p.length),s=l>-1?k.default.createElement("span",null,i,k.default.createElement("span",{style:{color:"#f50"}},p),d):k.default.createElement("span",null,k.default.createElement("span",null," ",r," ")),c="00"===a?"fieldid_"+n+"_node":"fieldid_"+a+"_node";return t.children&&t.children.length>0?k.default.createElement(X,{key:o,title:s,refData:t,icon:function(e){var t=e.expanded;return k.default.createElement(I.default,{width:20,height:20,xlinkHref:t?"#icon-wenjianjiadakai":"#icon-wenjianjia"})},switcherIcon:function(e){var t=e.expanded;return k.default.createElement("i",{className:"font-size-18 iconfont "+(t?"icon-shu_zk":"icon-shushouqi")})},className:c},e(t.children)):k.default.createElement(X,{icon:k.default.createElement("span",{className:"tree-dot"}),key:o,title:s,refData:t,className:c})}))}(e)):k.default.createElement(G.default,(0,l.default)({rootNode:f,treeData:o.props.treeData,treeNodeItem:function(e){var t=e.code,a=e.name;return{key:e.pk,title:"00"===t?""+a:t+" "+a,className:"00"===t?"fieldid_"+a+"_node":"fieldid_"+t+"_node",isLeaf:!!e.isleaf}},expandedKeys:[].concat((0,s.default)(o.props.asyncExpandKeys)),onLoadData:o.handleLoadTreeNodeData,onExpand:o.handleAsyncTreeExpand},m)))))},o.setModalVisibel=function(e){o.setState({batchSettingModalVisibel:e})},o.setAssignModalVisible=function(e){o.setState({alloVisible:e})},o.handdleRefChange=function(e){var t=e.refname,a=e.refcode,n=e.refpk,r={};r.refname=t,r.refcode=a,r.refpk=n,o.props.setOrgidObj(r),o.props.orgidObj&&o.reqTreeTemData()},o.showModal=function(){o.setState({previewPrintVisible:!0},(function(){o.printModalAjax(o.props.templatePk)}))},o.hideModal=function(){o.setState({previewPrintVisible:!1})},o.printModalAjax=function(e){var t=o.props.json,a={};a.templateId=e;(0,E.default)({url:"/nccloud/platform/template/previewPrintTemplate.do",data:a,info:{name:(0,U.langCheck)("10181TM-000009","pages",t),action:(0,U.langCheck)("10181TM-000049","pages",t)},success:function(e){var t=e.data;t.success&&(document.getElementsByClassName("printContent")[0].innerHTML=t.data)}})},o.beforeUpload=function(e){var t=o.props.json;return!(!e||"application/json"!==e.type)||((0,D.default)({status:"error",msg:(0,U.langCheck)("10181TM-000072","pages",t)}),!1)},o.ncUploadChange=function(e){var t=o.props.json,a=e.file,n=a.status,r=a.response;"uploading"!==n&&console.log(e.file,e.fileList),"error"===n&&((0,D.default)({status:"error",msg:(0,U.langCheck)("10181TM-000069","pages",t)}),console.log(e.file.name+" file upload failed.")),r&&(r.error?(0,D.default)({status:"error",msg:r.error.message}):(o.reqTreeTemData(),(0,D.default)({status:"success",msg:r.data})))},o.setXmlImportVisible=function(){var e=o.state.xmlImportVisible;o.setState({xmlImportVisible:!e})},o.xmlClick=function(e){var t=e.key,a=o.props,n=a.templatePk,r=a.appCode,l=a.orgidObj,i=a.json;if(l.refpk)if(n)switch(t){case"xmlImport":o.props.showVaryModal("printtemplate","xmlImport");break;case"xmlExport":ne({params:{appcode:r,templateId:n},url:"/nccloud/riart/print/templateexport.do",enctype:2})}else(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000031","pages",i)});else(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000030","pages",i)})},o.xmlImportClick=function(){o.xmlImport.click();var e=o;o.xmlImport.onchange=function(t){var a=t.target.files[0],n=new FileReader;a&&"text/xml"===a.type?(a&&n.readAsDataURL(a),n.onerror=function(){e.xmlImport.value="",(0,D.default)({status:"danger",msg:(0,U.langCheck)("10181TM-000079","pages",json)})},n.onload=function(){e.fr=n,e.file=a,e.xmlImport.value="",e.setXmlImportVisible()}):(e.xmlImport.value="",(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000077","pages",json)}))}},o.xmlFun=function(){var e=o.props.json;return k.default.createElement(ee,{onClick:o.xmlClick.bind(o)},k.default.createElement(ee.Item,{key:"xmlImport",fieldid:"xmlImport"},k.default.createElement("div",{className:"dropdown-item"},(0,U.langCheck)("10181TM-000075","pages",e))),k.default.createElement(ee.NCDivider,null),k.default.createElement(ee.Item,{key:"xmlExport",fieldid:"xmlExport"},k.default.createElement("div",{className:"dropdown-item"},(0,U.langCheck)("10181TM-000076","pages",e))))},o.xmlBtnLoad=function(){var e=o.props,t=e.def1,a=e.parentIdcon,n=e.json,r=e.expandedKeys,l=o.state.treeTemPrintData;return t&&"menuitem"==t&&l.length>0&&k.default.createElement(te,{overlay:o.xmlFun(a,r),trigger:["click"],fieldid:"xmlImport"},k.default.createElement(Q,{key:"",className:"margin-left-10",fieldid:"xmlImport"},(0,U.langCheck)("10181TM-000075","pages",n),k.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},o.currentImportFun=function(){var e=o.props,t=e.json,a=e.appCode,n=e.pageCode,r=e.orgidObj;return k.default.createElement(ee,{onClick:o.currentExportClick},k.default.createElement(ee.Item,{key:"currentImport",fieldid:"currentImport"},k.default.createElement($,{showUploadList:!1,accept:"application/json",action:"/nccloud/platform/templet/templetimportcur.do",headers:{authorization:"authorization-text"},data:{appcode:a,pagecode:n,pk_org:r.refpk},beforeUpload:o.beforeUpload,onChange:o.ncUploadChange},k.default.createElement("div",{class:"dropdown-item"},(0,U.langCheck)("10181TM-000082","pages",t)))),k.default.createElement(ee.NCDivider,null),k.default.createElement(ee.Item,{key:"currentExport",fieldid:"currentExport"},k.default.createElement("div",{className:"dropdown-item"},(0,U.langCheck)("10181TM-000083","pages",t))))},o.currentExportClick=function(e){var t=e.key,a=e.domEvent,n=o.props,r=n.templatePk,l=n.json;!a.target.classList.contains("dropdown-item")||r?"currentExport"===t&&ne({params:{templateid:r},url:"/nccloud/platform/templet/templetexportcur.do",enctype:1}):(0,D.default)({status:"warning",msg:(0,U.langCheck)("10181TM-000031","pages",l)})},o.currentBtnLoad=function(){var e=o.props,t=e.def1,a=e.json;return t&&k.default.createElement(te,{overlay:o.currentImportFun(),trigger:["click"],fieldid:"currentImport"},k.default.createElement(Q,{key:"",className:"margin-left-10",fieldid:"currentImport"},(0,U.langCheck)("10181TM-000082","pages",a),k.default.createElement("i",{class:"arrow iconfont icon-hangcaozuoxiala1",style:{fontSize:13}})))},o.handleLoadTreeNodeData=function(e){return new r.default((function(t){(0,E.default)({url:"/nccloud/platform/appregister/querymenuitemstree.do",data:{code:e.code},info:{name:(0,U.langCheck)("10181TM-000002","pages",o.props.json),action:(0,U.langCheck)("10181TM-000045","pages",o.props.json)},success:function(e){var a=e.data;a.success&&t(a.data)}})}))},o.handleAsyncTreeExpand=function(e){o.props.setAsyncExpandedKeys(e)},o.state={treeData:[],autoExpandParent:!0,autoExpandTemParent:!0,treeTemBillData:[],treeTemPrintData:[],treePrintTemData:[],visible:!1,alloVisible:!1,previewPrintVisible:!1,previewPrintContent:"",batchSettingModalVisibel:!1,copyOthersModalVisible:!1,reNameModal:!1,saveLeftArrTS:[],rightRootTempaltePK:"",SHOW_TEMPLATE_EXPORT_BTN:!1},o}return(0,h.default)(t,e),(0,f.default)(t,[{key:"render",value:function(){var e=this,t=(0,H.getDynamicComponent)(H.DynamicComponents.NCUploader),a=this.state,n=a.treeTemBillData,r=a.treeTemPrintData,l=a.visible,i=a.alloVisible,d=a.batchSettingModalVisibel,s=a.autoExpandParent,c=a.autoExpandTemParent,p=a.previewPrintVisible,u=a.copyOthersModalVisible,f=a.reNameModal,m=a.xmlImportVisible,h=a.attachShowUploader,g=a.SHOW_TEMPLATE_EXPORT_BTN,y=this.props,T=y.selectedKeys,b=y.expandedKeys,v=y.def1,w=y.selectedTemKeys,E=y.expandedTemKeys,D=y.templatePk,S=y.orgidObj,j=y.json,I=y.parentIdcon,V=y.templateType,K=(y.isShowSearchTree,[{code:"00",name:(0,U.langCheck)("10181TM-000050","pages",j),pk:"00",children:(0,x.createTree)(this.props.treeData,"code","pid")}]),q=[{name:(0,U.langCheck)("10181TM-000074","pages",j),type:"primary",code:"export",fieldid:"export",isshow:g&&"apppage"==v&&"groupRoot"!==I&&I},{name:(0,U.langCheck)("10181TM-000051","pages",j),code:"edit",fieldid:"edit",isshow:v&&I&&"root"!==I&&"groupRoot"!==I&&"group"!==V},{name:(0,U.langCheck)("10181TM-000038","pages",j),code:"delete",fieldid:"delete",isshow:v&&I&&"root"!==I&&"groupRoot"!==I&&"group"!==V},{name:(0,U.langCheck)("10181TM-000052","pages",j),type:"primary",code:"copy",fieldid:"copy",isshow:"menuitem"==v&&"groupRoot"!==I&&I},{name:(0,U.langCheck)("10181TM-000052","pages",j),type:"primary",code:"copy",fieldid:"copy",isshow:"apppage"==v&&"groupRoot"!==I&&I,divide:"btn"},{name:(0,U.langCheck)("10181TM-000080","pages",j),type:"primary",code:"attachUploader",fieldid:"attachUploader",isshow:"menuitem"==v},{name:(0,U.langCheck)("10181TM-000065","pages",j),type:"primary",code:"copyOthersApp",dropdownFieldid:"copy",fieldid:"copyOthersApp",isshow:"apppage"==v&&"groupRoot"!==I&&I,divide:"select"},{name:(0,U.langCheck)("10181TM-000063","pages",j),code:"rename",fieldid:"rename",isshow:v&&I&&"root"!==I&&"groupRoot"!==I&&"group"!==V},{name:(0,U.langCheck)("10181TM-000053","pages",j),code:"assign",fieldid:"assign",isshow:v&&I&&"root"!==I&&"groupRoot"!==I&&"group"!==V},{name:(0,U.langCheck)("10181TM-000054","pages",j),code:"browse",fieldid:"browse",isshow:v&&"groupRoot"!==I&&I}],B=(0,U.GetQuery)(window.location.hash).c;return k.default.createElement(C.PageLayout,{className:"nc-workbench-templateSetting",header:k.default.createElement(C.PageLayoutHeader,null,k.default.createElement("div",{style:{display:"flex",alignItems:"center"}},k.default.createElement("div",{className:"header_in_icon"},k.default.createElement(L.default,{appCode:B}),k.default.createElement(Y,{fieldid:(0,U.langCheck)("10181TM-000032","pages",j),areaCode:Y.config.Title,style:{marginRight:10}},(0,U.langCheck)("10181TM-000032","pages",j))),k.default.createElement("div",{className:"unitRef"},k.default.createElement(N.default,{value:S,placeholder:(0,U.langCheck)("10181TM-000016","pages",j),fieldid:"businessUnit",onChange:function(t){e.handdleRefChange(t)},isRequired:!0}))),k.default.createElement("div",{style:{display:"flex"}},g&&"apppage"==v&&"groupRoot"!==I&&I&&k.default.createElement($,{showUploadList:!1,accept:"application/json",action:"/nccloud/platform/appregister/templetimport.do",headers:{authorization:"authorization-text"},beforeUpload:this.beforeUpload,onChange:this.ncUploadChange},k.default.createElement(Q,{className:"margin-left-6",key:"import",fieldid:"import",colors:"primary"},(0,U.langCheck)("10181TM-000073","pages",j))),k.default.createElement(M.default,{dataSource:q,onClick:this.handleClick}),this.xmlBtnLoad()))},k.default.createElement(C.PageLayoutLeft,null,this.treeResAndUser(K,"systemOnselect",null,T,b,s,"templateSetting-searchTree workbench-scroll")),k.default.createElement(C.PageLayoutRight,null,"apppage"==v?n.length>0?k.default.createElement("div",{className:"templateTree-wrap"},k.default.createElement("p",{className:"template-title"},(0,U.langCheck)("10181TM-000033","pages",j)),this.treeResAndUser(n,"templateOnselect","hideSearch",w,E,c,"templateTree")):k.default.createElement("div",{className:"noPageData"},k.default.createElement("p",{className:"noDataTip"},(0,U.langCheck)("10181TM-000034","pages",j))):"menuitem"==v?r.length>0?k.default.createElement("div",{className:"templateTree-wrap"},k.default.createElement("p",{className:"template-title"},(0,U.langCheck)("10181TM-000035","pages",j)),this.treeResAndUser(r,"templateOnselect","hideSearch",w,E,c,"templateTree")):k.default.createElement("div",{className:"noPrintData"},k.default.createElement("p",{className:"noDataTip"},(0,U.langCheck)("10181TM-000036","pages",j))):k.default.createElement("div",{className:"noData"},k.default.createElement("p",{className:"noDataTip"},S.refpk?(0,U.langCheck)("10181TM-000037","pages",j):(0,U.langCheck)("10181TM-000030","pages",j)))),d&&k.default.createElement(P.default,{previewVisibel:d,setModalVisibel:this.setModalVisibel,templetData:{pagecode:this.props.pageCode,appcode:this.props.appCode,templetid:D}}),u&&k.default.createElement(_.default,{copyOthersModalVisible:u,setCopyOthersVisible:this.setCopyOthersVisible,reqTreeTemData:this.reqTreeTemData}),l&&k.default.createElement(A.default,{visible:l,reqTreeTemData:this.reqTreeTemData,setCopyVisible:this.setCopyVisible}),f&&k.default.createElement(O.default,{reNameModalVisible:f,setReNameModal:this.setReNameModal,reqTreeTemData:this.reqTreeTemData,saveLeftArrTS:this.state.saveLeftArrTS}),p&&k.default.createElement(o.default,{title:(0,U.langCheck)("10181TM-000049","pages",j),maskClosable:!1,visible:p,onCancel:this.hideModal,footer:null,centered:!0,width:"calc(100vw - 64px)",className:"viewPageTem"},k.default.createElement("div",{className:"printContent"})),i&&k.default.createElement(R.default,{alloVisible:i,setAssignModalVisible:this.setAssignModalVisible}),m&&k.default.createElement(z.default,{json:this.props.json,xmlImportVisible:m,setXmlImportVisible:this.setXmlImportVisible,ensureModal:this.ajaxXML}),h&&k.default.createElement(t,{billId:"printimage",onHide:this.toggleAttachUploader,noControlPermission:!0}),k.default.createElement("input",{type:"file",ref:function(t){e.xmlImport=t},style:{display:"none",position:"absolute",top:9999}}))}}]),t}(T.Component))||n;re.propTypes={treeData:b.default.array.isRequired,setTreeData:b.default.func.isRequired,setExpandedKeys:b.default.func.isRequired,setSelectedKeys:b.default.func.isRequired,setDef1:b.default.func.isRequired,setSelectedTemKeys:b.default.func.isRequired,setExpandedTemKeys:b.default.func.isRequired,setTreeTemBillData:b.default.func.isRequired,setTreeTemPrintData:b.default.func.isRequired,setTemplatePk:b.default.func.isRequired,setSearchValue:b.default.func.isRequired,setTemplateNameVal:b.default.func.isRequired,setTemplateTitleVal:b.default.func.isRequired,setPageCode:b.default.func.isRequired,setAppCode:b.default.func.isRequired,setParentIdcon:b.default.func.isRequired,setOrgidObj:b.default.func.isRequired,setCopyId:b.default.func.isRequired,selectedKeys:b.default.array.isRequired,expandedKeys:b.default.array.isRequired,treeTemBillData:b.default.array.isRequired,treeTemPrintData:b.default.array.isRequired,def1:b.default.string.isRequired,selectedTemKeys:b.default.array.isRequired,expandedTemKeys:b.default.array.isRequired,templatePk:b.default.string.isRequired,searchValue:b.default.string.isRequired,pageCode:b.default.string.isRequired,appCode:b.default.string.isRequired,parentIdcon:b.default.string.isRequired,templateTitleVal:b.default.string.isRequired,templateNameVal:b.default.string.isRequired,orgidObj:b.default.object.isRequired,nodeKey:b.default.array.isRequired,copyId:b.default.string.isRequired},t.default=(0,v.connect)((function(e){return{treeData:e.TemplateSettingUnitData.treeData,treeTemBillData:e.TemplateSettingUnitData.treeTemBillData,treeTemPrintData:e.TemplateSettingUnitData.treeTemPrintData,selectedKeys:e.TemplateSettingUnitData.selectedKeys,expandedKeys:e.TemplateSettingUnitData.expandedKeys,def1:e.TemplateSettingUnitData.def1,selectedTemKeys:e.TemplateSettingUnitData.selectedTemKeys,expandedTemKeys:e.TemplateSettingUnitData.expandedTemKeys,templatePk:e.TemplateSettingUnitData.templatePk,searchValue:e.TemplateSettingUnitData.searchValue,pageCode:e.TemplateSettingUnitData.pageCode,appCode:e.TemplateSettingUnitData.appCode,parentIdcon:e.TemplateSettingUnitData.parentIdcon,templateNameVal:e.TemplateSettingUnitData.templateNameVal,templateTitleVal:e.TemplateSettingUnitData.templateTitleVal,orgidObj:e.TemplateSettingUnitData.orgidObj,nodeKey:e.TemplateSettingUnitData.nodeKey,copyId:e.TemplateSettingUnitData.copyId,json:e.TemplateSettingUnitData.json,templateType:e.TemplateSettingUnitData.templateType,asyncExpandKeys:e.TemplateSettingUnitData.asyncExpandKeys,isShowSearchTree:e.TemplateSettingUnitData.isShowSearchTree}}),{setTreeData:w.setTreeData,setTreeTemBillData:w.setTreeTemBillData,setTreeTemPrintData:w.setTreeTemPrintData,setExpandedKeys:w.setExpandedKeys,setSelectedKeys:w.setSelectedKeys,setDef1:w.setDef1,setSelectedTemKeys:w.setSelectedTemKeys,setExpandedTemKeys:w.setExpandedTemKeys,setTemplatePk:w.setTemplatePk,setSearchValue:w.setSearchValue,setPageCode:w.setPageCode,setAppCode:w.setAppCode,setParentIdcon:w.setParentIdcon,setTemplateNameVal:w.setTemplateNameVal,setTemplateTitleVal:w.setTemplateTitleVal,setOrgidObj:w.setOrgidObj,setNodeKey:w.setNodeKey,setCopyId:w.setCopyId,setJson:w.setJson,setTemplateType:w.setTemplateType,setAsyncExpandedKeys:w.setAsyncExpandedKeys,setSearchTreeShow:w.setSearchTreeShow})(re)},968:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMobileFlag=t.onToggleLeftSider=t.updateSearchBox=t.setMetaTreeNodes=t.setAreaHide=t.setServerData=t.setTabLayModalVisible=t.setAreaItemVisible=t.setImplementFlag=t.updateAreaValidate=t.updateSaveFlag=t.setZoneDataFun=t.setCurrentBatchCell=t.updateBatchSource=t.setFormulaInfo=t.toggleFormula=t.clearData=t.updatePreviewData=t.updateSelectArea=t.updateAreaList=t.updateSelectCard=t.setZoneData=void 0;var n,o=a(3),r=(n=o)&&n.__esModule?n:{default:n},l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}(a(376));t.setZoneData=function(e){return{type:l.ZONESETTING,data:e}},t.updateSelectCard=function(e){return{type:l.UPDATESELECTCARD,selectCard:e}},t.updateAreaList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments[2];return a&&a(e),{type:l.UPDATEAREALIST,areaList:e,init:t}},t.updateSelectArea=function(e){return{type:l.UPDATESELECTAREA,selectedArea:e}},t.updatePreviewData=function(e){return{type:l.PREVIEWDATA,previewData:e}},t.clearData=function(){return{type:l.CLEARDATA}},t.toggleFormula=function(e,t){return{type:l.TOGGLEFORMULA,formula:(0,r.default)({},e,t||{visible:!1,value:""})}},t.setFormulaInfo=function(e){return{type:l.SETFORMULAINFO,formulaInfo:e}},t.updateBatchSource=function(e){return{type:l.UPDATEBATCHSOURCE,batchSource:e}},t.setCurrentBatchCell=function(e){return{type:l.SETCURRENTBATCHCELL,currentBatchCell:e}},t.setZoneDataFun=function(e){return{type:l.SETZONEFORMFUN,getFromData:e}},t.updateSaveFlag=function(e){return{type:l.UPDATESAVEFLAG,isSave:e}},t.updateAreaValidate=function(e){return{type:l.SETAREAVALIDATE,validate:e}},t.setImplementFlag=function(e){return{type:l.SETIMPLEMENTFLAG,isImplement:e}},t.setAreaItemVisible=function(e){return{type:l.SETAREAVISIBLE,areaVisible:e}},t.setTabLayModalVisible=function(e){return{type:l.TABLAYMODALVISIBLE,showTabLaySetModal:e}},t.setServerData=function(e){return{type:l.SETSEVERDATA,serverData:e}},t.setAreaHide=function(e){return{type:l.SETAREAHIDE,areaHide:e}},t.setMetaTreeNodes=function(e){return{type:l.SET_META_TREE_NODES,data:e}},t.updateSearchBox=function(e){return{type:l.UPDATE_SEARCH_BOX,boxStatus:e}},t.onToggleLeftSider=function(e){return{type:l.ONTOGGLELEFTSIDER,leftSiderShow:e}},t.setMobileFlag=function(e){return{type:l.SETMOBILEFLAG,ismobile:e}}},969:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageLayoutRight=t.PageLayoutLeft=t.PageLayoutHeader=t.PageScrollLayout=t.PageLayout=void 0;var n=p(a(21)),o=p(a(5)),r=p(a(7)),l=p(a(4)),i=p(a(6)),d=a(1),s=p(d),c=p(a(0));function p(e){return e&&e.__esModule?e:{default:e}}a(970);var u=p(a(26)).default.base.NCDiv,f=!1,m=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseUp",value:function(){f=!1,console.log(this.test)}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}}},{key:"render",value:function(){return s.default.createElement("div",{className:"nc-workbench-page"},this.props.header?this.props.header:null,s.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))}}]),t}(d.Component),h=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.state={suck:!1},a.initScrollContainerTop,a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseUp",value:function(){f=!1}},{key:"handleMouseMove",value:function(e){if(f){var t=e.clientX,a=document.querySelector("#layoutLeft"),n=a.getBoundingClientRect().left,o=parseInt(t-n)+3;o<200||(a.style.width=o+"px")}}},{key:"handleScroll",value:function(e){var t=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;if(t==this.initScrollContainerTop&&this.setState({suck:!1}),t<this.initScrollContainerTop){if(this.state.suck)return;this.containerWidthChange(),this.setState({suck:!0})}}},{key:"containerWidthChange",value:function(){var e=this.refs.ncWorkbenchPageOwnpage.getBoundingClientRect().width;document.getElementsByClassName("nc-workbench-page-header")[0].style.width=e+"px",document.getElementById("suckTableHeader")&&(document.getElementById("suckTableHeader").style.width=e+"px")}},{key:"componentDidMount",value:function(){window.addEventListener("resize",this.containerWidthChange);var e=this.refs.ncWorkbenchPageScroll.getBoundingClientRect().y;this.initScrollContainerTop=e}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.containerWidthChange)}},{key:"render",value:function(){var e=this.state.suck;return s.default.createElement("div",{className:"nc-workbench-page-scroll",onScroll:this.handleScroll.bind(this)},s.default.createElement("div",{className:" nc-workbench-page "},s.default.createElement("div",{className:"nc-workbench-page-container "+(e?"nc-workbench-suck":""),ref:"ncWorkbenchPageScroll"},this.props.header?this.props.header:null,s.default.createElement("div",{onMouseMove:this.handleMouseMove.bind(this),onMouseUp:this.handleMouseUp.bind(this),ref:"ncWorkbenchPageOwnpage",className:"nc-workbench-ownpage "+(2===this.props.children.length?"nc-workbench-ownpage-all":"")+" "+(this.props.className||"")},this.props.children))))}}]),t}(d.Component),g=function(e){function t(e){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"handleMouseDown",value:function(){f=!0}},{key:"render",value:function(){return s.default.createElement("div",{id:"layoutLeft",className:"nc-workbench-ownpage-left "+(this.props.className||""),style:this.props.style?this.props.style:{background:"#f6f6f6"}},s.default.createElement("span",{className:"layout-drag-block",onMouseDown:this.handleMouseDown.bind(this)}),this.props.children)}}]),t}(d.Component),y=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.handleBindKey=a.handleBindKey.bind(a),a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleBindKey,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleBindKey,!1)}},{key:"handleBindKey",value:function(e){var t=e||window.event||arguments.callee.caller.arguments[0];t&&t.keyCode&&t.shiftKey&&27==t.keyCode&&this.props.pageback&&this.props.pageback()}},{key:"render",value:function(){return s.default.createElement(u,{areaCode:u.config.HEADER,className:"nc-workbench-page-header "+(this.props.className||"")},this.props.children)}}]),t}(d.Component),T=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||(0,n.default)(t)).apply(this,arguments))}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"nc-workbench-ownpage-right "+(this.props.className||"")},this.props.children)}}]),t}(d.Component);m.propTypes={children:c.default.any.isRequired},g.propTypes={children:c.default.any.isRequired},T.propTypes={children:c.default.any.isRequired},t.PageLayout=m,t.PageScrollLayout=h,t.PageLayoutHeader=y,t.PageLayoutLeft=g,t.PageLayoutRight=T},970:function(e,t,a){var n=a(971);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},971:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,'.nc-workbench-page{position:absolute;top:0;z-index:10;height:100%;width:100%;padding:8px 0 0;display:flex;flex-direction:column}.nc-workbench-page .nc-workbench-page-header{flex:0 0 45px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #d9d9d9;border-radius:3px 3px 0 0;background:#fff;padding:0 20px}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn{display:flex;align-items:center;font-size:16px;color:#111;font-weight:700}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont{margin-right:16px;border-radius:50%;font-size:16px;padding:0 4px;font-weight:400;line-height:24px;cursor:pointer}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn .iconfont:hover{background:#e8e8e8}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-page-header .pageLayoutHeaderOwn img{margin-right:10px}.nc-workbench-page .nc-workbench-page-header .header_in_icon{display:flex;font-weight:700;font-size:16px;color:#111;line-height:24px}.nc-workbench-page .nc-workbench-page-header .header_in_icon span[type=ncdiv]{font-size:inherit}.nc-workbench-page .nc-workbench-ownpage{min-width:800px;height:calc(100% - 61px);border-radius:0 0 3px 3px}.nc-workbench-page .nc-workbench-ownpage-all{display:flex;justify-content:flex-start;background:#fff;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.nc-workbench-page .nc-workbench-ownpage-left{position:relative;height:100%;min-width:280px}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block{position:absolute;right:-3px;z-index:10;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);display:block;padding:0 3px;height:100%;border-radius:3px;cursor:w-resize}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:after{content:"";display:block;width:1px;height:100%;background:#d9d9d9}.nc-workbench-page .nc-workbench-ownpage-left .layout-drag-block:hover:after{width:2px;background:rgba(0,0,0,.54)}.nc-workbench-page .nc-workbench-ownpage-right{min-width:50%;flex:1}.nc-workbench-page-scroll{height:100%;width:100%;overflow-y:auto}.nc-workbench-page-scroll .nc-workbench-page-container{margin-top:0;min-height:100%;background:#fff;border-radius:3px}.nc-workbench-page-scroll .nc-workbench-page-container .nc-workbench-page-header{position:static;transition:top .7s ease;height:46px}.nc-workbench-page-scroll .nc-workbench-page-container .suck-table-header{position:static;transition:top .7s ease}.nc-workbench-page-scroll .nc-workbench-suck{padding-top:80px}.nc-workbench-page-scroll .nc-workbench-suck .nc-workbench-page-header{position:fixed;z-index:1;top:44px}.nc-workbench-page-scroll .nc-workbench-suck .suck-table-header{position:fixed;z-index:1;top:94px}@media screen and (min-width:1280px){.nc-workbench-page{padding:8px 16px}}@media screen and (min-width:1440px){.nc-workbench-page{padding:8px 16px}}@media screen and (min-width:1600px){.nc-workbench-page{padding:8px 16px}}',""])},972:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createTree=void 0;var n,o=a(89),r=(n=o)&&n.__esModule?n:{default:n};t.createTree=function(e,t,a){e=r.default.cloneDeep(e);var n=l(e,a),o=n.treeArray,s=n.treeObject;return s=i(s,t),d(o,s,t)};var l=function(e,t){var a=[],n={};return e.map((function(e,o){e[t]?(n.hasOwnProperty(e[t])||(n[e[t]]=[]),n[e[t]].push(e)):a.push(e)})),{treeArray:a,treeObject:n}},i=function(e,t){for(var a in e)e.hasOwnProperty(a)&&(e[a]=d(e[a],e,t));return e},d=function(e,t,a){return e.map((function(e,n){return t.hasOwnProperty(e[a])&&(e.children=t[e[a]]),e}))}},975:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=p(a(2)),o=p(a(21)),r=p(a(5)),l=p(a(7)),i=p(a(4)),d=p(a(6));t.default=function(e){return function(t){return function(a){function p(t){(0,r.default)(this,p);var a=(0,i.default)(this,(p.__proto__||(0,o.default)(p)).call(this,t));return a.showVaryModal=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pagetemplate",t=arguments[1];a.setState({showVaryModal:!0,flag:e,operate:t})},a.onConfirm=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";"function"==typeof e&&e(t,a.component,a.state.operate)},a.state={showVaryModal:!1,flag:"pagetemplate"},a}return(0,d.default)(p,a),(0,l.default)(p,[{key:"render",value:function(){var e=this,a=(0,n.default)({showVaryModal:this.showVaryModal},this.props);return s.default.createElement(s.default.Fragment,null,s.default.createElement(t,(0,n.default)({ref:function(t){return e.component=t}},a)),this.state.showVaryModal&&s.default.createElement(c.default,{flag:this.state.flag,close:function(){return e.setState({showVaryModal:!1})},confirm:this.onConfirm}))}}]),p}(s.default.Component)}};var s=p(a(1)),c=p(a(1008));function p(e){return e&&e.__esModule?e:{default:e}}},976:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=c(a(21)),o=c(a(5)),r=c(a(7)),l=c(a(4)),i=c(a(6)),d=a(1),s=c(d);function c(e){return e&&e.__esModule?e:{default:e}}a(977);var p=c(a(26)).default.base,u=p.NCButtonGroup,f=p.NCButton,m=p.NCMenu,h=p.NCDropdown,g=function(e){function t(e){(0,o.default)(this,t);var a=(0,l.default)(this,(t.__proto__||(0,n.default)(t)).call(this,e));return a.createBtn=function(e){return e.map((function(e){if(e.isshow){if("btn"==e.divide)return s.default.createElement(f,{className:"divide-btn",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name);if("select"==e.divide){var t=s.default.createElement(m,{onClick:function(){a.props.onClick(e.code)}},s.default.createElement(m.Item,{key:"1",fieldid:e.fieldid||e.code},s.default.createElement("div",null,e.name)));return s.default.createElement(h,{overlay:t,trigger:["click"],fieldid:e.dropdownFieldid},s.default.createElement(f,{className:"margin-left-1",key:e.code,colors:e.type,fieldid:e.fieldid||e.code,is_arrow:!0,style:{minWidth:18}},s.default.createElement("i",{className:"iconfont icon-hangcaozuoxiala1"})))}return s.default.createElement(f,{className:"margin-left-6 "+(e.className?e.className:""),key:e.code,colors:e.type,fieldid:e.fieldid||e.code,disabled:e.disabled,onClick:function(){a.props.onClick(e.code)}},e.name)}return null}))},a.createBtnGroup=function(e){if(e.length>0){var t=e.filter((function(e){return e.isshow})),n=a.createBtn(e);return 1===t.length?n:s.default.createElement(u,null,n)}return null},a.createButton=function(e){var t=e.filter((function(e){return e.group})),n=e.filter((function(e){return!e.group}));return s.default.createElement("div",null,s.default.createElement("div",{style:{marginLeft:6}},a.createBtnGroup(t)),a.createBtn(n))},a}return(0,i.default)(t,e),(0,r.default)(t,[{key:"render",value:function(){return s.default.createElement("div",{className:"buttons-component "+(this.props.className?this.props.className:"")},this.createButton(this.props.dataSource))}}]),t}(d.Component);t.default=g},977:function(e,t,a){var n=a(978);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},978:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".buttons-component div{display:flex;align-items:center}.buttons-component .ant-btn-group{margin-left:6px}body .divide-btn{margin-left:6px;border-top-right-radius:0;border-bottom-right-radius:0}body .margin-left-1{margin-left:1px;width:18px;border-top-left-radius:0;border-bottom-left-radius:0;display:flex;justify-content:center;align-items:center;padding:0}body .margin-left-1 .iconfont{font-size:12px}",""])},979:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i(a(1)),o=a(32),r=i(a(26)),l=i(a(367));function i(e){return e&&e.__esModule?e:{default:e}}var d=r.default.appIcons;t.default=function(e){var t=e.appCode,a=(0,o.getStore)("APPICONSSTORE"),r=(0,o.getStore)("nccIcon")||"";r=r.length?r+"_":r;var i=a&&a[t],s=d&&d[r+i]?d[r+i]:l.default[r]?l.default[r]:l.default.defaultIcon;return n.default.createElement("div",{style:{width:"24px",height:"24px",marginRight:"10px",background:"url("+s+") no-repeat 0px 0px",backgroundSize:"contain"}})}},984:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=w(a(372)),o=w(a(170)),r=w(a(111)),l=w(a(230)),i=w(a(925)),d=w(a(21)),s=w(a(5)),c=w(a(7)),p=w(a(4)),u=w(a(6)),f=a(1),m=w(f),h=a(37),g=a(968),y=a(919),T=w(a(35)),k=a(19),b=a(365),v=w(a(364));function w(e){return e&&e.__esModule?e:{default:e}}function C(e,t){var a=this,n=this.props,o=n.requestUrl,r=n.requestData,l=n.templetData,i=l.pagecode,d=l.appcode,s=l.templetid,c=o||"/nccloud/platform/templet/querypage.do",p=r||{pagecode:i,appcode:d,templetid:s};Array.isArray(p)&&0==p.length||(0,T.default)({url:c,data:p,loading:!0,info:{name:(0,k.langCheck)("ZoneSetting-000028","pages",e),action:(0,k.langCheck)("ZoneSetting-000029","pages",e)},success:function(e){var n=e.data.data;n&&(a.registerComponent(n),a.props.meta.setMeta(n),r&&r.forEach((function(e){n[e.code]&&(n[e.code].position=e.position)})),a.props.updatePreviewData(n),a.setState({reRender:!0},(function(){return t(n)})))}})}a(985);var x=function(e){function t(e){(0,s.default)(this,t);var a=(0,p.default)(this,(t.__proto__||(0,d.default)(t)).call(this,e));return a.afterInitTemplate=function(e){if(e){var t=e,d=[],s=a.getTabGirdRelationCode(t),c=t.formrelation,p=t.containerrelation,u=t.formassociatedrelation,f=[],m=[];s&&(0,i.default)(s).forEach((function(e){f=f.concat(e)})),u&&(0,i.default)(u).forEach((function(e){m=m.concat(e.formtabs)}));var h=function(e,t){var n=t.moduletype,o=t.code;"table"!==n&&"form"!==n&&"search"!==n||"form"===n&&c&&t.relationcode in c||"form"===n&&u&&m.includes(e)||(p&&s&&(0,i.default)(p).length&&(0,r.default)(s).includes(e)?d.push({id:o,name:t.name,myAreaType:n,position:t.position,tabGirdRelationCode:s[e],srcAreaCode:e}):f.includes(e)||d.push({id:o,name:t.name,myAreaType:n,position:t.position})),"form"===n&&a.props.form.setFormStatus(o,"edit"),"table"===n&&setTimeout((function(){0==a.props.editTable.getNumberOfRows(o)&&a.props.editTable.addRow(o)}),10)},g=!0,y=!1,T=void 0;try{for(var k,b=(0,o.default)((0,n.default)(t));!(g=(k=b.next()).done);g=!0){var v=k.value,w=(0,l.default)(v,2);h(w[0],w[1])}}catch(e){y=!0,T=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw T}}d[0]&&d[0].position&&d.sort((function(e,t){return e.position-t.position})),a.setState({all_keys:d})}},a.getTabGirdRelationCode=function(e){var t={},a=!0,r=!1,i=void 0;try{for(var d,s=(0,o.default)((0,n.default)(e));!(a=(d=s.next()).done);a=!0){var c=d.value,p=(0,l.default)(c,2),u=p[0],f=p[1];if("containerrelation"===u){var m=function(e,a){e&&(t.hasOwnProperty(e)||(t[e]=[]),a.map((function(a){t[e]=t[e].concat(a)})))},h=!0,g=!1,y=void 0;try{for(var T,k=(0,o.default)((0,n.default)(f));!(h=(T=k.next()).done);h=!0){var b=T.value,v=(0,l.default)(b,2);m(v[0],v[1])}}catch(e){g=!0,y=e}finally{try{!h&&k.return&&k.return()}finally{if(g)throw y}}}}}catch(e){r=!0,i=e}finally{try{!a&&s.return&&s.return()}finally{if(r)throw i}}return t},a.registerComponent=function(e){var t=a.getTabGirdRelationCode(e),n=(0,i.default)(e).filter((function(e){return e&&"form"===e.moduletype})).map((function(e){return e.code})),o=(0,i.default)(e).filter((function(e){return e&&"table"===e.moduletype})).map((function(e){return e.code})),l=(0,i.default)(e).filter((function(e){return e&&"search"===e.moduletype})).map((function(e){return e.code})),d=t&&(0,r.default)(t)||[];d.length&&t&&(0,i.default)(t).forEach((function(e){o=_.differenceBy(o,e)})),n.length&&a.props.use.form.apply(null,n),o.length&&a.props.use.editTable.apply(null,o),d.length&&a.props.use.cardTable.apply(null,d),l.length&&a.props.use.search.apply(null,l)},a.showModalHidden=function(){a.props.setModalVisibel(!1)},a.createDom=function(){var e=a.props,t=e.editTable,n=e.form,o=e.search,r=e.cardTable,l=n.createForm,i=t.createEditTable,d=o.NCCreateSearch,s=r.createCardTable,c=a.state.all_keys,p=[];return c.length&&c.map((function(e,t){switch(e.myAreaType){case"form":p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"form"+t},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"forms"+t}," ▼ "),""+e.name),l(e.id)));break;case"table":e.tabGirdRelationCode?p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),s(e.srcAreaCode))):p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"table"+t,ref:""+e.id},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"tables"+t}," ▼ "),""+e.name),i(e.id,{})));break;case"search":p.push(m.default.createElement("div",{className:"viewTemplateArea",key:"search"+t},m.default.createElement("div",{className:"descrip"},m.default.createElement("span",{key:"searchs"+t}," ▼ "),""+e.name),d(e.id,{useCache:!1})))}})),p},a.state={all_keys:[],json:{},reRender:!1},a}return(0,u.default)(t,e),(0,c.default)(t,[{key:"componentDidMount",value:function(){var e=this;(0,b.getMulti)({moduleId:"ZoneSetting",domainName:"workbench",callback:function(t){e.setState({json:t}),C.call(e,t,e.afterInitTemplate)}})}},{key:"render",value:function(){var e=this.state,t=e.json,a=e.reRender;return m.default.createElement(v.default,{maskClosable:!1,customHeader:(0,k.langCheck)("ZoneSetting-000121","pages",t),visible:this.props.previewVisibel,onOk:this.onOkDialog,onCancel:this.showModalHidden,width:"98%",className:"viewPageTem",footer:null,fieldid:"preview"},a&&this.createDom())}}]),t}(f.Component);x=(0,y.createPage)({})(x),t.default=(0,h.connect)((function(e){return{areaList:e.zoneSettingData.areaList,previewData:e.zoneSettingData.previewData}}),{updatePreviewData:g.updatePreviewData})(x)},985:function(e,t,a){var n=a(986);"string"==typeof n&&(n=[[e.i,n,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};a(13)(n,o);n.locals&&(e.exports=n.locals)},986:function(e,t,a){(e.exports=a(12)(!1)).push([e.i,".viewPageTem .u-modal-content .u-modal-body{overflow:auto;padding:20px 0}.viewPageTem .u-modal-content .u-modal-body .printContent{padding:20px}.viewPageTem .u-modal-content .u-modal-body .total-table-wrapper>.u-table-content>.u-table-scroll>div:not(.u-table-footer)>.u-table-body{overflow:hidden!important}.viewPageTem .u-modal-content .viewTemplateArea{padding:0 20px}",""])}}]);
//# sourceMappingURL=TemplateSetting-unit.js.map